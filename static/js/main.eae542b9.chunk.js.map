{"version":3,"sources":["firebase/config.js","providers/UserProvider.jsx","comps/view/main/Nav.js","img/pem50.png","comps/view/participantApp/Fab.js","comps/view/participantApp/Option.js","comps/view/participantApp/MenuTabs.js","comps/view/participantApp/Modals.js","comps/view/participantApp/PcView.js","comps/view/participantApp/StartForm.js","firebase/useFirestoreScenarios.js","comps/controller/useSetAspectObjs.js","comps/view/useGetResultHtml.js","firebase/useFirestoreLoadResults.js","comps/view/ResultDce.js","comps/view/participantApp/ParticipantResults.js","comps/controller/participantApp/DotFunctions.js","comps/controller/participantApp/ScenarioFunctions.js","comps/model/dce.js","comps/model/groupedDce.js","comps/controller/participantApp/App.js","comps/controller/participantApp/useGetGroupedScenarios.js","comps/controller/participantApp/useSaveResult.js","comps/view/main/SignIn.js","comps/view/main/SignUp.js","comps/view/main/PasswordReset.js","firebase/useStorage.js","comps/view/ProgressBar.js","comps/controller/UploadForm.js","comps/view/useScenarioDetailsHtml.js","comps/controller/ScenarioDetails.js","comps/model/scenario.js","comps/controller/ScenarioListPage.js","comps/controller/NewAspect.js","comps/view/List.js","comps/model/ageGender.js","comps/model/combi.js","comps/model/aspect.js","comps/model/filter.js","comps/view/AspectEditPage.js","comps/view/useAspectEditHtml.js","comps/controller/AspectListPage.js","comps/model/useGetDceList.js","comps/view/useNewDceHtml.js","comps/controller/NewDceForm.js","comps/view/DceListPage.js","comps/view/DcePlayListPage.js","comps/model/dceList.js","comps/view/main/Application.js","comps/view/main/MainApp.js","index.js"],"names":["firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","pemStorage","storage","pemFirestore","firestore","pemAuth","FieldValue","serverTimestamp","FieldPath","documentId","auth","provider","GoogleAuthProvider","signInWithGoogle","signInWithPopup","generateUserDocument","user","additionalData","a","userRef","doc","uid","get","exists","email","displayName","photoURL","set","console","error","getUserDocument","userDocument","data","UserContext","createContext","UserProvider","state","componentDidMount","onAuthStateChanged","userAuth","setState","log","this","Provider","value","props","children","Component","withRouter","useContext","useState","setLoggedInName","useEffect","className","to","src","width","height","alt","location","pathname","onClick","signOut","Fab","href","style","fontSize","Option","handleClick","sc1","sc2","shownSc","ageGender","choiceValue","setChoiceValue","fValues1","fValues","fValues2","cValue","pref","nonPref","scText","scImg","MenuTabs","dceDescr","index","setIndex","setValue","styles","tabs","background","label","AppBar","position","color","Tabs","indicatorColor","textColor","variant","onChange","event","newValue","Tab","enableMouseEvents","onChangeIndex","Modals","id","data-id","scExpl","length","PcView","StartForm","nrQuestions","setStarted","setQNr","handleAGChoice","htmlFor","options","name","option","useFirestoreScenarios","dceId","scenarios","setScenarios","unsub","collection","onSnapshot","snap","documents","forEach","push","JSON","stringify","useSetAspectObjs","userId","currentDce","aspectObjs","setAspectObjs","dceFeatures","features","tempAspectObjs","then","querySnapshot","aspectName","aspectDescr","snapshot","tempFilters","tempFilter","favorFilters","againstFilters","filterList","newFavorFilter","fName","groupFeature","fValue","groupValue","age","ageFilter","gender","genderFilter","newAgainstValue","feature","i","featureName","featureValue1","featureValue2","newAgainstFilter","newTempObjs","findIndex","obj","catch","err","useGetResultHtml","results","resultHtml","setResultHtml","tempResult","aspectObj","oddsFavor","oddsAgainst","combis","combi","filter","result","passesAllFilters","favFilter","hasOwnProperty","favor","indexOf","againstFilter","against","prob","graphProb","Math","abs","clNames","graphReverse","barClasses","getBarClasses","role","aria-valuenow","aria-valuemin","aria-valuemax","class","toFixed","tempClNames","useFirestoreLoadResult","setResults","ResultDce","ParticipantResults","resultList","grouped","getRndNrList","maxNr","usedNrs","nrList","j","randNr","tempRandNr","floor","random","includes","Dce","descr","scList","aspectList","GroupedDce","App","answerList","setAnswerList","setResultList","setAgeGender","done","setDone","todo","setTodo","setSc1","setSc2","qNr","setCurrentDce","setNrQuestions","isGrouped","setIsGrouped","setDceDescr","setDceFeatures","dceDetails","setDceDetails","dceNameEdit","setDceNameEdit","finished","setFinished","started","setError","useParams","scenarioListA","setScenarioListA","scenarioListB","setScenarioListB","randNrList","scListA","nr","scListB","scA","find","altnr","useGetGroupedScenarios","M","AutoInit","tempListA","dones","todos","pop","calcDots","fValuesArray","map","sc","dce","tempGrouped","tempDetails","details","dot","setDots","initialRender","useRef","current","collRef","tempResultList","answer","add","useSaveResult","tempAgeGender","SignIn","setEmail","password","setPassword","onChangeHandler","currentTarget","type","placeholder","preventDefault","signInWithEmailAndPassword","signInWithEmailAndPasswordHandler","SignUp","setDisplayName","createUserWithEmailAndPasswordHandler","createUserWithEmailAndPassword","PasswordReset","emailHasBeenSent","setEmailHasBeenSent","action","sendPasswordResetEmail","setTimeout","sendResetEmail","useStorage","file","progress","setProgress","url","setUrl","storageRef","ref","put","on","percentage","bytesTransferred","totalBytes","getDownloadURL","ProgressBar","setFile","scNr","creatUrl","useCallback","UploadForm","types","e","selected","target","files","useScenarioDetailsHtml","currentSc","setCurrentSc","scProps","handleChosen","setChosen","handleSave","handleCreateAlt","handleEntry","chosen","setIsSaved","isSaved","scenarioHtml","setScenarioHtml","tempSc","Object","keys","tempHtml","defaultValue","isDisabled","altSc","ScenarioDetails","handleAddScenario","setScNr","getAltFValues","fValueList","newFeatValue","groupFeat","groupFeatValue","altFValueList","fieldsComplete","featuresComplete","textOrImageComplete","alert","some","saveScenario","scAltIndex","toString","update","scenario","scIndex","assign","altFValues","newId","Scenario","ScenarioListPage","setScListChanged","seqNr","newScDetails","response2","newSc","clipText","window","navigator","clipboard","writeText","dummy","confirm","scId","altScNr","splice","delete","altScIndex","deleteSc","NewAspect","addAspect","setAspectName","setAspectDescr","handleInputA","currentName","nameList","required","rows","descrList","List","refreshListFlag","setCurrentAsp","deleteAspect","listHtml","setListHtml","tempList","aspect","AgeGender","Combi","Aspect","combiList","Filter","AspectEditPage","currentAsp","showAspectsFlag","filterSaved","setFilterSaved","aspectProps","editFunctions","editProps","useLocation","saveFilters","handleAddCombi","setAgeGenderValues","setGroupValues","setChosenFeatures","handleDeleteCombi","fromDb","aspectId","aspectFilters","groupValues","chosenFeatures","ageGenderValues","handleFName","handleFValue","handleGroupValue","handleAgeGenderValue","handleDelete","handleAddFilter","setFromDb","helperArray","ageOptions","genderOptions","tempFromDB","cIndex","c","x","ind","optionHtml","isClearable","useAspectEditHtml","tempCombiList","aspId","aspIndex","asp","tempAspectList","tempAspect","AspectListPage","setShowAspectsFlag","setRefreshListFlag","showNew","setShowNew","findFreeCombiNr","sort","b","setCombi","Id","showNewAspectForm","aspectRef","combiRef","restOfCombi","dbFilterList","filterObj","newCombiNr","newCombi","docs","aspectColl","docRef","newCombiList","newAspect","useGetDceList","dceList","setDceList","tempDocs","orderBy","aspects","combiObj","useNewDceHtml","inputProps","groupProps","miscProps","newDce","handleInputChange","handleDescrInputChange","handleRemoveClick","handleNrQuestionsInput","inputList","setGroupValue","groupChecked","handleCheckbox","handleAddClick","saveDce","dceHtml","setDceHtml","checked","NewDceForm","showNewDceForm","setDceListChanged","setInputList","setGroupChecked","setNewDce","featuresNotNull","item","existsName","tempDcs","list","nrQ","nrString","Number","every","dceNotNull","addDce","DceListPage","dceListChanged","showScenarioOrAspect","setShowScenarioOrAspect","tempHtmlList","deleteDce","DcePlayListPage","DceList","names","dceIndex","clearCollection","dceToSave","path","Application","getDceList","exact","component","MainApp","Nav","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.eae542b9.chunk.js","sourcesContent":["import firebase from 'firebase/app';\r\nimport 'firebase/storage';\r\nimport 'firebase/firestore';\r\nimport 'firebase/auth';\r\n\r\n \r\n // Firebase configuration file\r\n \r\n var firebaseConfig = {\r\n    apiKey: \"AIzaSyDkuqUfQCo8w_7OWogV44gsGLzaE-yEvX4\",\r\n    authDomain: \"pem-firestore.firebaseapp.com\",\r\n    projectId: \"pem-firestore\",\r\n    storageBucket: \"pem-firestore.appspot.com\",\r\n    messagingSenderId: \"528017814946\",\r\n    appId: \"1:528017814946:web:f8fab7864531498a146efb\"\r\n  };\r\n  // Initialize Firebase\r\n  firebase.initializeApp(firebaseConfig);\r\n\r\n \r\nconst pemStorage = firebase.storage();\r\nconst pemFirestore = firebase.firestore();\r\nconst timestamp = firebase.firestore.FieldValue.serverTimestamp;\r\nconst pemId = firebase.firestore.FieldPath.documentId;\r\nconst pemAuth = firebase.auth();\r\nconst provider = new firebase.auth.GoogleAuthProvider();\r\n\r\nexport const signInWithGoogle = () => {\r\n  pemAuth.signInWithPopup(provider);\r\n};\r\nexport const generateUserDocument = async (user, additionalData) => {\r\n  if (!user) return;\r\n\r\n  const userRef = pemFirestore.doc(`users/${user.uid}`);\r\n  const snapshot = await userRef.get();\r\n\r\n  if (!snapshot.exists) {\r\n    const { email, displayName, photoURL } = user;\r\n    try {\r\n      await userRef.set({\r\n        displayName,\r\n        email,\r\n        photoURL,\r\n        ...additionalData\r\n      });\r\n    } catch (error) {\r\n      console.error(\"Error creating user document\", error);\r\n    }\r\n  }\r\n  return getUserDocument(user.uid);\r\n};\r\n\r\nconst getUserDocument = async uid => {\r\n  if (!uid) return null;\r\n  try {\r\n    const userDocument = await pemFirestore.doc(`users/${uid}`).get();\r\n\r\n    return {\r\n      uid,\r\n      ...userDocument.data()\r\n    };\r\n  } catch (error) {\r\n    console.error(\"Error fetching user\", error);\r\n  }\r\n};\r\n\r\nexport { pemStorage, pemFirestore, timestamp, pemAuth, pemId };","import React, { Component, createContext } from \"react\";\r\nimport { pemAuth, generateUserDocument } from '../firebase/config';\r\n\r\nexport const UserContext = createContext({ user: null });\r\n\r\nclass UserProvider extends Component {//Component to provide username via Context if user is logged in\r\n    state = {\r\n      user: null\r\n    };\r\n  \r\n        \r\n    componentDidMount = async () => {\r\n      pemAuth.onAuthStateChanged(async userAuth => {\r\n        const user = await generateUserDocument(userAuth);\r\n        this.setState({ user });\r\n        console.log(\"User logged in\");\r\n      });\r\n  \r\n  \r\n    };\r\n  \r\n    render() {\r\n      const { user } = this.state;\r\n  \r\n      return (\r\n        <UserContext.Provider value={user}>\r\n          {this.props.children}\r\n        </UserContext.Provider>\r\n      );\r\n    }\r\n  }\r\n  \r\n  export default UserProvider;","import  React, { useContext, useState, useEffect } from \"react\";\r\nimport { Link, withRouter } from \"react-router-dom\";\r\nimport {pemAuth} from \"../../../firebase/config\";\r\nimport logo from \"../../../img/pem50.png\"\r\nimport { UserContext } from \"../../../providers/UserProvider\";\r\n\r\n\r\n\r\nfunction Navigation(props) {\r\n     //Nav component with menu items\r\n     const user = useContext(UserContext);\r\n    // const displayName = user.displayName;\r\n const [loggedInName, setLoggedInName] = useState('');\r\n\r\n    useEffect(() => {\r\n      let displayName;\r\n      if(user){\r\n      displayName = user.displayName\r\n      setLoggedInName(displayName);\r\n      }\r\n      else {displayName=''}\r\n    }, [user])\r\n\r\n  return (\r\n    <div className=\"navigation\">\r\n      <nav className=\"navbar navbar-expand navbar-dark bg-dark\">\r\n        <div className=\"container\">\r\n          <Link className=\"navbar-brand\" to=\"/\">\r\n            <img src={logo} width='35px' height='30px' alt=\"PEM logo\" />\r\n          </Link>\r\n          <div>\r\n            <ul className=\"navbar-nav ml-auto\">\r\n              <li key=\"0\"\r\n                className={`nav-item  ${\r\n                  props.location.pathname === \"/\" ? \"active\" : \"\"\r\n                }`}>\r\n                <Link className=\"nav-link\" to=\"/\">\r\n                  Develop\r\n                </Link>\r\n              </li>\r\n              <li key=\"1\"\r\n                className={`nav-item  ${\r\n                  props.location.pathname === \"/dcePlayList\" ? \"active\" : \"\"\r\n                }`}>\r\n                <Link className=\"nav-link\" to=\"/dcePlayList\">\r\n                 Run/Results\r\n                </Link>\r\n              </li>\r\n              {user? <li key=\"2\" className=\"nav-item\">\r\n          <Link to=\"/\" className=\"nav-link\" onClick = {() => {pemAuth.signOut()}}>Sign out ({user.displayName})</Link>\r\n        </li>\r\n        : <li key=\"2\" className=\"nav-item\">\r\n          <Link to=\"/\" className=\"nav-link\" to=\"/\">Sign in</Link>\r\n        </li>}\r\n            </ul>\r\n          </div>\r\n        </div>\r\n      </nav>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default withRouter(Navigation);","export default \"data:image/png;base64,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\"","const Fab = () => {\r\n\t//Fixed action button for additional explanation during dce\r\n    return ( \r\n        <div className=\"outtro\">\r\n\t\t\t<div className=\"fixed-action-btn\">\r\n\t\t\t\t<a href=\"#modal1\" className=\" modal-trigger btn-floating red darken-2\">\r\n\t\t\t\t\t<i className=\"material-icons mat-icon\" style={{fontSize: '140%'}} >help_outline</i></a>\r\n\t\t\t</div>\r\n\t\t</div>\r\n     );\r\n}\r\n \r\nexport default Fab;","import { useState, useEffect } from \"react\";\r\n\r\nconst Option = ({handleClick, sc1, sc2, value, shownSc, ageGender}) => {\r\n//Component that contains option details and feeds back result of choice\r\n\r\nconst [choiceValue, setChoiceValue] = useState({})\r\n//sets choicevalue depending on choice made during experiment\r\n    useEffect(() => {\r\n      if(sc1&&sc2){\r\n      let fValues1 = sc1.fValues;\r\n      let fValues2 = sc2.fValues;\r\n      let cValue = null;\r\n      if(value==='A'){\r\n      cValue = {pref: {...fValues1, ...ageGender}, nonPref: {...fValues2, ...ageGender}}\r\n      }\r\n      if(value==='B'){\r\n        cValue = {pref: {...fValues2, ...ageGender}, nonPref: {...fValues1, ...ageGender}}\r\n      }\r\n      setChoiceValue(cValue);\r\n      }\r\n    }, [sc1, sc2, ageGender, value])\r\n    \r\n    //Shows text and images on the screen\r\n    return ( \r\n        <div className=\"swiper-slide choose-btn\">\r\n\t\t\t\t  <div className=\"s10 \">\r\n            {shownSc&&<div className=\"choice-container\">\r\n            <p>{shownSc.scText}</p>\r\n            <img className = \"swipe-img choice-container\" src={shownSc.scImg} alt=\"\"/>\r\n                  </div>}\r\n           </div>\r\n\t\t\t\t\t{shownSc&&<button value={value} onClick={()=>{handleClick(choiceValue)}} className=\"btn blue darken-2 waves-effect waves-light z-depth-2\">Choose</button>}\r\n        </div>\r\n     );\r\n}\r\n \r\nexport default Option;","import React, {useState} from 'react';\r\nimport Tabs from '@material-ui/core/Tabs';\r\nimport Tab from '@material-ui/core/Tab';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport SwipeableViews from 'react-swipeable-views';\r\nimport '../../../index.css';\r\nimport Option from './Option';\r\n\r\n  const MenuTabs = ({handleClick, sc1, sc2, dceDescr, ageGender})=>{\r\n//Component for displaying choices in swipable tabs for smartphones\r\n\r\n    const [index, setIndex] = useState(0);\r\n    const [value, setValue] = useState(0);\r\n    \r\n\r\n  const handleChange = (event, newValue) => {\r\n    setValue(newValue)\r\n    setIndex(\r\n      newValue,\r\n    );\r\n    };\r\n\r\n  const handleChangeIndex = (index) => {\r\n    setIndex(\r\n      index,\r\n    );\r\n    setValue (index);\r\n  };\r\n\r\n  const styles = {\r\n    tabs: {\r\n      background: '#fff',\r\n      },\r\n    label: {\r\n       fontSize: '100%',\r\n      }}\r\n\r\n    return (\r\n      <div className=\"swiper-container\">\r\n          <AppBar position=\"static\" color=\"default\">\r\n            <Tabs indicatorColor=\"primary\" textColor=\"primary\" background=\"primary\"\r\n              variant=\"fullWidth\" value={value} onChange={handleChange} style={styles.tabs}>\r\n              <Tab style={styles.label} label=\"option n1\" />\r\n              <Tab style={styles.label} label=\"option n2\" />\r\n            </Tabs>\r\n          </AppBar>\r\n        <h5 className=\"text-secondary mt-1 mb-0 text-center\">{dceDescr}</h5>\r\n\r\n        <SwipeableViews enableMouseEvents index={index} onChangeIndex={handleChangeIndex}>\r\n          <div className=\"slide\">\r\n            {/* Displays first option  */}\r\n             <div className=\"innerslide\" >\r\n             <Option handleClick={handleClick} sc1={sc1} sc2={sc2} value='A' shownSc={sc1} ageGender={ageGender}/>\r\n             </div> \r\n              </div>\r\n          <div className=\"slide\">\r\n            {/* Displays second option */}\r\n            <div className=\"innerslide\" >\r\n              <Option handleClick={handleClick} sc1={sc1} sc2={sc2} value='B' shownSc={sc2} ageGender={ageGender}/>\r\n             </div> \r\n          </div>\r\n        </SwipeableViews>\r\n      </div>\r\n    );\r\n  }\r\n\r\n\r\nexport default MenuTabs;","\r\nconst Modals = ({sc1, sc2}) => {\r\n//Component for displaying modals\r\n\r\n    return ( \r\n        <div>\r\n            \r\n         {/* //Modal for showing additional explanation during dce */}\r\n            <div id=\"modal1\" data-id=\"modal1\" className=\"modal\">\r\n                <div className=\"modal-content black-text modal-close center\">\r\n                    <div className=\"flow-text\"  >\r\n                        <h4 className=\"mb-3\">Additional explanation:</h4>\r\n                        <h6><u>Scenario 1:</u></h6>\r\n                        {sc1&&<p className=\"flow-text\">{sc1.scExpl}</p>}\r\n                        {sc1&&sc1.scExpl.length===0&&<h5 className=\"\">No additional explanation available</h5>}\r\n                        <h6><u>Scenario 2:</u></h6>\r\n                        {sc2&&<p className=\"flow-text\">{sc2.scExpl}</p>}\r\n                        {sc2&&sc2.scExpl.length===0&&<h5 className=\"\">No additional explanation available</h5>}\r\n\r\n                        <button className=\"btn btn-sm blue darken-2 waves-effect waves-light z-depth-2\">Close</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n     );\r\n}\r\n \r\nexport default Modals;","import Option from './Option';\r\n\r\nconst PcView = ({handleClick, sc1, sc2, dceDescr, ageGender }) => {\r\n    //Component for displaying choices on larger screen like pc, options are next to eachother\r\n\r\n    return ( \r\n        <div className=\"pc-view\">\r\n            <h5 className=\"text-secondary mt-1 mb-1\">{dceDescr}</h5>\r\n            <div className=\"pc-container\">\r\n                {/* Displays first option  */}\r\n                <div className=\"option-container\">\r\n                    <Option handleClick={handleClick} sc1={sc1} sc2={sc2} value='A' shownSc={sc1} ageGender={ageGender}/>\r\n                </div>\r\n                {/* Displays second option */}\r\n                <div className=\"option-container\">\r\n                    <Option handleClick={handleClick} sc2={sc2} sc1={sc1} value='B' shownSc={sc2} ageGender={ageGender}/>\r\n                </div>\r\n             </div>\r\n        </div>\r\n     );\r\n}\r\n \r\nexport default PcView;","import Select from \"react-select\";\r\n\r\nconst StartForm = ({nrQuestions, setStarted, setQNr, handleAGChoice}) => {\r\n//Page component that is shown to the participant at the start of the dce.\r\n//Age and gender are requested. If left empty, the dce will start anyway.\r\n//Values are stored via HandleAGChoice\r\n\r\nconst ageOptions = [{label: \"younger than 25 years\", value: \"younger than 25 years\"},{label: \"25 years or older\", value: \"25 years or older\"}];\r\nconst genderOptions = [{label: \"female\", value: \"female\"},{label: \"male\", value: \"male\"}]\r\n    \r\n     return ( \r\n       <div className=\"my-5\"> \r\n          <div className=\"col resultsContainer mx-3\">\r\n               <h5>Thank you for particpating in this experiment. You will be asked {nrQuestions} questions about your preference.</h5>\r\n               <h5 className=\"text-secondary mb-5\">Please select your gender and age and then start by clicking the button below. </h5>\r\n               \r\n               <div className=\"col-md-6   mx-auto\"> <label htmlFor=\"gender\" className=\"col-form-label\">Gender</label>\r\n                    <Select className=\"mb-2\" options={genderOptions} id=\"gender\" name=\"gender\" onChange={(option, name)=>handleAGChoice(option.value, name.name)}/>\r\n               </div>\r\n               <div className=\"col-md-6   mx-auto\"> <label htmlFor=\"age\" className=\"col-form-label\">Age</label>\r\n                    <Select className=\"mb-4\" options={ageOptions} id=\"age\" name=\"age\" onChange={(option, name)=>handleAGChoice(option.value,  name.name)}/>\r\n               </div>\r\n               <button className=\"btn blue darken-2 \" onClick={()=>{setStarted(true); setQNr(0)}}>Start</button>\r\n          </div>\r\n     </div>\r\n     );\r\n}\r\n \r\nexport default StartForm;","import {  useState, useEffect } from 'react';\r\nimport { pemFirestore } from './config';\r\n\r\n\r\nconst useFirestoreScenarios = (user, dceId) => {//Connect to firestore dB and get scenario's and return them as array\r\n  const [scenarios, setScenarios] = useState([]);\r\n\r\n\r\n  useEffect(() => {\r\n    if(user&& dceId){\r\n    const unsub = pemFirestore.collection('users').doc(user).collection('DceList').doc(dceId).collection('Scenarios')\r\n      .onSnapshot(snap => {\r\n        let documents = [];\r\n        snap.forEach(doc => {\r\n          documents.push({...doc.data()});\r\n        });\r\n        setScenarios(documents);\r\n        console.log(\"scenarios just set: \"+JSON.stringify(documents))\r\n      });\r\n    return () => unsub();\r\n    }\r\n    // this is a cleanup function that react will run when\r\n    // a component using the hook unmounts\r\n  }, [user, dceId]);\r\n\r\n  return { scenarios };\r\n}\r\n\r\nexport default useFirestoreScenarios;","import { useState, useEffect} from 'react';\r\nimport { pemFirestore } from \"../../firebase/config\";\r\n\r\nexport default function useSetAspectObjs(userId, dceId, currentDce) {\r\n    // Loads aspects from database and return them as objects with combi's including filters for 'in favor' and 'against'\r\n    const [aspectObjs, setAspectObjs] = useState([]);\r\n    const dceFeatures = currentDce.features;\r\n\r\n    useEffect(() => {\r\n        if(userId&&dceId&&currentDce){\r\n        let tempAspectObjs = [];\r\n        setAspectObjs(tempAspectObjs);//ensure AspectObjects are empty\r\n        let response = pemFirestore.collection('users').doc(userId).collection('DceList').doc(dceId).collection('AspectList');\r\n        response.get()\r\n        .then((querySnapshot)=>{\r\n            querySnapshot.forEach((doc)=>{//for each aspect set name and description\r\n                tempAspectObjs.push({aspectName: doc.data().aspectName, aspectDescr: doc.data().aspectDescr, id: doc.id});\r\n                pemFirestore.collection('users').doc(userId).collection('DceList').doc(dceId).collection('AspectList').doc(doc.id).collection('Combis')\r\n                .get()\r\n                .then((snapshot)=>{\r\n                    let tempFilters = [];\r\n                    snapshot.forEach((snap)=>{//for each combi set in favor and against filters\r\n                        let tempFilter = snap.data();\r\n                        let favorFilters = [];\r\n                        let againstFilters = [];\r\n                        favorFilters.push(...tempFilter.filterList);\r\n                        againstFilters.push(...tempFilter.filterList);\r\n                        let newFavorFilter = {fName: currentDce.groupFeature, fValue: snap.data().groupValue};//include groupfeature as favorfilter\r\n                        if(snap.data().ageGender){\r\n                            if(snap.data().ageGender.age!==\"\"){\r\n                        let ageFilter = {fName: \"age\", fValue: snap.data().ageGender.age};\r\n                        favorFilters.push(ageFilter);\r\n                        againstFilters.push(ageFilter);\r\n                    }\r\n                    if(snap.data().ageGender.gender!==\"\"){\r\n                        let genderFilter = {fName: \"gender\", fValue: snap.data().ageGender.gender};\r\n                        favorFilters.push(genderFilter);\r\n                        againstFilters.push(genderFilter);\r\n                        }}\r\n                        favorFilters.push(newFavorFilter);\r\n                        let newAgainstValue = \"\";//include opposite value of groupfeature as filter in againstfilters\r\n                        dceFeatures.forEach((feature,i) =>{\r\n                        if (feature.featureName===currentDce.groupFeature){\r\n                            if(feature.featureValue1===snap.data().groupValue){\r\n                                newAgainstValue = feature.featureValue2;}\r\n                            if(feature.featureValue2===snap.data().groupValue){\r\n                                newAgainstValue = feature.featureValue1;}\r\n                        }\r\n                        })\r\n                        let newAgainstFilter = {fName: currentDce.groupFeature, fValue: newAgainstValue};\r\n                        againstFilters.push(newAgainstFilter);\r\n                        tempFilter['favorFilters'] = favorFilters;\r\n                        tempFilter['againstFilters'] = againstFilters\r\n                        tempFilters.push(tempFilter);;\r\n                    })\r\n                    let newTempObjs = [...tempAspectObjs]\r\n                        let index = tempAspectObjs.findIndex(obj=>obj.id===doc.id);//find current aspect in list of aspectObjects\r\n                        newTempObjs[index]['combis'] = tempFilters;//set filters to current aspectObject\r\n                        setAspectObjs(newTempObjs);\r\n                        })\r\n            })\r\n         }).catch((err)=>{\r\n            console.log('Error with loading document'+err);\r\n        })\r\n        return\r\n    }},[userId, dceId, currentDce])\r\n\r\n\r\n\r\n\r\n    return {aspectObjs};\r\n}\r\n","import React, { useState, useEffect} from 'react';\r\n\r\nexport default function useGetResultHtml(aspectObjs, results) {\r\n    // Calculate outcome of aspectfilters and return html\r\n \r\n    const [resultHtml, setResultHtml] = useState([]);\r\n\r\n    useEffect(() => {\r\n        let tempResult = [];\r\n        tempResult.push(\r\n            <div key=\"head\">\r\n           <div key=\"headtext\" className=\"mb-3\"> &Delta; P shows the difference in probability that the aspect is true and the \r\n               probability that the aspect is not true\r\n           </div>\r\n           </div>\r\n        )\r\n        aspectObjs.forEach((aspectObj,i)=>{//For each aspect filter calculate how many results are in favor and against\r\n            let aspectDescr = aspectObj.aspectDescr;\r\n            let oddsFavor = [];\r\n            let oddsAgainst = [];\r\n            if(aspectObj.combis){\r\n            aspectObj.combis.forEach(combi=>{\r\n\r\n                    const checkFValue = (result=>{//check if result has to be counted in favor\r\n                        let passesAllFilters = true;\r\n                        combi.favorFilters.forEach(favFilter=>{\r\n                            if(!(favFilter.fValue===result[favFilter.fName]&&result.hasOwnProperty(favFilter.fName))){\r\n                                passesAllFilters = false;\r\n                            }\r\n                        })\r\n                        return(passesAllFilters)\r\n                    })\r\n                    let tempFavors = results.filter(checkFValue);\r\n                    tempFavors.forEach(favor=>{\r\n                        if(oddsFavor.indexOf(favor)===-1){//add to list if not already in list\r\n                            oddsFavor.push(favor);\r\n                        }\r\n                    })\r\n                               \r\n                    const checkAValue = (result=>{//check if result has to be counted against\r\n                        let passesAllFilters = true;\r\n                        combi.againstFilters.forEach(againstFilter=>{\r\n                            if(!(againstFilter.fValue===result[againstFilter.fName]&&result.hasOwnProperty(againstFilter.fName))){\r\n                                passesAllFilters=false;\r\n                            }\r\n                        })\r\n                        return(passesAllFilters)\r\n                    })\r\n                    let tempAgainst = results.filter(checkAValue);\r\n                    tempAgainst.forEach(against=>{\r\n                        if (oddsAgainst.indexOf(against)===-1){//add to list if not already in list\r\n                            oddsAgainst.push(against);\r\n                        }\r\n                    })\r\n                })\r\n        }\r\n        let prob = 0;\r\n        if (oddsAgainst.length>0||oddsFavor.length>0){\r\n            prob = 2*(oddsFavor.length/(oddsFavor.length+oddsAgainst.length))-1;\r\n        }\r\n        let graphProb = Math.abs(prob*50);// property to set width of bar in graph\r\n        let clNames = graphReverse(prob); // Set className to get reverse direction in case of negative number\r\n        let barClasses = getBarClasses(prob); // Set color of bars depending on positive or negative numbers\r\n\r\n        tempResult.push(//html for bars and text. Bars 'start' from middle by filling first half with empty bar. Small stripe in case of zero value.\r\n            <div key={`graphs ${i}`} className=\"pb-2\">\r\n                <span key={`asp-desc ${i}`} className=\"text-secondary\">{aspectDescr}</span><br/>\r\n                <div key={`clNames ${i}`} className={clNames}>\r\n                <div key={`pg-bar-pt1 ${i}`} className=\"progress-bar bg-light-grey\" role=\"progressbar\" style={{width: 50+\"%\"}} aria-valuenow=\"25\" aria-valuemin=\"0\" aria-valuemax=\"100\"></div>\r\n                {prob===0&&<div key={`pg-bar-pt2 ${i}`} class=\"progress-bar bg-teal\" role=\"progressbar\" style={{width: 2 +\"px\"}} aria-valuenow=\"30\" aria-valuemin=\"0\" aria-valuemax=\"100\"></div>}\r\n                <div key={`pg-bar-pt3 ${i}`} className={barClasses} role=\"progressbar\" aria-valuenow={prob} aria-valuemin=\"0\" aria-valuemax=\"100\" style={{width:graphProb+\"%\"}}>\r\n                {(prob>=0.2||prob<=-0.2)&&<span key={`pg-title ${i}`} className=\"sr-only\">&Delta; P = {prob.toFixed(2)}</span>}\r\n                </div>\r\n                </div>\r\n                {(prob<0.2&&prob>-0.2)&&<div key={`pg-desc ${i}`}>&Delta; P = {prob.toFixed(2)}</div>}\r\n                <span key={`pg-desc2 ${i}`}>(Chosen {(100*prob).toFixed(0)}% {prob<0 ? \"less\": \"more\"} than the opposite.)</span>\r\n\r\n            </div>)\r\n        setResultHtml(tempResult);\r\n        })\r\n        if(aspectObjs.length===0){\r\n            setResultHtml([<div><h5>No aspects defined.</h5></div>])\r\n        }\r\n        return \r\n    }, [aspectObjs, results])\r\n\r\n\r\n   const graphReverse = (prob)=>{// Set className to get reverse direction in case of negative number\r\n        let tempClNames = \"progress w-80 mx-auto\"\r\n        if (prob<0){\r\n            tempClNames=\"progress w-80 mx-auto flex-row-reverse\"\r\n        }\r\n        return  (tempClNames);\r\n    }\r\n\r\n    const getBarClasses = (prob)=>{// Set color of bars depending on positive or negative numbers\r\n        let barClasses = \"progress-bar bg-teal progress-bar-striped\";\r\n        if (prob<0){\r\n            barClasses = \"progress-bar bg-purple progress-bar-striped\"\r\n        }\r\n        return barClasses;\r\n    }\r\n\r\n\r\n    return {resultHtml};\r\n}\r\n","import {  useState, useEffect } from 'react';\r\nimport { pemFirestore } from './config';\r\n\r\n\r\nconst useFirestoreLoadResult = (user, dceId) => {//Loads the raw results from the database and returns them\r\nconst [results, setResults] = useState([]);\r\n\r\n\r\nuseEffect(() => {\r\n  if(user&&dceId){\r\n    let unsub = pemFirestore.collection('users').doc(user).collection('DceList').doc(dceId).collection('RawResults')\r\n    .onSnapshot(snap => {\r\n        let documents = [];\r\n        snap.forEach(doc => {\r\n          documents.push({...doc.data().pref, id: doc.id});\r\n        });\r\n        setResults(documents);\r\n      });\r\n      return () => unsub();\r\n    // this is a cleanup function that react will run when\r\n    // a component using the hook unmounts\r\n  }}, [user, dceId]);\r\n\r\n  return {results} ;\r\n}\r\n\r\nexport default useFirestoreLoadResult;","import React from 'react';\r\nimport useFirestoreLoadResult from '../../firebase/useFirestoreLoadResults';\r\nimport useSetAspectObjs from '../controller/useSetAspectObjs';\r\nimport useGetResultHtml from './useGetResultHtml';\r\n\r\n\r\nexport default function ResultDce({currentDce, dceId, userId}) {\r\n    //Shows results of a DCE. Only available for grouped dce's at present\r\n\r\n    const {results} = useFirestoreLoadResult(userId ,dceId);//load results from database\r\n    const {aspectObjs} = useSetAspectObjs(userId, dceId, currentDce); //load aspects from dB\r\n    const {resultHtml} = useGetResultHtml(aspectObjs, results); //calculate numbers and return html for results\r\n\r\n    return (\r\n        <div key=\"main\">\r\n           <div key=\"title\" className=\"mb-5\"><h3>Total results from all particpants: </h3>\r\n            {resultHtml}</div>\r\n           \r\n        </div>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport useSetAspectObjs from '../../controller/useSetAspectObjs';\r\nimport useGetResultHtml from '../useGetResultHtml';\r\nimport ResultDce from \"../ResultDce\";\r\n\r\n\r\nexport default function ParticipantResults({resultList, currentDce, dceId, userId}) {\r\n    const {aspectObjs} = useSetAspectObjs(userId, dceId, currentDce);\r\n    const {resultHtml} = useGetResultHtml(aspectObjs, resultList);\r\n\r\n    return (\r\n        <div className=\"my-5\"> \r\n            <p>Thank you for completing this experiment!</p>\r\n            {/*only show results if the dce is grouped*/}\r\n            {currentDce.grouped&&<div className=\"col resultsContainer mx-3\"> \r\n                <div className=\"mb-5\"><h3>Your results: </h3>\r\n                {resultHtml}</div>\r\n            </div>}\r\n            {currentDce.grouped&&<div className=\"col resultsContainer mx-3\"> \r\n                <ResultDce  currentDce={currentDce} dceId={dceId} userId={userId} />\r\n            </div>}\r\n\r\n     </div>\r\n    )\r\n}\r\n","//Sets the dots that indicate the questions that have to be answered\r\nconst setDots =  (length)=>{\r\n    let dot = [];\r\n    for(let i=0; i<length;i++){\r\n    dot.push(<span key={`emptydot${i}`} className=\"dot\"></span>)};\r\n  return dot;\r\n  };\r\n\r\n     //calculate nr of dots of questions still to answer\r\n  const calcDots = (done, setDone, todo, setTodo, qNr)=>{\r\n    let dones = [];//indicator dots for number of questions\r\n    dones = [...done];\r\n    dones.push(<span key={`filleddot${qNr}`} className=\"dot blue darken-2\"></span>);\r\n    setDone(dones);\r\n    let todos = [];//indicator dots for questions still to answer\r\n    todos = [...todo];\r\n    todos.pop();\r\n    setTodo(todos);\r\n    return;\r\n}\r\n \r\nexport {setDots, calcDots};","const getRndNrList= (maxNr, length)=>{\r\n  let usedNrs = [];\r\n  let nrList = [];\r\n  for(let j=0;j<length;j++){\r\n    let randNr=-1;\r\n    for (let i=maxNr*5; i>0; i--){\r\n        const tempRandNr = Math.floor(Math.random() * maxNr);\r\n        if (!usedNrs.includes(tempRandNr)){\r\n          randNr=tempRandNr;\r\n          break;\r\n          }\r\n      }\r\n    if(randNr!==-1){usedNrs.push(randNr)}  //store nr if it is used\r\n    nrList.push(randNr);\r\n  }\r\n  return nrList\r\n}\r\n\r\n  //get 2 random scenarios, no repeats and A!=B\r\nconst getRandomScenarios = (scenarios, prevRandomA, setPrevRandomA)=>{\r\n    const maxNr = scenarios.length;\r\n    const {RandomNrA, RandomNrB} = GetUnusedRndNrs(maxNr, prevRandomA, setPrevRandomA);\r\n    return ({ScenarioA: scenarios[RandomNrA], ScenarioB: scenarios[RandomNrB]});\r\n    }\r\n\r\n    \r\n// get random nr for the first scenario and store used nrs to avoid repeats\r\nconst GetRandomANr = (maxNr, prevRandomA, setPrevRandomA)=>{\r\n    let usedNrsA = [];\r\n    if (prevRandomA!=null){usedNrsA=[...prevRandomA]}\r\n    let randNrA=-1;\r\n    for (let i=maxNr*5; i>0; i--){\r\n        const tempRandNrA = Math.floor(Math.random() * maxNr);\r\n        if (!usedNrsA.includes(tempRandNrA)){\r\n          randNrA=tempRandNrA;\r\n          break;\r\n          }\r\n      }\r\n    if(randNrA!==-1){usedNrsA.push(randNrA)}  //store A-nr if it is used\r\n    setPrevRandomA(usedNrsA);\r\n    return randNrA;\r\n  }\r\n\r\n//Gets 2 random nrs where A-nr has not been used before in this session and B is different from A\r\n//Used for Dce's without grouped scenario's\r\nconst GetUnusedRndNrs = (maxNr, prevRandomA, setPrevRandomA)=>{\r\n    let randNrA = GetRandomANr(maxNr, prevRandomA, setPrevRandomA);\r\n    let randNrB=-1;\r\n    for (let i=maxNr*10; i>0; i--){\r\n      const tempRandNrB = Math.floor(Math.random() * maxNr);\r\n      if (randNrA!==tempRandNrB){\r\n        randNrB=tempRandNrB;\r\n        break;\r\n      }\r\n    }   \r\n    return {RandomNrA: randNrA, RandomNrB: randNrB};\r\n}\r\n\r\n\r\nexport  {getRandomScenarios, GetRandomANr, getRndNrList} ;\r\n","class Dce {//object representing a discrete choice experiment, \r\n    constructor(id, name, descr, nrQuestions, features, grouped) {\r\n        this.id = id;\r\n        this.name = name;//name of the dce. Must be unique.\r\n        this.descr = descr;//description of this dce. Will be shown to participants\r\n        this.nrQuestions = nrQuestions;//nr of questions that the particpants will have to answer in this dce\r\n        this.features = features;//list of features on which a value has to be defined on each scenario\r\n        this.grouped = grouped;\r\n        this.scList = [];//list of scenario object that make up the dce\r\n        this.aspectList = [];//list of aspects that are used to filter the results\r\n    }\r\n}\r\nexport default Dce","import Dce from \"./dce\";\r\n\r\nclass GroupedDce extends Dce{//object representing a grouped dce. This is a dce where each scenario is paired with one specific other scenario\r\n    constructor(id, name, descr, nrQuestions, features, grouped, groupFeature, uid) {\r\n        super(id, name, descr, nrQuestions,  features, grouped, uid);//takes general params from Dce\r\n        this.groupFeature = groupFeature; //In a groupedDce, one feature is defined as groupFeature. This is the only feature that has a different value in a scenario pair \r\n    }\r\n}\r\nexport default GroupedDce","import Fab from '../../view/participantApp/Fab';\nimport MenuTabs from '../../view/participantApp/MenuTabs';\nimport Modals from '../../view/participantApp/Modals';\nimport M from 'materialize-css/dist/js/materialize.min.js';\nimport PcView from '../../view/participantApp/PcView';\nimport { useState, useEffect } from \"react\";\nimport { useParams} from \"react-router-dom\";\nimport StartForm from '../../view/participantApp/StartForm';\nimport { pemFirestore } from '../../../firebase/config';\nimport useFirestoreScenarios from '../../../firebase/useFirestoreScenarios';\nimport ParticipantResults from '../../view/participantApp/ParticipantResults';\nimport { setDots, calcDots } from './DotFunctions';\nimport useGetGroupedScenarios from './useGetGroupedScenarios'\nimport useSaveResult from './useSaveResult';\nimport Dce from '../../model/dce';\nimport GroupedDce from '../../model/groupedDce';\n\nfunction App() {\n\n  const [answerList, setAnswerList] =useState([]);\n  const [resultList, setResultList] = useState([]);\n  const [ageGender, setAgeGender] = useState({age: \"\", gender: \"\"})\n  const [done,setDone] = useState([]);\n  const [todo, setTodo] = useState([]);\n  const [sc1, setSc1] = useState(null);\n  const [sc2, setSc2] = useState(null);\n  const [qNr, setQNr] = useState(null);\n  const [currentDce, setCurrentDce] = useState(null)\n  const [nrQuestions, setNrQuestions] = useState(0);\n  const [isGrouped, setIsGrouped] = useState(null);\n  const [dceDescr, setDceDescr] = useState(null);\n  const [dceFeatures, setDceFeatures] = useState([]);\n  const [dceDetails, setDceDetails] = useState(null)\n  const [dceNameEdit, setDceNameEdit] = useState('');\n  const [finished, setFinished] = useState(false);\n  const [started, setStarted] = useState(false);\n  const [error, setError] = useState(\"\");\n  const {userId, dceId } = useParams();\n  const {scenarios} = useFirestoreScenarios(userId, dceId); // load scenario's from database\n  const {scenarioListA, scenarioListB} = useGetGroupedScenarios(scenarios, nrQuestions, setFinished, isGrouped );\n\n\nuseEffect(() => {\n  //initialize materialize - css library\n  M.AutoInit();\n});\n\nuseEffect(()=>{//creates two random lists with scenario's to show. \n  if(scenarioListB&&scenarioListA){\n  setSc1(scenarioListA[qNr]);//the qNr (question nr) determines which scenario is shown as sc1 and sc2 \n  setSc2(scenarioListB[qNr]);\n  }\n},[scenarioListA, scenarioListB, qNr])\n\n//Handle click from age and gender select in startform\nconst handleAGChoice = (value, id) =>{\n  let tempAgeGender = ageGender;\n  tempAgeGender[id] = value;\n  setAgeGender(tempAgeGender);\n}\n\n// handle click from choose button\n  const handleClick = (choiceValue) => {\n    if(choiceValue){\n    let tempListA =[...answerList];\n    tempListA.push(choiceValue);\n    setAnswerList(tempListA);\n    }//if choiceValue ==0, next scenario's are selected and answers are not recorded.\n    // SettingScenarios(isGrouped);\n    if(qNr+2>nrQuestions){\n      setFinished(true)}     //finishes if nr of questions as defined in Dce is reached\n    setQNr(qNr=>qNr+1);\n    calcDots(done, setDone, todo, setTodo, qNr); //takes care of indicator dots below the scenario's\n   }\n\n\n//load dce details from database\n//execute at startup and upon change of scenarios\nuseEffect(()=>{\n  if(scenarios&&userId&&dceId){ //only query dB if id's are known\n    setError(\"\");\n    setAnswerList([]);\n    let fValuesArray = scenarios.map(sc=>sc[\"fValues\"]);\n    let containsEmpty = false;\n    // let containsEmpty = fValuesArray.map(value=>Object.values(value)).find(x=>x===\"\");\n    console.log(\"fValuesArray: \"+JSON.stringify(fValuesArray))\n    console.log(\"containsEmpty: \"+containsEmpty)\n    if(containsEmpty){\n      setError(\"All scenario's must have data entered and saved - please contact the researcher.\")\n      return;                         \n    } else if(!containsEmpty){\n        let response = pemFirestore.collection('users').doc(userId).collection('DceList').doc(dceId);\n        response.get()\n        .then(doc=>{//for grouped scenario's the nr of scenario's must be at least twice the nr of questions. For ungrouped the minimum nr scenario's ==nrQuestions with minimum of 2\n          if((doc.data().grouped&&scenarios.length<2*doc.data().nrQuestions)||(!doc.data().grouped&&(scenarios.length<doc.data().nrQuestions||scenarios.length<2))){\n            setError(\"The scenario's are incomplete - please contact the researcher.\");\n          }else{setError(\"\");\n\n            let tempGrouped = doc.data().grouped;\n            let dce;\n                if(doc.data().grouped){\n                dce = new GroupedDce(  doc.id, doc.data().name, doc.data().descr, doc.data().nrQuestions, doc.data().features, doc.data().grouped, doc.data().groupFeature );\n                } else {\n                    dce = new Dce(doc.id, doc.data().name, doc.data().descr, doc.data().nrQuestions, doc.data().features, doc.data().grouped)\n                }\n            setCurrentDce(dce);\n            setDceFeatures(doc.data().features);\n            const tempDetails = {details: {grouped: doc.data().grouped, groupFeature: doc.data().groupFeature, nrQuestions: doc.data().nrQuestions}}\n            setDceDetails(tempDetails);\n            setDceDescr(doc.data().descr);\n            setDceNameEdit(doc.data().name);\n            setNrQuestions(doc.data().nrQuestions);\n            setIsGrouped(tempGrouped);\n            setTodo(setDots(doc.data().nrQuestions))\n            if (scenarios.length!==0){\n            }\n          }\n        }).catch((error) => {\n            console.error(\"Error loading document: \", error);\n          })}\n  }},[scenarios, userId, dceId]);\n\n//save results when finished \n useSaveResult(finished, answerList, userId, dceId, setResultList); \n\n// Show in the browser. Startform before begin, MenuTabs for mobile, PcView for pc, \n// done and todo are progress indicator. Show ParticpantResult when finished.\n  return (\n    <div>\n      <Modals sc1={sc1} sc2={sc2}/>\n      {!finished&&!started&&<StartForm nrQuestions={nrQuestions} setStarted={setStarted} setQNr={setQNr} handleAGChoice={handleAGChoice}/>}\n      {!finished &&started&&!error && <MenuTabs handleClick = {handleClick} sc1={sc1} sc2={sc2} dceDescr={dceDescr} ageGender={ageGender}/>} \n      {!finished &&started&&!error && sc1&&sc2&& <PcView handleClick = {handleClick} sc1={sc1} sc2={sc2} dceDescr={dceDescr} ageGender={ageGender}/>}\n      {!finished &&started&&!error&&<Fab />}\n      {!finished &&started&&!error&& <div className=\"footer\">\n         {done}\n         {todo}\n      </div>}\n      {finished &&started&&!error&&userId&&dceId&& <ParticipantResults resultList={resultList} currentDce={currentDce} dceDetails={dceDetails} dceNameEdit = {dceNameEdit} dceId={dceId} dceFeatures={dceFeatures} userId={userId}/>}\n      {error&&<div className=\"text-danger mt-5\"><h4>Error: {error}</h4></div>}\n    </div>\n  )\n}\n\nexport default App;\n","import { useEffect, useState } from \"react\";\r\nimport { getRndNrList} from './ScenarioFunctions'\r\n\r\n   //Get 2 scenarios that are only differing in the group feature. ScenarioA is random, ScenarioB is the pair of A\r\nexport default function useGetGroupedScenarios  (scenarios, nrQuestions, setFinished, isGrouped){\r\n  const [scenarioListA, setScenarioListA] = useState(null)\r\n  const [scenarioListB, setScenarioListB] = useState(null)\r\n\r\n    useEffect(()=>{\r\n        console.log(\"entering useeffect in getScenarios, nrQ en grouped:\"+nrQuestions+isGrouped)\r\n        if (scenarios&&nrQuestions&&isGrouped&&scenarios.length>0){\r\n            const maxNr = scenarios.length;\r\n            console.log(\"maxNr: \"+maxNr)\r\n      let randNrList = getRndNrList(maxNr, nrQuestions);\r\n      let scListA = [];\r\n      console.log(\"scenarios: \"+JSON.stringify(scenarios))\r\n      randNrList.forEach(nr=>{\r\n        scListA.push(scenarios[nr]);\r\n        })\r\n      let scListB = [];\r\n      if(isGrouped){\r\n          console.log(\"scListA: \"+JSON.stringify(scListA))\r\n          scListA.forEach(scA=>{\r\n              scListB.push(scenarios.find(({id})=>(id===scA.altnr)))\r\n          })\r\n      }\r\n      if(!isGrouped){\r\n          getRndNrList(maxNr, nrQuestions).forEach(nr=>{scListB.push(scenarios[nr])})\r\n      }  \r\n          setScenarioListA(scListA);\r\n      setScenarioListB(scListB);\r\n        }\r\n    },[scenarios, nrQuestions, isGrouped ])\r\n    \r\n    return( {scenarioListA,  scenarioListB});  \r\n  }","import {useRef, useEffect } from 'react'\r\nimport { pemFirestore } from '../../../firebase/config';\r\n\r\nexport default function useSaveResult(finished, answerList, userId, dceId, setResultList) {\r\n\r\n    const initialRender = useRef(true);\r\n\r\n//Save results to database when experiment is finished\r\nuseEffect(() => {\r\n    if (initialRender.current) {\r\n      initialRender.current = false;   // ensure this effect does not run on startup\r\n    } else {\r\n            let collRef = pemFirestore.collection('users').doc(userId).collection('DceList').doc(dceId).collection('RawResults')\r\n            let tempResultList = [];\r\n            answerList.forEach((answer,i)=> {collRef.add(answer);   //save each result to firstore db for total result\r\n                tempResultList.push(answer.pref,i);\r\n                });\r\n            setResultList(tempResultList);  //save this dce result as a list for personal result presentation\r\n        }\r\n    }, [finished])\r\n  \r\n\r\n    return \r\n }\r\n","import React, {useState} from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { signInWithGoogle } from \"../../../firebase/config\";\r\nimport { pemAuth } from \"../../../firebase/config\";\r\n\r\nconst SignIn = () => {//Sign in page\r\n    const [email, setEmail] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [error, setError] = useState(null);\r\n    const signInWithEmailAndPasswordHandler = \r\n            (event,email, password) => {\r\n                event.preventDefault();\r\n                pemAuth.signInWithEmailAndPassword(email, password)\r\n                .catch(error => {\r\n                    setError(\"Error signing in with password and email!\");\r\n                      console.error(\"Error signing in with password and email\", error);\r\n                    });\r\n    };\r\n\r\n      const onChangeHandler = (event) => {\r\n          const {name, value} = event.currentTarget;\r\n\r\n          if(name === 'userEmail') {\r\n              setEmail(value);\r\n          }\r\n          else if(name === 'userPassword'){\r\n            setPassword(value);\r\n          }\r\n      };\r\n\r\n  return (\r\n    <div className=\"row justify-content-center\">\r\n      <h1 className=\"text-3xl mb-2 text-center font-bold\">Sign In</h1>\r\n      <div className=\"col-sm-7\">\r\n        {error !== null && <div className = \"text-danger mb-3\">{error}</div>}\r\n        <form className=\"\">\r\n        <div className=\"form-floating\">\r\n           <input\r\n            type=\"email\"\r\n            className=\"form-control\"\r\n            name=\"userEmail\"\r\n            value = {email}\r\n            placeholder=\"Your email\"\r\n            id=\"userEmail\"\r\n            onChange = {(event) => onChangeHandler(event)}\r\n          />\r\n          <label htmlFor=\"userEmail\" className=\"block\">\r\n            Email:\r\n          </label>\r\n          </div>\r\n\r\n          <div className=\"form-floating \">\r\n          <input\r\n            type=\"password\"\r\n            className=\"form-control\"\r\n            name=\"userPassword\"\r\n            value = {password}\r\n            placeholder=\"Your Password\"\r\n            id=\"userPassword\"\r\n            onChange = {(event) => onChangeHandler(event)}\r\n          />\r\n             <label htmlFor=\"userPassword\" className=\"block\">\r\n            Password:\r\n          </label>\r\n          </div>\r\n          <button className=\"btn btn-outline-info\" onClick = {(event) => {signInWithEmailAndPasswordHandler(event, email, password)}}>\r\n            Sign in\r\n          </button>\r\n        </form>\r\n        <p className=\"my-3\">or</p>\r\n        <button\r\n          className=\"btn btn-outline-info\" onClick={() => {\r\n            signInWithGoogle();\r\n          }}>\r\n          Sign in with Google\r\n        </button>\r\n        <p className=\"my-3\">\r\n          Don't have an account?{\" \"}\r\n          <Link to=\"/signUp\" className=\"text-blue-500 hover:text-blue-600\">\r\n            Sign up here\r\n          </Link>{\" \"}\r\n          <br />{\" \"}\r\n          <Link to = \"passwordReset\" className=\"text-blue-500 hover:text-blue-600\">\r\n            Forgot Password?\r\n          </Link>\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\nexport default SignIn;","import React, { useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { pemAuth, signInWithGoogle, generateUserDocument } from \"../../../firebase/config\";\r\n\r\nconst SignUp = () => { //Sign up page. Either via mail address or Google account\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [displayName, setDisplayName] = useState(\"\");\r\n  const [error, setError] = useState(null);\r\n\r\n  const createUserWithEmailAndPasswordHandler =async (event, email, password) => {\r\n    event.preventDefault();\r\n    try{\r\n        const {user} = await pemAuth.createUserWithEmailAndPassword(email, password);\r\n        generateUserDocument(user, {displayName});\r\n      }\r\n      catch(error){\r\n        setError('Error Signing up with email and password');\r\n      }\r\n    setEmail(\"\");\r\n    setPassword(\"\");\r\n    setDisplayName(\"\");\r\n  };\r\n  const onChangeHandler = event => {\r\n    const { name, value } = event.currentTarget;\r\n    if (name === \"userEmail\") {\r\n      setEmail(value);\r\n    } else if (name === \"userPassword\") {\r\n      setPassword(value);\r\n    } else if (name === \"displayName\") {\r\n      setDisplayName(value);\r\n    }\r\n  };\r\n  return (\r\n    <div className=\"row justify-content-center\">\r\n      <h1 className=\"text-3xl mb-2 text-center font-bold\">Sign Up</h1>\r\n      <div className=\"col-sm-7\">\r\n        {error !== null && (\r\n          <div className=\"text-danger mb-3\">\r\n            {error}\r\n          </div>\r\n        )}\r\n        <form className=\"\">\r\n        <div className=\"form-floating\">     \r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control \"\r\n            name=\"displayName\"\r\n            value={displayName}\r\n            placeholder=\"Display name\"\r\n            id=\"displayName\"\r\n            onChange={event => onChangeHandler(event)}\r\n          />\r\n           <label htmlFor=\"displayName\" className=\"block\">\r\n            Display Name:\r\n          </label>\r\n        </div>\r\n        <div className=\"form-floating\">     \r\n           <input\r\n            type=\"email\"\r\n            className=\"form-control\"\r\n            name=\"userEmail\"\r\n            value={email}\r\n            placeholder=\"Your Email\"\r\n            id=\"userEmail\"\r\n            onChange={event => onChangeHandler(event)}\r\n          />\r\n           <label htmlFor=\"userEmail\" className=\"block\">\r\n            Email:\r\n          </label>\r\n          </div>\r\n          <div className=\"form-floating\">     \r\n          <input\r\n            type=\"password\"\r\n            className=\"form-control\"\r\n            name=\"userPassword\"\r\n            value={password}\r\n            placeholder=\"Your Password\"\r\n            id=\"userPassword\"\r\n            onChange={event => onChangeHandler(event)}\r\n          />\r\n          <label htmlFor=\"userPassword\" className=\"block\">\r\n            Password:\r\n          </label>\r\n          </div>\r\n          <button\r\n            className=\"btn btn-outline-info\"\r\n            onClick={event => {\r\n              createUserWithEmailAndPasswordHandler(event, email, password);\r\n            }}\r\n          >\r\n            Sign up\r\n          </button>\r\n        </form>\r\n        <p className=\"my-3\">or</p>\r\n        <button\r\n          className=\"btn btn-outline-info\"\r\n          onClick={() => {\r\n            try {\r\n              signInWithGoogle();\r\n            } catch (error) {\r\n              console.error(\"Error signing in with Google\", error);\r\n            }\r\n        }}\r\n        >\r\n          Sign In with Google\r\n        </button>\r\n        <p className=\"my-3\">\r\n          Already have an account?{\" \"}\r\n          <Link to=\"/\" className=\"text-blue-500 hover:text-blue-600\">\r\n            Sign in here\r\n          </Link>{\" \"}\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\nexport default SignUp;","import React, { useState } from \"react\";\r\nimport { pemAuth } from \"../../../firebase/config\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst PasswordReset = () => {//Component for reseting password\r\n  const [email, setEmail] = useState(\"\");\r\n  const [emailHasBeenSent, setEmailHasBeenSent] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  const onChangeHandler = event => {\r\n    const { name, value } = event.currentTarget;\r\n\r\n    if (name === \"userEmail\") {\r\n      setEmail(value);\r\n    }\r\n  };\r\n\r\n  const sendResetEmail = event => {\r\n    event.preventDefault();\r\n    pemAuth\r\n      .sendPasswordResetEmail(email)\r\n      .then(() => {\r\n          setEmailHasBeenSent(true);\r\n        setTimeout(() => {setEmailHasBeenSent(false)}, 3000);\r\n      })\r\n      .catch(() => {\r\n        setError(\"Error resetting password\");\r\n      });\r\n  };\r\n  return (\r\n    <div className=\"row justify-content-center\">\r\n      <h1 className=\"text-xl text-center font-bold mb-3\">\r\n        Reset your Password\r\n      </h1>\r\n      <div className=\"col-sm-7\">\r\n        <form action=\"\">\r\n          {emailHasBeenSent && (\r\n            <div className=\"text-danger mb-3\">\r\n              An email has been sent to you!\r\n            </div>\r\n          )}\r\n          {error !== null && (\r\n            <div className=\"text-danger mb-3\">\r\n              {error}\r\n            </div>\r\n          )}\r\n                  <div class=\"form-floating\">\r\n          \r\n          <input\r\n            type=\"email\"\r\n            name=\"userEmail\"\r\n            id=\"userEmail\"\r\n            value={email}\r\n            placeholder=\"Input your email\"\r\n            onChange={onChangeHandler}\r\n            className=\"form-control\"\r\n          />\r\n          <label htmlFor=\"userEmail\" className=\"block\">\r\n            Email:\r\n          </label>\r\n          </div>\r\n          <button\r\n            className=\"btn btn-outline-info my-3\"\r\n            onClick={event => {\r\n              sendResetEmail(event);\r\n            }}\r\n          >\r\n            Send me a reset link\r\n          </button>\r\n        </form>\r\n\r\n        <Link\r\n          to=\"/\"\r\n          className=\"my-2 text-blue-700 hover:text-blue-800 text-center block\"\r\n        >\r\n          &larr; back to sign in page\r\n        </Link>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PasswordReset;","import { useState, useEffect } from 'react';\r\nimport { pemStorage } from './config';\r\n\r\n\r\nconst useStorage = (file ) => {//Connect to firebase storage for storing images\r\n  const [progress, setProgress] = useState(0);\r\n  const [error, setError] = useState(null);\r\n  const [url, setUrl] = useState(null);\r\n\r\n\r\n  useEffect(() => {\r\n    // references\r\n    const storageRef = pemStorage.ref(file.name);\r\n    \r\n    storageRef.put(file).on('state_changed', (snap) => {\r\n      let percentage = (snap.bytesTransferred / snap.totalBytes) * 100;\r\n      setProgress(percentage);\r\n    }, (err) => {\r\n      setError(err);\r\n    }, async () => {\r\n      const url = await storageRef.getDownloadURL();\r\n      setUrl(url);\r\n    });\r\n  }, [file]);\r\n\r\n  return { progress, url, error };\r\n}\r\n\r\nexport default useStorage;","import React, { useCallback, useEffect } from 'react';\r\nimport useStorage from '../../firebase/useStorage';\r\n\r\n//Component for showing progressbar when uploading images in a scenario\r\nconst ProgressBar = ({ file, setFile, dceId, scNr, setUrl }) => {\r\n  const { progress, url } = useStorage(file, dceId, scNr);\r\n\r\n// useCallback to enable use of proper dependencies\r\nconst creatUrl = \r\nuseCallback ((url)=>{\r\n  setUrl(url);\r\n},[setUrl])\r\n\r\n\r\n  //set file and url when url (from storage) changes \r\n  useEffect(() => {\r\n    if (url) {\r\n      setFile(null);\r\n      creatUrl(url);\r\n    }\r\n  }, [url, setFile, creatUrl]);\r\n\r\n\r\n    //Html to show in browser\r\n  return (\r\n    <div className=\"progress-bar\"\r\n      style={{ width: progress + '%' }}\r\n    ></div>\r\n  );\r\n} \r\n\r\nexport default ProgressBar;","import React, { useState } from 'react';\r\nimport ProgressBar from '../view/ProgressBar';\r\n\r\nconst UploadForm = ({ dceId, scNr, setUrl }) => { //Component for uploading image\r\n  const [file, setFile] = useState(null);\r\n  const [error, setError] = useState(null);\r\n\r\n  const types = ['image/png', 'image/jpeg'];\r\n\r\n  //handle selected file\r\n  const handleChange = (e) => {\r\n    let selected = e.target.files[0];\r\n    if (selected && types.includes(selected.type)) {\r\n      setFile(selected);\r\n      setError('');\r\n    } else {\r\n      setFile(null);\r\n      setError('Please select an image file (png or jpg)');\r\n    }\r\n  };\r\n\r\n  //Html to show in browser\r\n  return (\r\n    <div>\r\n      <label>\r\n        <input type=\"file\" style={{height: 0, width: 0}} onChange={handleChange} />\r\n        <span className=\"btn btn-sm btn-outline-info mb-3\">Upload image</span>\r\n      </label>\r\n      <div className=\"output\">\r\n        { error && <div className=\"error\">{ error }</div>}\r\n        { file && <div>{ file.name }</div> }\r\n        { file && <ProgressBar file={file} setFile={setFile} dceId={dceId} scNr={scNr} setUrl={setUrl}/> }\r\n      </div>\r\n    </div>\r\n      );\r\n}\r\n\r\nexport default UploadForm;","import Select from \"react-select\";\r\nimport { useEffect, useState } from \"react\";\r\nimport UploadForm from \"../controller/UploadForm\";\r\n\r\n\r\nconst useScenarioDetailsHtml = (currentDce, dceId, currentSc, setCurrentSc, scProps,  handleChosen, setChosen, handleSave, handleCreateAlt, handleEntry, chosen) => {\r\n   // creates html for formsfields and buttons for the NewScenario component\r\n\r\n// const {dceId} = dceProps;\r\nconst {scNr,  setIsSaved, isSaved} = scProps;\r\n// const {handleChosen, handleSave, handleCreateAlt} = handleProps;\r\nconst [scenarioHtml, setScenarioHtml] = useState([]);\r\n\r\n// set url for the image and save to chosenList\r\nconst setUrl = (url)=>{\r\n    const tempSc = {...currentSc};\r\n    tempSc[\"scImg\"]=url;\r\n    setCurrentSc(tempSc);\r\n    // const chosenList = [...chosen];\r\n    // chosenList[0][\"data\"][\"scImg\"]= url;\r\n    // setChosen(chosenList);\r\n    setIsSaved(false)\r\n}\r\n\r\nuseEffect(()=>{\r\n    console.log(\"useScDtl triggered\")\r\nif(Object.keys(currentSc).length>0){\r\n    let tempHtml = [];\r\n    tempHtml.push(<>\r\n        {currentSc.id&&<div>\r\n        {currentDce&&currentDce.grouped&&<h5>Paired with scenario nr: {currentSc.altnr}</h5>}\r\n        <div key=\"form-row\" className=\"form-row\" > \r\n        <h6>Features</h6>\r\n        <div className=\"row\">\r\n            {console.log(\"inside features, fValues are:..\"+JSON.stringify(currentSc.fValues))}\r\n      {currentSc.fValues&&currentDce.features&&currentDce.features.map((feature,i) =>{\r\n      let options =[{label: feature.featureValue1, value: feature.featureValue1},\r\n        {label: feature.featureValue2, value: feature.featureValue2}];\r\n            return (\r\n           <div key={i} className=\"col-md-4  mb-3\"> <label htmlFor={i} className=\"col-form-label\">{feature.featureName}</label>\r\n            <Select options={options} key={currentSc.id+i} placeholder={currentSc.fValues[feature.featureName]||\"Select..\"} defaultValue={currentSc.fValues[feature.featureName]} isDisabled={currentSc.altSc} \r\n             onChange={(option)=>handleChosen(option.value, feature.featureName)} id={i}/>\r\n            </div>\r\n            )\r\n        })}\r\n        </div>\r\n        </div>\r\n        <form id=\"textForm\">\r\n        <div>\r\n        <h6>Scenario text</h6>\r\n        <textarea className=\"form-control form-control-sm mb-3\" name=\"scText\" value={currentSc.scText} placeholder=\"Enter scenario text\" id=\"scText\" onChange={e=>handleEntry(e)}></textarea>\r\n         </div>\r\n                               \r\n         <div>\r\n             <h6>Scenario explanation</h6>\r\n             <textarea className=\"form-control form-control-sm mb-3\" type=\"text\" name=\"scExpl\" value={currentSc.scExpl} placeholder=\"Enter additional explanatory text\" id=\"scExpl\" onChange={e=>handleEntry(e)}></textarea>\r\n\r\n         </div>\r\n         <h6>Scenario image link</h6>\r\n               <UploadForm dceId={dceId} scNr={scNr} setUrl={setUrl} />\r\n               {currentSc.scImg&&<img src={currentSc.scImg} className='scImage' alt=\"scenario\"/>}\r\n               {currentDce&&currentDce.grouped&&!currentSc.altnr&&<input className=\"btn  btn-outline-success my-3\" type=\"button\" onClick={e=>handleCreateAlt(e)} value=\"Save & Create pair\"></input>}\r\n               {(currentSc.altnr||!currentDce.grouped)&&<input className=\"btn  btn-outline-success my-3\" onClick={(e)=>handleSave(e)} value=\"Save\"></input>}\r\n               </form>\r\n               {isSaved&&<div className={isSaved}>Scenario has been saved</div>}\r\n         </div>\r\n         }\r\n         </>\r\n        )\r\n        setScenarioHtml(tempHtml);\r\n         return   \r\n}    \r\n        },[currentDce, currentSc, isSaved])\r\n        \r\n        return {scenarioHtml}\r\n            \r\n        }\r\n        \r\n\r\n \r\nexport default useScenarioDetailsHtml;","import React, { useContext } from \"react\";\r\nimport { UserContext } from \"../../providers/UserProvider\";\r\nimport { pemFirestore } from \"../../firebase/config\";\r\nimport useScenarioDetailsHtml from \"../view/useScenarioDetailsHtml\";\r\n\r\nexport default function ScenarioDetails({currentDce, dceId, currentSc, setCurrentSc, scList, scProps, chosen, setChosen}) {\r\n//Component for adding a new scenario\r\n\r\n    const {scNr, setScNr,  handleAddScenario, setIsSaved, isSaved} = scProps;\r\n    const user = useContext(UserContext);\r\n    const uid = user.uid;\r\n\r\n\r\n    //Handles choices from dropdown fValues\r\n    const handleChosen = (value, name)=>{\r\n        const tempSc = {...currentSc};\r\n        tempSc.fValues[name]=value;\r\n        setCurrentSc(tempSc);\r\n        setIsSaved(false);\r\n    }\r\n\r\n    //Handles entries from input fields\r\n    const handleEntry = (e)=>{\r\n        e.preventDefault();\r\n        const {name, value} = e.target;\r\n        const tempSc = {...currentSc};\r\n        tempSc[name]=value;\r\n        setCurrentSc(tempSc);\r\n        setIsSaved(false);\r\n    }\r\n\r\n//Gets features for the other scenario in a pair\r\nconst getAltFValues = (fValueList) =>{\r\n    const groupFeat = currentDce.groupFeature;\r\n    const groupFeatValue = fValueList[groupFeat];\r\n    let newFeatValue;\r\n    currentDce.features.forEach((feature) =>{\r\n        if (feature.featureName===groupFeat){\r\n            if(feature.featureValue1===groupFeatValue){\r\n                newFeatValue = feature.featureValue2;}\r\n            if(feature.featureValue2===groupFeatValue){\r\n                newFeatValue = feature.featureValue1;}\r\n        }\r\n    })\r\n    let altFValueList = {...fValueList};\r\n    altFValueList[groupFeat] = newFeatValue;\r\n    return altFValueList\r\n}\r\n\r\n\r\n//Saves via handleSave and creates the alternative scenario in case of grouped features\r\nconst handleCreateAlt = (e)=>{\r\n    if(fieldsComplete()){\r\n        console.log(\"fValues of currentSc: \"+JSON.stringify(currentSc.fValues))\r\n        console.log(\"currentSc.id: \"+currentSc.id)\r\n        let altFValues = getAltFValues(currentSc.fValues);\r\n        console.log(\"altFValues after get: \"+JSON.stringify(altFValues))\r\n    handleAddScenario(altFValues, currentSc.id)\r\n    .then((newId)=>{\r\n        currentSc[\"altnr\"] = newId;\r\n        saveScenario(currentSc);\r\n    })\r\n    }\r\n}\r\n\r\n//Checks if all required field have an entry\r\nconst fieldsComplete = ()=>{\r\n    let textOrImageComplete = false;\r\n    let featuresComplete = false;\r\n    if (currentSc[\"scText\"].length!==0 || currentSc[\"scImg\"].length!==0){\r\n        textOrImageComplete=true}\r\n    else{\r\n    alert(\"Fill in the Scenario Text or upload a Scenario Image, or do both\") \r\n    }\r\n    featuresComplete= !currentDce.features.some(feature=>{\r\n        if(currentSc[\"fValues\"][feature.featureName].length===0){\r\n            alert(\"Select a value for every feature in the scenario\");\r\n             \r\n        } return (currentSc[\"fValues\"][feature.featureName].length===0);\r\n    })\r\nreturn textOrImageComplete&&featuresComplete;    \r\n}\r\n\r\n //Checks if all required field have an entry and saves to Firestore if ok.\r\n //Else alert with error message\r\nconst handleSave = async (e)=>{\r\ne.preventDefault();\r\nif(fieldsComplete()){\r\n    saveScenario(currentSc);\r\n    const altnr = currentSc[\"altnr\"];\r\n    console.log(\"altnr is: \"+altnr)\r\n    console.log(\"fValues i currentSc: \"+JSON.stringify(currentSc[\"fValues\"]))\r\n    const altFValueList = getAltFValues(currentSc[\"fValues\"]);\r\n    console.log(\"altFValuesList in handlesave: \"+JSON.stringify(altFValueList))\r\n    if (altnr){ // if these is an altnr, there is a pair that needs to be updated, fValues only\r\n        let scAltIndex = currentDce.scList.findIndex(sc=>sc.id===altnr);\r\n        console.log(\"altIndex is: \"+scAltIndex)\r\n        console.log(\"altSc is: \"+JSON.stringify(currentDce.scList[scAltIndex]))\r\n        currentDce.scList[scAltIndex][\"fValues\"] = altFValueList; //update fValueList in paired scenario in scList\r\n        let response = pemFirestore.collection('users').doc(uid).collection('DceList').doc(dceId).collection('Scenarios');\r\n            response.doc(altnr.toString()).update({\r\n                \"fValues\": altFValueList\r\n            });//update fValueList in paired scenario in database\r\n    }\r\nsetIsSaved(true);\r\n}\r\n}\r\n\r\nconst saveScenario = (scenario)=>{\r\n    let scIndex = currentDce.scList.findIndex(sc=>sc.id===scenario.id);\r\n    console.log(\"scIndex is: \"+scIndex);\r\n    currentDce.scList[scIndex] = scenario; //update scList with current scenario (save scenario)\r\n    let response = pemFirestore.collection('users').doc(uid).collection('DceList').doc(dceId).collection('Scenarios');\r\n    response.doc(currentSc.id.toString()).set(Object.assign({},scenario));//save scenario to database\r\n}\r\n\r\n\r\n//gets html for this page\r\nconst {scenarioHtml} = useScenarioDetailsHtml( currentDce, dceId, currentSc, setCurrentSc, scProps,  handleChosen, setChosen, handleSave, handleCreateAlt, handleEntry, chosen );\r\n\r\n//Html to show in browser\r\n    return (\r\n        <div key=\"1\">\r\n         {scenarioHtml}\r\n        </div>\r\n    )\r\n}\r\n","    class Scenario {//object representing a scenario. \r\n    constructor(id, scText, scExpl, scImg, fValues, altSc, altnr){\r\n        this.id = id;\r\n        this.scText = scText;//text that is displayed as part of a scenario. Either a scText or a scImg must be entered before running a dce.\r\n        this.scExpl = scExpl;//text that serves as addition explanation in a scenario\r\n        this.scImg = scImg;//textfield representing a link to an uploaded image.\r\n        this.fValues = fValues;//list of feature values. All features of the dce must have a value here before dce can be run.\r\n        this.altSc = altSc;//boolean representing whether this scenario is the first one of a pair, or the alternative (the second) scenario\r\n        this.altnr = altnr; //number that matches the id of the scenario to which it is paired\r\n    }\r\n}\r\nexport default Scenario","import React, { useContext, useState, useEffect } from \"react\";\r\nimport { UserContext } from \"../../providers/UserProvider\";\r\nimport { pemFirestore } from \"../../firebase/config\";\r\nimport ScenarioDetails from \"./ScenarioDetails\";\r\nimport { Link } from \"react-router-dom\";\r\nimport useGetScList from \"../model/useGetScList\";\r\nimport Scenario from \"../model/scenario\";\r\n\r\n\r\nexport default function ScenarioListPage({currentDce, dceId, currentSc, setCurrentSc}) {//Creates list of scenario's incl frame for details\r\n\r\n    const user = useContext(UserContext);\r\n    const uid = user.uid;\r\n    const [chosen, setChosen] = useState([{nr: 0}]);\r\n    const [scListChanged, setScListChanged] = useState(''); // requires unique content each time list needs refresh\r\n    const [scNr, setScNr] = useState(\"\");\r\n    const [isSaved, setIsSaved] = useState(false);\r\n    // currentDce.scList = useGetScList(uid, dceId, scListChanged)\r\n\r\n\r\n    //show scenario list when dceId is changed\r\n    useEffect(() => {\r\n            setChosen([{}]);\r\n            setScNr(null);\r\n            setIsSaved(false)\r\n      }, [dceId])\r\n\r\n// Adds scenario with id which is first available unique number \r\n// Features are taken from dce\r\n    const handleAddScenario = async( altFValues, altnr) =>{\r\n        if(dceId){\r\n            let fValues ={};\r\n            currentDce.features.forEach(feature=>{\r\n                fValues[feature.featureName]=\"\";\r\n            })\r\n        let seqNr=1; // set seqNr to 1 and check if it is available, otherwise raise by 1 and repeat\r\n        currentDce.scList.forEach(sc => {\r\n            if(sc.id!==seqNr){\r\n                return;\r\n            }\r\n            else {\r\n                seqNr +=1;\r\n            }\r\n            });\r\n            let altSc = false;\r\n            if (altnr){altSc = true; fValues= {...altFValues}} // if altnr was specified, the new sc will be the pair of this alt sc\r\n            console.log(\"altFValues: \"+JSON.stringify(altFValues))\r\n            let newScDetails = {id: seqNr, altnr: altnr, altSc: altSc, fValues, scText: \"\", scImg: \"\", scExpl: \"\"}\r\n            let response2 = pemFirestore.collection('users').doc(uid).collection('DceList').doc(dceId).collection('Scenarios');\r\n            console.log(\"newScDetails: \"+JSON.stringify(newScDetails));\r\n            response2.doc(seqNr.toString()).set(newScDetails);\r\n            let newSc = new Scenario(seqNr, \"\", \"\", \"\", fValues, altSc, altnr||null);\r\n            console.log(\"newSc: \"+JSON.stringify(newSc));\r\n            currentDce.scList.push(newSc);\r\n            setIsSaved(false);\r\n            setCurrentSc(newSc);\r\n            setScListChanged(seqNr.toString()+'created');\r\n      return newSc.id;\r\n    }\r\n}\r\n\r\n//delete scenario from database and refresh list\r\nconst deleteSc = (sc) => {\r\n    let scId = sc.id;\r\n    console.log(\"scId to be deleted: \"+JSON.stringify(scId))\r\n    let scIndex = currentDce.scList.findIndex(sc=>sc.id===scId);\r\n    let altScNr = currentDce.scList[scIndex].altnr\r\n    console.log(\"scIndx \"+scIndex)\r\n    currentDce.scList.splice(scIndex, 1); //delete scenario from scList\r\n    console.log(\"scList: \"+JSON.stringify(currentDce.scList))\r\n    pemFirestore.collection('users').doc(uid).collection('DceList').doc(dceId).collection('Scenarios').doc(scId.toString()).delete()\r\n    .then(() => {\r\n        console.log(\"Scenario with ID \"+scId+ \"  successfully deleted!\");\r\n        if (scId===currentSc.id){ //if deleted sc was shown on screen, clear it\r\n            setCurrentSc({dummy: currentSc.id});\r\n        }\r\n        setScListChanged(scId+'deleted'); //set trigger to refresh list of scenario's\r\n        setIsSaved(false);\r\n    }).catch((error) => {\r\n        console.error(\"Error removing document: \", error);\r\n    });\r\n    if (altScNr){ // if there is a pair scenario coupled to this scenario (altScNr), delete that too\r\n        let altScIndex = currentDce.scList.findIndex(sc=>sc.id===altScNr);\r\n        altScIndex&&currentDce.scList.splice(altScIndex, 1); //delete pair scenario from scList\r\n        pemFirestore.collection('users').doc(uid).collection('DceList').doc(dceId).collection('Scenarios').doc(altScNr.toString()).delete().then(() => {\r\n            console.log(\"Alt scenario with ID \"+altScNr.toString()+ \"  successfully deleted!\");\r\n            setScListChanged(altScNr+'deleted'); //set trigger to refresh list of scenario's\r\n        }).catch((error) => {\r\n            console.error(\"Error removing document: \", error);\r\n        });}\r\n}\r\n\r\n\r\nconst scProps = {scNr, setScNr, handleAddScenario,  setIsSaved, isSaved}\r\n\r\n\r\n    //html to show in browser\r\n    return (\r\n        <div>\r\n            <h4><u>Details</u> for <b> {currentDce&&currentDce.name}</b>{currentSc.id&&<span> - Scenario nr. {currentSc.id}</span>}{!currentSc.id&&<span> - Select a scenario nr.</span>}</h4>\r\n            <div className=\"\">\r\n            <h6>{currentDce&&<span> <Link to={{pathname:\"/app/\"+uid+\"/\"+ currentDce.id}}>\r\n                    <button className=\"btn btn-sm btn-outline-info mx-1\" ><i className=\"material-icons mat-icon mt-1\">play_circle_outline</i></button>\r\n                    </Link></span>}\r\n                    {currentDce&&<span> Play this DCE</span>} {currentDce&&<span> <hr className=\"ruler detailsRuler\"/> <button className=\"btn btn-sm btn-outline-info\" onClick={() => {let clipText = window.location.href+\"app/\"+uid+\"/\"+ currentDce.id; navigator.clipboard.writeText(clipText)}}>Copy DCE link </button></span>} </h6></div>\r\n           <div className=\"pb-4\"><h6> {currentDce&&currentDce.grouped&&<span>Group feature: {currentDce&&currentDce.groupFeature}</span>} {<span> <hr className=\"ruler detailsRuler\"/> Questions in DCE: {currentDce&&currentDce.nrQuestions}</span>}</h6>\r\n           </div>\r\n            <div className=\"row\">\r\n   <div className=\"scenarioList col col-6 col-md-3 col-sm-5\">\r\n    <h5>Scenario's</h5>\r\n    <ul>\r\n    <li key=\"header\" className=\"listRuler mb-1\">Nr.  <hr className=\"ruler\"/> Edit <hr className=\"rulerSm\"/>&nbsp;Delete </li>\r\n                {currentDce.scList && currentDce.scList.map((sc,i)=>{\r\n                return(\r\n                    <div  key={i} className=\"\">\r\n                    <h5 className=\"mt-3\"><li className=\"listRuler mb-1\" data-id={sc.id}><button className=\"btn btn-sm btn-outline-info\" onClick={()=>{setCurrentSc({dummy:\"clear\"+i});setCurrentSc(sc)}}>{sc.id}</button>\r\n                    <hr className=\"ruler\"/> \r\n                    <button className=\"btn  btn-outline-warning btn-sm mx-2\" onClick={()=>{setCurrentSc({dummy:\"clear\"+i});setCurrentSc(sc)}} > <i className=\"material-icons mat-icon\">edit</i></button>\r\n                    <hr className=\"rulerSm\"/>\r\n                    <button className=\"btn  btn-outline-success btn-sm mx-2\" onClick={() => { if (window.confirm('Are you sure you wish to delete this scenario?'))deleteSc(sc) }} > <i className=\"material-icons mat-icon\">delete_forever</i></button></li></h5>\r\n                    </div>\r\n                )\r\n                })\r\n            }\r\n           {currentDce&&<li className=\"mb-2\"><button className=\"btn btn-sm btn-outline-info\" onClick={()=>{handleAddScenario(null, null)}} >Add scenario</button></li>}\r\n    </ul>\r\n    </div>\r\n    \r\n    <div className=\"col\">\r\n        <ScenarioDetails currentDce={currentDce} dceId={dceId} currentSc={currentSc} setCurrentSc={setCurrentSc} scList={currentDce.scList} scProps={scProps} chosen={chosen} setChosen={setChosen}/>\r\n    </div>\r\n    </div>\r\n        </div>\r\n    )\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { pemFirestore } from \"../../firebase/config\";\r\nimport { useParams} from \"react-router-dom\";\r\n\r\n\r\nexport default function NewAspect({addAspect}) {\r\n  //Form for creating a new aspect\r\n\r\n    const [aspectName, setAspectName] = useState(['name']);\r\n    const [aspectDescr, setAspectDescr] = useState(['descr']);\r\n    const {userId, dceId } = useParams();\r\n\r\n \r\n  //Save aspect if all fields are filled in\r\n    const saveAspect = (e)=>{\r\n        e.preventDefault();\r\n        addAspect( aspectName[0], aspectDescr[0]);        \r\n  }\r\n\r\n    // handle name input change\r\n    const handleNameInputChange = (e) => {\r\n      const nameList = handleInputA(e, aspectName)\r\n        setAspectName(nameList);\r\n    }\r\n\r\n    // handle descr input change\r\n    const handleDescrInputChange = (e) => {\r\n      const descrList = handleInputA(e, aspectDescr);\r\n      setAspectDescr(descrList);\r\n  }\r\n\r\n  const handleInputA = (e, currentName) => {\r\n    const name = e.target.value;\r\n    const nameList = [...currentName];\r\n    nameList[0]=name;\r\n    return ( \r\n        nameList\r\n     );\r\n}\r\n \r\n  //html to show in browser\r\n  return (\r\n        <div>\r\n            <form className=\"form-inline\">\r\n                <div className=\"form-floating\">\r\n                    <input type=\"text\" className=\"form-control\" name=\"aspectName\"  placeholder=\"Aspect name\" id=\"aspectName\" \r\n                    required onChange={handleNameInputChange}></input>\r\n                    <label htmlFor=\"aspectName\" className=\"block\">Name: </label>\r\n                    </div>\r\n                    <div className=\"form-floating\">\r\n                    <textarea type=\"text\" rows=\"7\" className=\"form-control\" name=\"aspectDescr\"  placeholder=\"Description\" id=\"aspectDescr\" \r\n                    required onChange={handleDescrInputChange}></textarea>\r\n                    <label htmlFor=\"aspectDescr\" className=\"block\">Description: </label>\r\n                    </div>\r\n      <button className=\"btn btn-sm btn-outline-success\" onClick={saveAspect} >Save aspect</button>\r\n          </form>\r\n        </div>\r\n    )\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\n\r\nexport default function List({currentDce, refreshListFlag, setCurrentAsp, deleteAspect}) {\r\nconst [listHtml, setListHtml] = useState([]);\r\n\r\n    useEffect(()=>{\r\n        let tempList = [];\r\n        currentDce.aspectList&& currentDce.aspectList.map((aspect, i)=>{\r\ntempList.push(<div className=\"\">\r\n<h6 className=\"mt-3\">\r\n    <li  key={i} className=\"listRuler mb-1\"  data-id={aspect.id}> <b>{aspect.name}</b>\r\n        <hr className=\"ruler\"/> \r\n        <button className=\"btn btn-sm btn-outline-warning\" onClick={()=>{setCurrentAsp({dummy:\"clear\"+i});setCurrentAsp(aspect)}}><i className=\"material-icons mat-icon\">edit</i></button>\r\n        <hr className=\"rulerSm\"/>\r\n        <button className=\"btn  btn-outline-success btn-sm mx-2\" onClick={()=>{deleteAspect(aspect)}}><i className=\"material-icons mat-icon\">delete_forever</i></button>\r\n    </li>\r\n</h6>\r\n</div>\r\n)\r\n        })\r\n setListHtml(tempList);\r\n    },[currentDce, refreshListFlag])\r\n\r\n    //Component for displaying aspect list\r\n    return (\r\n        <div>\r\n            <div className=\" col-auto \">\r\n                <h4><u>Aspect list</u></h4>\r\n                <ul>\r\n                    {listHtml}\r\n                </ul>\r\n            </div>\r\n\r\n        </div>\r\n    )\r\n}\r\n","class AgeGender {//object representing age and gender of participant that can be entered at start of dce\r\n    constructor(age, gender){\r\n        this.age = age;\r\n        this.gender = gender;\r\n    }\r\n}\r\nexport default AgeGender","class Combi {//object representing a combination of filters. Filters exist of list of filters and the groupvalue\r\n    constructor(nr, groupValue, filterList){\r\n        this.nr = nr;\r\n        this.groupValue = groupValue;\r\n        this.filterList = filterList;//List of filter objects. Combining more filters in this list will narrow the result.\r\n    }\r\n}\r\nexport default Combi","class Aspect {//object representing an aspect. An aspect is used as a filterfunction on the results.\r\n    constructor(id, name, descr, ageGender, combiList) {\r\n        this.id = id;\r\n        this.name = name;\r\n        this.descr = descr;\r\n        this.ageGender = ageGender;//filtering can also be done on age and gender of the participants via the ageGender object\r\n        this.combiList = combiList;//the combiList is a list(array) of filters that are combined with eachother (results added)\r\n    }\r\n}\r\nexport default Aspect","class Filter {//object representing a filter with a name and value\r\n    constructor(fName, fValue){\r\n        this.fName = fName;\r\n        this.fValue = fValue;\r\n    }\r\n}\r\nexport default Filter","import React, {useState} from 'react';\r\nimport { useLocation} from \"react-router-dom\";\r\nimport useAspectEditHtml from './useAspectEditHtml';\r\nimport Filter from '../model/filter'\r\n\r\nexport default function AspectEditPage({currentDce, currentAsp, showAspectsFlag, setCurrentDce, setCurrentAsp, filterSaved, setFilterSaved, aspectProps, editFunctions, editProps}) {\r\n//Component for editing an aspect\r\n\r\n    // const [filterSaved, setFilterSaved] = useState(false)\r\n    const location = useLocation();\r\n    const dceFeatures = location.dceFeatures;\r\n    const groupFeature = location.groupFeature;\r\n    const {saveFilters, setAgeGenderValues, setGroupValues, setChosenFeatures, handleAddCombi, handleDeleteCombi} = editFunctions\r\n    const {aspectId, aspectFilters} = aspectProps;\r\n    const {groupValues, chosenFeatures, ageGenderValues } = editProps;\r\n\r\n    // if(groupFeature===undefined){//if groupfeature is undefined, go to main page\r\n    //     history.push('/');\r\n    // }\r\n   \r\n    //Handles feature name from form\r\n    const handleFName = (fName, cIndex, index)=>{\r\n        // const chosenList = [...chosenFeatures];\r\n        // chosenList[cIndex][0]={fName: fName};\r\n        const tempCombiList = [...currentAsp.combiList];\r\n        tempCombiList[cIndex].filterList[index][\"fName\"]= fName;\r\n        setCurrentAsp(currentAsp=>({...currentAsp, combiList: tempCombiList}));\r\n        // const tempSavedList = [...filterSaved];\r\n        // tempSavedList[cIndex]=false;\r\n        // setChosenFeatures(chosenList);\r\n        setFilterSaved(false);\r\n    }\r\n\r\n    //Handles feature value from form\r\n    const handleFValue = (fValue, cIndex, index) =>{\r\n        // const chosenList = [...chosenFeatures];\r\n        // chosenList[cIndex][0]['fValue'] = fValue;\r\n        const tempCombiList = [...currentAsp.combiList];\r\n        tempCombiList[cIndex].filterList[index][\"fValue\"]= fValue;\r\n        setCurrentAsp(currentAsp=>({...currentAsp, combiList: tempCombiList}));\r\n        // const tempSavedList = [...filterSaved];\r\n        // tempSavedList[cIndex]=false;\r\n        // setChosenFeatures(chosenList);\r\n        setFilterSaved(false);\r\n    }\r\n    \r\n    //Handles value for group feature selected in form\r\n    const handleGroupValue = (value, cIndex)=>{\r\n        // let tempGValues = [...groupValues]\r\n        // tempGValues[cIndex]=value;\r\n        const tempCombiList = [...currentAsp.combiList];\r\n        tempCombiList[cIndex].groupValue=value;\r\n        setCurrentAsp(currentAsp=>({...currentAsp, combiList: tempCombiList}));\r\n        // const tempSavedList = [...filterSaved];\r\n        // tempSavedList[cIndex]=false;\r\n        // setGroupValues(tempGValues);\r\n        setFilterSaved(false);\r\n        }\r\n \r\n        //handles age and gender values as selected\r\n        const handleAgeGenderValue = (name, value, aspId) =>{\r\n            let aspIndex = currentDce.aspectList.findIndex(asp=>asp.id===aspId);\r\n            const tempAspectList = [...currentDce.aspectList];\r\n            const tempAspect = {...tempAspectList[aspIndex]};\r\n            const tempAgeGender = {...tempAspect.ageGender};\r\n            tempAgeGender[name] = value;\r\n            tempAspect.ageGender=tempAgeGender;\r\n            tempAspectList[aspIndex]=tempAspect;\r\n            setCurrentDce(currentDce=>({...currentDce, aspectList: tempAspectList}));\r\n            setCurrentAsp(currentAsp=>({...currentAsp, ageGender: tempAgeGender}))\r\n            setFilterSaved(false);\r\n        }\r\n\r\n    // //Checks if all required fields are filled in and then saves to database.\r\n    // const handleSave = (e)=>{\r\n    //     e.preventDefault();\r\n    //     const cIndex = e.target.dataset.id;\r\n    //     let tempList = [...aspectFilters[cIndex],...chosenFeatures[cIndex]];\r\n    //     let tempChosen = [...chosenFeatures];\r\n    //     if(tempChosen[cIndex][0]&&tempChosen[cIndex][0]['fName'].length>0&&!tempChosen[cIndex][0]['fValue']){\r\n    //         alert(\"Select a value for the filter feature before saving\")\r\n    //     }else{\r\n    //     tempChosen[cIndex] = [];\r\n    //     if (groupValues[cIndex].length===0){\r\n    //         alert(\"Select a value for the Group feature before saving\")\r\n    //         } else{\r\n    //         saveFilters(cIndex, tempList, tempChosen, groupValues, ageGenderValues);\r\n    //         const tempSavedList = [...filterSaved];\r\n    //         tempSavedList[cIndex]=true;\r\n    //         setFilterSaved(tempSavedList);\r\n    //         }\r\n    //     }\r\n    // }\r\n//Deletes a filter\r\n    const handleDelete = (e, index, cIndex)=>{\r\n        e.preventDefault();\r\n        const tempCombiList = [...currentAsp.combiList];\r\n        tempCombiList[cIndex].filterList.splice(index, 1);\r\n        setCurrentAsp(currentAsp=>({...currentAsp, combiList: tempCombiList}));\r\n        setFilterSaved(false);\r\n      }\r\n\r\n    const handleAddFilter = (e, cIndex)=>{\r\n        e.preventDefault();\r\n        const tempCombiList = [...currentAsp.combiList];\r\n        tempCombiList[cIndex].filterList.push(new Filter(\"\",\"\"));\r\n        setCurrentAsp(currentAsp=>({...currentAsp, combiList: tempCombiList}));\r\n        setFilterSaved(false);\r\n    }\r\n\r\n    //Loads html for displaying aspects and edit forms\r\n    // const handleProps = {  handleSave};\r\n    const valueProps = {   groupFeature,   dceFeatures, filterSaved};\r\n    const {fromDb} = useAspectEditHtml(currentDce, currentAsp, showAspectsFlag, handleFName, handleFValue, handleGroupValue, handleAgeGenderValue, handleDelete, handleAddFilter, handleAddCombi, handleDeleteCombi, saveFilters, valueProps);  \r\n\r\n//Button for adding a combination filter button\r\nlet addCombiButton = [];\r\n   if(!currentAsp.dummy&&!Object.keys(currentAsp).length===0){\r\n       addCombiButton.push(\r\n        <button className=\"btn btn-sm btn-outline-info my-4\" onClick={handleAddCombi}>add combination feature</button>\r\n        )\r\n}\r\n\r\n//returns html to the browser\r\n    return (\r\n        <div>\r\n            <h4 className=\"mb-1\">Define aspect for <b>{currentAsp.name||\"(Select an aspect..)\"}</b></h4>\r\n            <h6 className=\"text-secondary pb-3\">Description: {currentAsp.descr}</h6>     \r\n              {!currentAsp.dummy&&fromDb}\r\n              {/* {addCombiButton} */}\r\n        </div>\r\n    )\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Select from \"react-select\";\r\n\r\n\r\nexport default function useAspectEditHtml(currentDce, currentAsp, showAspectsFlag, handleFName, handleFValue, handleGroupValue, handleAgeGenderValue, handleDelete, handleAddFilter, handleAddCombi, handleDeleteCombi, saveFilters,   filterSaved) {\r\n//create html for aspect edit screen\r\n\r\n    const [fromDb, setFromDb] = useState([]);\r\n    const helperArray = [{}];\r\n    const ageOptions = [{label: \"younger than 25 years\", value: \"young\"},{label: \"25 years or older\", value: \"old\"}];\r\n    const genderOptions = [{label: \"female\", value: \"female\"},{label: \"male\", value: \"male\"}];\r\n    const dceFeatures = currentDce.features;\r\n   \r\nuseEffect(() => {\r\n    let tempFromDB =[];\r\n    currentAsp.combiList&& currentAsp.combiList.forEach((combi, cIndex)=>{\r\n        console.log(\"combi in forEach: \"+JSON.stringify(combi))\r\n        tempFromDB.push( //add following html for each combi\r\n           <div id={cIndex}> {(cIndex!==0)&&(<h5 className=\"my-5\">\r\n           <button onClick={(e)=>handleDeleteCombi(e,cIndex)} className=\"btn  btn-outline-success btn-sm mx-2\"  > <i className=\"material-icons mat-icon\">delete_forever</i></button>\r\n           combined with: \r\n           </h5>\r\n           )}\r\n           <h5>Select value for group feature - {currentDce.groupFeature}</h5>\r\n\r\n           <label htmlFor=\"groupVal\">Group value</label>\r\n<div className=\"selectInputs mb-3\">\r\n           {currentDce.features&&helperArray.map((c,i)=>{return (<Select key={`${currentAsp.id}-grValue- ${cIndex}`} options={[{label: currentDce.features.find(x=>x.featureName===currentDce.groupFeature).featureValue1, value: currentDce.features.find(x=>x.featureName===currentDce.groupFeature).featureValue1},\r\n{label: currentDce.features.find(x=>x.featureName===currentDce.groupFeature).featureValue2, value: currentDce.features.find(x=>x.featureName===currentDce.groupFeature).featureValue2}]} placeholder={combi.groupValue|| \"Select...\"} onChange={(option) => handleGroupValue(option.value, cIndex)} />\r\n)})}   \r\n</div>\r\n          <h5>Filter features and values</h5>\r\n\r\n           </div>\r\n        )\r\n        combi.filterList&&combi.filterList.length>0&&combi.filterList.forEach((filter, index)=>{\r\n        tempFromDB.push(\r\n        <div id={index} className=\"selectInputs my-3\">\r\n            <span>\r\n            <Select key={`${currentAsp.id}-fName- ${cIndex}`} options={dceFeatures&&dceFeatures.map((feature,ind) =>{\r\n                          let optionHtml = feature.featureName;\r\n                          let isDisabled = false;\r\n                          if (feature.featureName===currentDce.groupFeature){\r\n                              isDisabled = true\r\n                          }\r\n                          return (\r\n                              {label: optionHtml, value: optionHtml, isDisabled: isDisabled}\r\n                          )\r\n                      })}\r\n                      id=\"fNames\"\r\n                      placeholder={filter.fName}\r\n                      onChange={(option) =>{console.log(\"option.value +cIndex in onChange: \"+JSON.stringify(option.value)+cIndex); handleFName(option.value, cIndex, index)}}  \r\n                      />\r\n                      </span>\r\n                       <span className=\"selectInputs pb-3\">\r\n                        {/* {combi.filterList.map((c,i)=>{return (<Select key={`${currentAsp.id+filter+combi}-fValue- }`} id=\"fValues\" \r\n                        options={[{label: dceFeatures.find(x=>x.featureName===filter[\"fName\"]).featureValue1, value: dceFeatures.find(x=>x.featureName===filter[\"fName\"]).featureValue1},\r\n                        {label: dceFeatures.find(x=>x.featureName===filter[\"fName\"]).featureValue2, value: dceFeatures.find(x=>x.featureName===filter[\"fName\"]).featureValue2}]} \r\n                        placeholder={filter.fValue||\"Enter filter value\"} onChange={(option) => handleFValue(option.value)} />\r\n                        )})} */}\r\n                        {filter.fName&&<Select options={[{label: dceFeatures.find(x=>x.featureName===filter[\"fName\"]).featureValue1, value: dceFeatures.find(x=>x.featureName===filter[\"fName\"]).featureValue1},\r\n                        {label: dceFeatures.find(x=>x.featureName===filter[\"fName\"]).featureValue2, value: dceFeatures.find(x=>x.featureName===filter[\"fName\"]).featureValue2}]} \r\n                        placeholder={filter.fValue||\"Enter filter value\"} onChange={(option) => handleFValue(option.value, cIndex, index)}/>}\r\n                    </span>\r\n\r\n            {/* <div className=\"savedFeatures my-2 mx-3 px-5 py-1 p-3 border rounded\">{filter.fName}</div><span className=\"savedFeatures mx-3 px-5 py-1 border rounded\">{filter.fValue}</span> */}\r\n            <span>\r\n               <button onClick={(e)=>handleDelete(e,index, cIndex)} className=\"btn  btn-outline-success btn-sm mx-2\"  > <i className=\"material-icons mat-icon\">delete_forever</i></button>\r\n               </span>\r\n          </div>\r\n    ) // end of fromDb pt1\r\n}) // end of combi \r\n\r\ntempFromDB.push( //html for adding filter form\r\n    <div>\r\n        <span>\r\n               <button onClick={(e)=>handleAddFilter(e, cIndex)} className=\"btn  btn-outline-success btn-sm mx-2\"  > Add filter feature</button>\r\n               </span>\r\n          {/* <span>\r\n            <form>\r\n              <label htmlFor='fNames' className=\"col-md-3 col-form-label\">Add filter feature </label>\r\n                  <div className=\"selectInputs\">\r\n                  <Select key={`${currentAsp.id}-fName- ${cIndex}`} options={dceFeatures&&dceFeatures.map((feature,ind) =>{\r\n                          let optionHtml = feature.featureName;\r\n                          let isDisabled = false;\r\n                          if (feature.featureName===groupFeature){\r\n                              isDisabled = true\r\n                          }\r\n                          return (\r\n                              {label: optionHtml, value: optionHtml, isDisabled: isDisabled}\r\n                          )\r\n                      })}\r\n                      id=\"fNames\"\r\n                      onChange={(option) =>{console.log(\"option.value +cIndex in onChange: \"+JSON.stringify(option.value)+cIndex); handleFName(option.value, cIndex)}}  />\r\n                    </div>\r\n              </form>\r\n              </span> */}\r\n              </div>\r\n              ) // end of fromDb pt2\r\n}) // end of aspect\r\ntempFromDB.push( //html for adding filter form\r\n    <div>\r\n                {(!currentAsp.dummy&&Object.keys(currentAsp).length>0)&&<button className=\"btn btn-sm btn-outline-info my-4\" onClick={handleAddCombi}>add combination feature</button>}\r\n        <span>\r\n              {dceFeatures&&<form>\r\n            \r\n                    {/* <div className=\"selectInputs pb-3\">\r\n                        {currentAsp.filterList&&currentAsp.filterList.map((c,i)=>{return (<Select key={`${currentAsp.id}-fValue- }`} id=\"fValues\" \r\n                        options={[{label: dceFeatures.find(x=>x.featureName===currentAsp.filterList[\"fName\"]).featureValue1, value: dceFeatures.find(x=>x.featureName===currentAsp.filterList[\"fName\"]).featureValue1},\r\n                        {label: dceFeatures.find(x=>x.featureName===currentAsp.filterList[\"fName\"]).featureValue2, value: dceFeatures.find(x=>x.featureName===currentAsp.filterList[\"fName\"]).featureValue2}]} \r\n                        placeholder=\"Enter filter value\" onChange={(option) => handleFValue(option.value)} />\r\n                        )})}\r\n                    </div> */}\r\n                    <div className=\"selectInputs pb-3\">\r\n                    {currentAsp.ageGender&&<label htmlFor='ageFilter' className=\"\">Optional filters for age and gender of participants </label>}\r\n                        {currentAsp.ageGender&&<Select options={ageOptions} isClearable id=\"ageFilter\" name=\"age\" placeholder={currentAsp[\"ageGender\"][\"age\"]|| \"Select age filter ...\"} onChange={(option, name)=>{let value; if(option==null){value=\"\"}else{value=option.value};handleAgeGenderValue(name.name, value, currentAsp.id)}}/>}\r\n                        {currentAsp.ageGender&&<Select options={genderOptions} isClearable id=\"genderFilter\" name=\"gender\" placeholder={currentAsp.ageGender.gender|| \"Select gender filter ...\"} onChange={(option, name)=>{let value; if(option==null){value=\"\"}else{value=option.value};handleAgeGenderValue(name.name, value,currentAsp.id)}}/>}\r\n                    </div>\r\n            </form>}\r\n        </span>\r\n\r\n        {(!currentAsp.dummy&&Object.keys(currentAsp).length>0)&&<button  className=\"btn btn-sm btn-outline-info mb-3\" onClick={saveFilters}>save all filters </button>}\r\n        {filterSaved&&<h6>Filter saved</h6>}\r\n    </div>\r\n) // end of aspect\r\n\r\n    setFromDb(tempFromDB);\r\n    return\r\n    \r\n}, [currentAsp, currentDce, showAspectsFlag])\r\n   \r\n\r\n    return {fromDb}\r\n    \r\n}\r\n","import React, {useContext, useState } from \"react\";\r\nimport { pemFirestore } from \"../../firebase/config\";\r\nimport { UserContext } from \"../../providers/UserProvider\";\r\nimport NewAspect from \"./NewAspect\";\r\nimport List from \"../view/List\";\r\nimport AgeGender from \"../model/ageGender\";\r\nimport Combi from \"../model/combi\";\r\nimport Aspect from \"../model/aspect\";\r\nimport AspectEditPage from \"../view/AspectEditPage\";\r\n\r\n\r\nexport default function AspectListPage({currentDce, dceId, currentAsp, setCurrentDce, setCurrentAsp}) {\r\n    const user = useContext(UserContext);\r\n    const userId = user.uid;\r\n    const [showAspectsFlag, setShowAspectsFlag] = useState('');\r\n    const [refreshListFlag, setRefreshListFlag] = useState('');\r\n    const [filterSaved, setFilterSaved] = useState(false)\r\n    const [chosenFeatures, setChosenFeatures] = useState([]);\r\n    const [aspectFilters, setAspectFilters] = useState([]);\r\n    const [groupValues, setGroupValues] = useState([]);\r\n    const [ageGenderValues, setAgeGenderValues] = useState([{age: \"\", gender: \"\"}]);\r\n    const [showNew, setShowNew] = useState(false);\r\n    const [aspectNameEdit, setAspectNameEdit] = useState('(Click on ICON in Aspect list)');\r\n    const [aspectDescr, setAspectDescr] = useState('');\r\n    const [aspectId, setAspectId] = useState('');\r\n\r\n\r\n\r\n\r\n//Saves all filters of all aspects of this dce to the database\r\nconst saveFilters = ()=>{\r\n    const aspectRef = pemFirestore.collection('users').doc(userId).collection('DceList').doc(dceId).collection('AspectList');\r\n   console.log(\"aspectList in SaveFilters: \"+JSON.stringify(currentDce.aspectList))\r\n    currentDce.aspectList.length>0&& currentDce.aspectList.forEach(aspect=>{\r\n        aspectRef.doc(aspect.id).update({ageGender: {age: aspect.ageGender.age, gender: aspect.ageGender.gender}});\r\n        let combiRef = aspectRef.doc(aspect.id).collection('Combis');\r\n       aspect.combiList.length>0&&(aspect.combiList.forEach(combi=>{\r\n            const {filterList, ...restOfCombi} = combi;\r\n            let dbFilterList = [];\r\n            filterList.forEach(filter=>{\r\n                let filterObj = {fName: filter.fName, fValue: filter.fValue};\r\n                dbFilterList.push(filterObj);\r\n            })\r\n            restOfCombi.filterList = dbFilterList;\r\n            console.log(\"restOfCombi is:\"+JSON.stringify(restOfCombi))\r\n            combiRef.doc(combi.nr.toString()).set(Object.assign({}, restOfCombi))\r\n            .then(()=>{\r\n                console.log('combi saved with nr '+combi.nr);\r\n            })\r\n            .catch((error)=>{\r\n                console.log('Error saving combi', error);\r\n            })\r\n        }))\r\n    })\r\n    // .then(()=>{\r\n    //     console.log(\"All filters saved\");\r\n    //     setFilterSaved(true);\r\n    // })\r\n}\r\n\r\n\r\n\r\nconst handleAddCombi = ()=>{\r\n    let newCombiNr = findFreeCombiNr();\r\n    let newCombi = new Combi(newCombiNr, \"\", []);\r\n    currentAsp.combiList.push(newCombi);\r\n    setCombi(newCombi);\r\n    setShowAspectsFlag(\"combi added\"+newCombiNr)\r\n}\r\n\r\nconst findFreeCombiNr = ()=>{\r\n    let seqNr=0;\r\n    currentAsp.combiList.sort((a,b)=>a.nr-b.nr).forEach(combi=>{\r\n        if(combi.nr!==seqNr){//if seqNr is free, use it\r\n            return seqNr;\r\n        }\r\n        else  {\r\n            seqNr +=1;//try next nr\r\n           }\r\n    })\r\n    return seqNr;\r\n}\r\n\r\n//Saves combi to database for current aspect\r\nconst setCombi = (combi)=>{ \r\n    console.log(\"user en dce en aspect ids: \"+userId+dceId+currentAsp.Id)\r\n    console.log(\"combi nr: \"+combi.nr)\r\n    pemFirestore.collection('users').doc(userId).collection('DceList').doc(dceId).collection('AspectList').doc(currentAsp.id).collection('Combis').doc(combi.nr.toString())\r\n    .set(Object.assign({}, combi))\r\n    .then(()=>{\r\n        console.log('combi added with nr '+combi.nr);\r\n    })\r\n    .catch((error)=>{\r\n        console.log('Error adding combi', error);\r\n    })\r\n}\r\n\r\n//Deletes a filter combination from the list and database\r\nconst handleDeleteCombi = (e, cIndex)=>{\r\n    currentAsp.combiList.splice(cIndex, 1);\r\n    pemFirestore.collection('users').doc(userId).collection('DceList').doc(dceId).collection('AspectList').doc(currentAsp.id).collection('Combis').doc(cIndex.toString())\r\n    .delete().then(() => {\r\n        console.log(\"Combination successfully deleted!\");\r\n        setShowAspectsFlag(\"combi deleted\"+cIndex);\r\n        // loadAspectData(aspectId);\r\n    }).catch((error) => {\r\n        console.error(\"Error removing document: \", error);\r\n    });        \r\n}\r\n\r\n//delete a aspect from database and refresh list\r\nconst deleteAspect = (aspect) => {\r\n    let aspectId =aspect.id;\r\n    let aspIndex = currentDce.aspectList.findIndex(asp=>asp.id===aspectId);\r\n    let aspectRef = pemFirestore.collection('users').doc(userId).collection('DceList').doc(dceId).collection('AspectList').doc(aspectId);\r\n    aspectRef.collection('Combis').get()\r\n    .then((docs)=>{\r\n        docs.forEach(doc=>{\r\n            aspectRef.collection('Combis').doc(doc.id).delete()//delete all subcollections in database first\r\n            .then(()=>{console.log('Combi with ID '+doc.id+ ' deleted')})\r\n        })\r\n    })\r\n    .then(()=>{\r\n        aspectRef.delete()\r\n    .then(() => {\r\n        currentDce.aspectList.splice(aspIndex, 1); //delete scenario from scList\r\n        console.log(\"Document with ID\"+aspectId+ \"  successfully deleted!\");\r\n        setRefreshListFlag(\"set flag \"+aspectId);\r\n    }).catch((error) => {\r\n        console.error(\"Error removing document: \", error);\r\n    });\r\n    if(currentAsp.id===aspectId){ //if aspectdetails of deleted aspect were shown on screen,  clear them\r\n        setCurrentAsp({dummy: currentAsp.id})    \r\n    }\r\n  })\r\n}\r\n\r\nconst addAspect = (name, descr)=>{\r\n    let aspectColl = pemFirestore.collection('users').doc(userId).collection('DceList').doc(dceId).collection('AspectList');\r\n    aspectColl.add( {aspectName: name, aspectDescr: descr, ageGender: {age:\"\", gender:\"\"}})\r\n    .then((docRef)=>{\r\n          console.log(\"Document written with ID: \", docRef.id);\r\n          aspectColl.doc(docRef.id).collection('Combis').doc('0').set({nr: 0, groupValue: \"\", filterList: []});\r\n          let newCombiList = [new Combi(0, \"\", [])];\r\n          let ageGender = new AgeGender(\"\",  \"\");\r\n          let newAspect = new Aspect(docRef.id, name, descr, ageGender, newCombiList);\r\n          currentDce.aspectList.push(newAspect);\r\n          setCurrentAsp(newAspect);\r\n          setRefreshListFlag(\"new aspect saved id \"+docRef.id);\r\n    })\r\n    .catch((error) => {\r\n        console.error(\"Error adding document: \", error);\r\n    });\r\n    showNewAspectForm();\r\n}\r\n\r\n//toggle to show or hide form for new aspect\r\n  const showNewAspectForm = ()=>{\r\n      if(showNew){setShowNew(false)}\r\n      else if(!showNew){setShowNew(true)}\r\n  }\r\n\r\n  const editFunctions = {saveFilters, setGroupValues, setAgeGenderValues, setChosenFeatures, handleAddCombi, handleDeleteCombi}\r\n  const editProps = {ageGenderValues, groupValues, chosenFeatures}\r\n  const aspectProps = {aspectId, aspectFilters}\r\n\r\n  //html to show in browser\r\n    return (\r\n    <div>   \r\n        <div className=\"row my-4\">\r\n            <div className=\"listContainer col col-12 col-sm-3\">\r\n                <List currentDce={currentDce} refreshListFlag={refreshListFlag} setCurrentAsp={setCurrentAsp} deleteAspect={deleteAspect}/>\r\n                <div className=\"row my-4\">\r\n                     <div className=\"col-auto  \">\r\n                        <h4><u>Create new Aspect</u></h4>\r\n                        <div> <button className=\"btn btn-sm btn-outline-info\" onClick={showNewAspectForm}> new Aspect</button>\r\n                        </div>\r\n                        {showNew&&<NewAspect dceId={dceId} addAspect={addAspect} setRefreshListFlag={setRefreshListFlag} showNewAspectForm={showNewAspectForm} />}\r\n                     </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"col scenarioContainer\">\r\n                <AspectEditPage currentDce={currentDce} currentAsp={currentAsp} showAspectsFlag={showAspectsFlag} setCurrentDce={setCurrentDce} setCurrentAsp={setCurrentAsp} filterSaved={filterSaved} setFilterSaved={setFilterSaved} aspectProps={aspectProps} editFunctions={editFunctions} editProps={editProps} />\r\n            </div>\r\n        </div>\r\n    </div>  \r\n  )\r\n}\r\n","import { useState, useEffect } from 'react'\r\nimport { pemFirestore } from \"../../firebase/config\";\r\nimport Dce from './dce';\r\nimport GroupedDce from './groupedDce';\r\nimport Scenario from './scenario';\r\nimport Aspect from './aspect';\r\nimport Combi from './combi';\r\nimport AgeGender from './ageGender';\r\n\r\n\r\nconst useGetDceList = (uid) => {\r\n        //React hook that returns a list of Dce objects.\r\n\r\n    const [dceList, setDceList] = useState([]);\r\n    \r\n\r\n        useEffect(()=>{//React hook that loads the list of Dce objects from db and adds it to the dceList . It is triggered by a change in the uid\r\n        pemFirestore.collection('users').doc(uid).collection('DceList').get()\r\n            .then((data)=>{\r\n            let tempDocs = [];\r\n            data.docs.forEach(doc => {\r\n                let dce;\r\n                if(doc.data().grouped){// if this dce is a 'groupedDce' create appropriate type, else create general dce\r\n                dce = new GroupedDce(  doc.id, doc.data().name, doc.data().descr, doc.data().nrQuestions, doc.data().features, doc.data().grouped, doc.data().groupFeature );\r\n                } else {\r\n                    dce = new Dce(doc.id, doc.data().name, doc.data().descr, doc.data().nrQuestions, doc.data().features, doc.data().grouped)\r\n                }\r\n                tempDocs.push(dce)//add this to the list\r\n              });\r\n            setDceList(tempDocs) ;//store dce list after all dce's are added\r\n        }).catch((err)=>{\r\n            console.log('Error with loading dce'+err);\r\n        })\r\n    },[uid])\r\n\r\n\r\n    useEffect(() => { //React hook that loads the list of Scenario objects for each dce from db and adds it to the dce . It is triggered by a change in the dceList\r\n        dceList.forEach(dce=>{\r\n            pemFirestore.collection('users').doc(uid).collection('DceList').doc(dce.id).collection('Scenarios').orderBy('id')\r\n            .get()\r\n            .then((docs)=>{\r\n            let tempDocs = [];\r\n                docs.forEach(doc => {//create a scenario object for each database entry\r\n                    let sc = new Scenario(doc.data().id, doc.data().scText, doc.data().scExpl, doc.data().scImg, doc.data().fValues, doc.data().altSc, doc.data().altnr )\r\n                    tempDocs.push(sc);//add scenario to the temp list.\r\n                });\r\n            dce.scList=tempDocs ;//store the temp list to the dce when complete\r\n            }).catch((err)=>{\r\n                console.log('Error with loading scenario document'+err);\r\n            })\r\n        })\r\n    }, [dceList])\r\n\r\n\r\n    useEffect(() => { //React hook that loads the list of Aspect objects for each dce from db and adds it to the dce . It is triggered by a change in the dceList\r\n        //For each aspect, all combi's are loaded and objects are created. \r\n        dceList.forEach(dce=>{\r\n        pemFirestore.collection('users').doc(uid).collection('DceList').doc(dce.id).collection('AspectList')\r\n        .get()\r\n        .then((aspects)=>{\r\n            let tempAspectList = [];\r\n            aspects.forEach(aspect => {//load combi's for each aspect\r\n                const aspectRef = pemFirestore.collection('users').doc(uid).collection('DceList').doc(dce.id).collection('AspectList').doc(aspect.id);\r\n                     let combiList = [];\r\n                     aspectRef.collection('Combis').get()\r\n                    .then((combis)=>{\r\n                        combis.forEach(combi=>{                              \r\n                        let combiObj = new Combi(combi.data().nr,combi.data().groupValue, combi.data().filterList);\r\n                        combiList.push(combiObj);//add combi to the list of combi's\r\n                         })\r\n                         aspect.data().ageGender&& console.log(\"ageGender: \"+JSON.stringify(aspect.data().ageGender.age))                  \r\n                         let ageGender = new AgeGender(\"\",  \"\");//create empty ageGender variable and fill it with data when data was available in db\r\n                         aspect.data().ageGender&& ( ageGender = new AgeGender(aspect.data().ageGender.age, aspect.data().ageGender.gender));\r\n\r\n                let aspectObj = new Aspect(aspect.id, aspect.data().aspectName, aspect.data().aspectDescr, ageGender, combiList)\r\n                tempAspectList.push(aspectObj);//add aspect to the list\r\n                 });\r\n            dce.aspectList=tempAspectList ;//store aspects in the list\r\n                })\r\n        }).catch((err)=>{\r\n            console.log('Error with loading aspect document'+err);\r\n        }) \r\n        })\r\n    }, [dceList]);\r\n\r\n    return dceList\r\n}\r\n\r\n \r\n\r\nexport default useGetDceList;","import React, { useEffect, useState } from 'react'\r\nimport Select from 'react-select'\r\n\r\nconst useNewDceHtml =( inputProps, groupProps, miscProps, newDce )=> {\r\n   // creates html for formsfields and buttons for the NewDce component\r\nconst {handleEntry, handleDescrInputChange, handleInputChange, handleRemoveClick, handleNrQuestionsInput, inputList} = inputProps;\r\nconst {setGroupValue, groupChecked, groupValue, handleCheckbox} = groupProps;\r\nconst {handleAddClick,  saveDce,  nrQuestions} = miscProps;\r\nconst [dceHtml, setDceHtml] = useState([]);\r\n\r\n \r\nuseEffect(()=>{\r\nlet tempHtml = [];\r\n\r\n  const options = inputList&&inputList.map((x, i)=>{\r\n    return {label: x.featureName, value: x.featureName}\r\n  })\r\n\r\ntempHtml.push(\r\n        <div key=\"i\">\r\n            <form className=\"form-inline\" key=\"form\">\r\n                <div key=\"formdiv\">\r\n                <label htmlFor=\"dceName\" className=\"block\">Name: </label>\r\n                    <input type=\"text\" className=\"form-control mb-2\" name=\"name\"  placeholder=\"DCE name\" id=\"dceName\" key=\"dceName\"\r\n                     onChange={(e)=>handleEntry(e)}></input>\r\n                    </div>\r\n                <div key=\"formdiv2\">\r\n                <label htmlFor=\"descr\" className=\"block\">Description: </label>\r\n                    <textarea type=\"text\" className=\"form-control mb-2\" name=\"descr\" rows=\"3\"  placeholder=\"This text will be displayed in the DCE\" id=\"descr\" key=\"descr\"\r\n                     onChange={(e)=>handleEntry(e)}></textarea>\r\n                    </div>\r\n                  \r\n                {inputList&&inputList.map((x, i) => {\r\n        return (\r\n          <div className=\"row\" key={\"topdiv\"+i}>\r\n              <div className=\"\">\r\n              <label htmlFor={i+\"Fname\"} className=\"\">Feature name: </label>\r\n            <input\r\n            className=\"form-control mb-2\"\r\n              name=\"featureName\"\r\n              required\r\n              id={i +\"Fname\"}\r\n   placeholder=\"Enter feature name\"\r\n              value={x.featureName}\r\n              onChange={e => handleInputChange(e, i)}\r\n            />             \r\n            </div>\r\n            <div className=\"col col-xs-1\">\r\n            {inputList.length !== 1 && <button\r\n                className=\"btn btn-sm btn-outline-success mb-2\"\r\n                onClick={(e) => handleRemoveClick(e, i)}><i className=\"material-icons mat-icon\">delete_forever</i></button>}\r\n              </div>\r\n\r\n              <div >\r\n              <label htmlFor={i+\"fV1\"} className=\"\">Feature value 1: </label>\r\n            <input\r\n            className=\"form-control mb-2\"\r\n              name=\"featureValue1\"\r\n              required\r\n              id={i+\"fV1\"}\r\n              key={i+\"fV1\"}\r\n              placeholder=\"Enter value\"\r\n              value={x.featureValue1}\r\n              onChange={e => handleInputChange(e, i)}\r\n            />             \r\n            </div>\r\n              <div >\r\n              <label htmlFor={i+\"fV2\"} className=\"\">Feature value 2: </label>\r\n            <input\r\n            className=\"form-control mb-2\"\r\n              name=\"featureValue2\"\r\n              required\r\n              id={i+\"fV2\"}\r\n              key={i+\"fV2\"}\r\n              placeholder=\"Enter value\"\r\n              value={x.featureValue2}\r\n              onChange={e => handleInputChange(e, i)}\r\n            />             \r\n            </div>\r\n              <div>\r\n              {inputList.length - 1 === i && <button className=\"btn btn-sm btn-outline-info mb-2\" onClick={(e)=>handleAddClick(e)}>Add another feature</button>}</div>\r\n           </div>\r\n        );\r\n      })}\r\n      <div>\r\n        <label htmlFor=\"nrChoices\">Nr of questions in DCE</label>\r\n        <input type=\"number\" className=\"col col-xs-1 form-control mb-2\" id=\"nrChoices\" name=\"nrQuestions\"  onChange={(e)=>handleNrQuestionsInput(e)} />\r\n      </div>\r\n      <div key=\"chkbox\">\r\n        <input type=\"checkbox\" name=\"grouped\" id=\"chkGrp\" checked={groupChecked} onChange={handleCheckbox}></input>\r\n        <label htmlFor=\"grouped\" className=\"\">Group by feature </label>\r\n      </div>\r\n      \r\n      <div>\r\n        {groupChecked&&\r\n        <><label className=\"col-xs-6 col-form-label pb-0\" id=\"gr-label\" htmlFor=\"GrFeat\">\r\n            Group feature\r\n          </label>\r\n          <Select className=\"form form-select-sm col-xs-6 mb-2\" id=\"GrFeat\" value={options.label} options={options} onChange={(option) => setGroupValue(option.value)} /></>\r\n          \r\n             }\r\n      </div>\r\n      <button className=\"btn btn-sm btn-outline-success\" onClick={(e)=>saveDce(e)} >Save DCE</button>\r\n          </form>\r\n\r\n        </div>\r\n)\r\nsetDceHtml(tempHtml);\r\n return       \r\n},[inputList, groupValue, nrQuestions, groupChecked, newDce])\r\n\r\nreturn {dceHtml}\r\n    \r\n}\r\nexport default useNewDceHtml;","import React, { useContext, useState } from \"react\";\r\nimport { UserContext } from \"../../providers/UserProvider\";\r\nimport { pemFirestore } from \"../../firebase/config\";\r\nimport useNewDceHtml from \"../view/useNewDceHtml\";\r\nimport Dce from '../model/dce';\r\nimport GroupedDce from '../model/groupedDce';\r\n\r\nexport default function NewDceForm({showNewDceForm, dceList, setDceListChanged, setCurrentDce}) {\r\n  //component for creating a new dce including features and general details\r\n\r\n    const [inputList, setInputList] = useState([{ featureName: null, featureValue1: null, featureValue2: null }]);\r\n    const [dceName, setDceName] = useState(\"\");\r\n    const [dceDescr, setDceDescr] = useState([{dceDescr: \"\"}]);\r\n    const [groupChecked, setGroupChecked] = useState(false);\r\n    const [groupValue, setGroupValue] = useState(null);\r\n    const [nrQuestions, setNrQuestions] = useState(0);\r\n    const [newDce, setNewDce] = useState({descr: \"\"})\r\n    const user = useContext(UserContext);\r\n    const uid = user.uid;\r\n\r\n    //Check if feature names and values are all filled in before save\r\n  const featuresNotNull = (item)=>{\r\nif(item.featureName==null||item.featureName===\"\"){\r\nalert(\"Please fill in all feature names\");\r\nreturn false;\r\n}\r\nif(item.featureValue1==null||item.featureValue1===\"\"||item.featureValue2==null||item.featureValue2===\"\"){\r\n  alert(\"Please fill in all feature values\");\r\n  return false;\r\n}\r\nreturn true;\r\n  }\r\n\r\n//helper for dceNotNull check\r\n  const existsName = (name => newDce.name===name);\r\n\r\n//Check if dce name and number of questions are all filled in before save. Also check if dce name is unique\r\n  const dceNotNull = ()=>{\r\n    let name=newDce.name;\r\n    console.log(\"field not null check, dceName: \"+name)\r\n    if(name===\"\" || dceList.list.length>0 &&dceList.nameList().some(existsName)){\r\n      alert(\"Fill in a unique DCE name\");\r\n      return false;\r\n    }\r\n    if(newDce.nrQuestions<=0||!newDce.nrQuestions){\r\n      alert(\"Fill in the number of questions (higher than 0) the participant has to answer in the DCE\");\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  //Check if groupValue is not null \r\n  const groupValueNotNull = ()=>{\r\n    if (groupChecked&&groupValue===null){\r\n      alert(\"Please select a value for the group feature\");\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  //Save dce if all fields are filled in\r\n    const saveDce = (e)=>{\r\n        e.preventDefault();\r\n        if(inputList.every(featuresNotNull)&&dceNotNull()&&groupValueNotNull()){\r\n          let dce;\r\n                if(groupChecked){\r\n                dce = new GroupedDce( null, newDce.name, newDce.descr, newDce.nrQuestions, inputList, groupChecked, groupValue, uid);\r\n                // dce = new GroupedDce(  null, dceName[0], dceDescr[0], nrQuestions, inputList, groupChecked, groupValue);\r\n                } else {\r\n                    dce = new Dce( null, newDce.name, newDce.descr, newDce.nrQuestions, inputList, groupChecked, uid)\r\n                    // dce = new Dce( null, dceName[0], dceDescr[0], nrQuestions, inputList)\r\n                }\r\n            dceList.list&&dceList.addDce(dce)\r\n            .then(dceId=>{setDceListChanged(dceId);\r\n              console.log(\"return dceId: \"+dceId);\r\n              setCurrentDce(dce);\r\n            });\r\n\r\n          // let dceColl = pemFirestore.collection('users').doc(uid).collection('DceList');\r\n          // dceColl.add({name: dceName[0], descr: dceDescr[0], features: inputList, nrFeatures: inputList.length, grouped: groupChecked, groupFeature: groupValue, nrQuestions: nrQuestions})\r\n          // .then((docRef)=>{\r\n          //       console.log(\"Document written with ID: \", docRef.id);\r\n          //       setDceListChanged(docRef.id);\r\n          // })\r\n          // .catch((error) => {\r\n          //     console.error(\"Error adding document: \", error);\r\n          // });\r\n          showNewDceForm();\r\n        }\r\n    }\r\n\r\n \r\n\r\n    // handle descr input change\r\n    const handleDescrInputChange = (e) => {\r\n      e.preventDefault();\r\n      const {name, value} = e.target;\r\n      const tempDcs = {...newDce};\r\n      console.log(\"tempDce: \"+JSON.stringify(tempDcs))\r\n      tempDcs[name]=value;\r\n      console.log(\"tempDce: \"+JSON.stringify(tempDcs))\r\n      setNewDce(newDce=>({...newDce, [name]: value}));\r\n        }\r\n    \r\n        //Handles entries from input fields\r\n    const handleEntry = (e)=>{\r\n      e.preventDefault();\r\n      const {name, value} = e.target;\r\n      console.log(\" tempdce newDce: \"+JSON.stringify(newDce))\r\n      // const tempDcs = {...newDce, [name]: value};\r\n      // console.log(\"tempDce: \"+JSON.stringify(tempDcs))\r\n      // tempDcs[name]=value;\r\n      // console.log(\"tempDce: \"+JSON.stringify(tempDcs))\r\n      setNewDce(newDce=>({...newDce, [name]: value}));\r\n      // setDceName(value);\r\n  }\r\n\r\n    // handle nr questions input change\r\n    const handleNrQuestionsInput = (e) =>{\r\n      e.preventDefault();\r\n      let nrQuestions = 'nrQuestions'\r\n      const nrString = e.target.value;\r\n      let nrQ = 0;\r\n      nrQ = Number(nrString);\r\n      setNrQuestions(nrQ);\r\n      setNewDce(newDce=>({...newDce, [nrQuestions]: nrQ}));\r\n\r\n    }\r\n\r\n     // handle feature input change\r\n  const handleInputChange = (e, index) => {\r\n    e.preventDefault();\r\n    const { name, value } = e.target;\r\n    const list = [...inputList];\r\n    list[index][name] = value;\r\n    setInputList(list);\r\n  };\r\n \r\n  // deletes feature in the new dce form\r\n  const handleRemoveClick = (e, index) => {\r\n    e.preventDefault();\r\n    const list = [...inputList];\r\n    list.splice(index, 1);\r\n    setInputList(list);\r\n  };\r\n \r\n  // Adds another feature in the form\r\n  const handleAddClick = (e) => {\r\n    e.preventDefault();\r\n    setInputList([...inputList, { featureName: null , featureValue1: null, featureValue2: null}]);\r\n  }\r\n\r\n  // checkbox for group feature \r\n  const handleCheckbox = ()=>{\r\n    // e.preventDefault();\r\n    // const { checked} = e.target;\r\n    setGroupChecked(!groupChecked);\r\n  }\r\n\r\n  const inputProps =  {handleEntry, handleDescrInputChange, handleInputChange, handleRemoveClick, handleNrQuestionsInput, inputList};\r\n  const groupProps = {setGroupValue, groupChecked, groupValue, handleCheckbox};\r\n  const miscProps = {handleAddClick,  saveDce,  nrQuestions};\r\n\r\n  //gets html for this page\r\nconst {dceHtml} = useNewDceHtml(inputProps, groupProps, miscProps, newDce);\r\n\r\n  //html to show in browser\r\n  return (\r\n        <div>\r\n          {dceHtml}\r\n        </div>\r\n    )\r\n}\r\n","import React, {useEffect, useContext, useState } from \"react\";\r\nimport { UserContext } from \"../../providers/UserProvider\";\r\nimport { pemFirestore } from \"../../firebase/config\";\r\nimport ScenarioListPage from \"../controller/ScenarioListPage\";\r\nimport AspectListPage from \"../controller/AspectListPage\";\r\nimport { Link } from \"react-router-dom\";\r\nimport useGetDceList from \"../model/useGetDceList\";\r\nimport NewDceForm from \"../controller/NewDceForm\";\r\n\r\n\r\nexport default function DceListPage({dceList}) { //Shows list of dce's with icons for editing, configuring aspects and delete.\r\n\r\n    const [showNew, setShowNew] = useState(false);\r\n    const [dceListChanged, setDceListChanged] = useState('');\r\n    const [dceSelectEvent, setDceSelectEvent] = useState(null);\r\n    const user = useContext(UserContext);\r\n    const uid = user.uid;\r\n    // const { dceNameList} = useShowDceList(uid, dceListChanged); \r\n    const [currentDce, setCurrentDce] = useState({});\r\n    const [currentSc, setCurrentSc] = useState({});\r\n    const [currentAsp, setCurrentAsp] = useState({});\r\n    const [showScenarioOrAspect, setShowScenarioOrAspect] = useState(true)\r\n    // const {dceNameEdit, dceFeatures, dceId, dceDetails} = useGetDceDetails(dceSelectEvent, uid);\r\n    // dceList.list = useGetDceList(uid);\r\n    dceList.list = useGetDceList(uid);\r\n    const [listHtml, setListHtml] = useState([])\r\n    console.log(\"dceList as prop: \"+JSON.stringify(dceList.list));\r\n\r\nuseEffect(() => {\r\n    let tempHtmlList = [];\r\n    console.log(\"useEffect for list entered\")\r\n    dceList.list.length>0 && dceList.list.map((dce, i)=>{\r\n        tempHtmlList.push(\r\n            <div key={i} className=\"\">\r\n                <h5 className=\"mt-3\"><li  className=\"listRuler mb-1\"  data-id={dce.id}> <b>{dce.name}</b>\r\n                <hr className=\"ruler\"/> \r\n                <button className=\"btn btn-sm btn-outline-warning mx-1\" onClick={()=>{setCurrentDce(dce);setCurrentSc({dummy: dce.id+currentSc.id});setShowScenarioOrAspect(true)}}><i className=\"material-icons mat-icon mt-1\">edit</i></button>\r\n                <hr className=\"rulerSm\"/>\r\n                {dce.grouped&&<button className=\"btn btn-sm btn-outline-danger mx-1\" ><i className=\"material-icons mat-icon mt-1\" onClick={()=>{setCurrentDce(dce);setCurrentAsp({dummy: dce.id+currentAsp.id});setShowScenarioOrAspect(false)}}>settings</i></button>}\r\n                <hr className=\"rulerSm\"/>\r\n                <button className=\"btn  btn-outline-success btn-sm mx-1\" onClick={() => { if (window.confirm('Are you sure you wish to delete this DCE?')); dceList.deleteDce(dce); setDceListChanged(dce.id); setCurrentDce({dummy: dce.id}); setCurrentSc({dummy:\"sc deleted\"}) } }><i className=\"material-icons mat-icon mt-1\">delete_forever</i></button>\r\n                </li></h5>\r\n            </div>\r\n    )\r\n    })\r\nsetListHtml(tempHtmlList)    \r\n    \r\n}, [dceList.list, dceListChanged])\r\n\r\n\r\n// shows or hide form for new DCE\r\nconst showNewDceForm = ()=>{\r\n    if(showNew){\r\n        setShowNew(false);\r\n    }\r\n    else if(!showNew){\r\n        setShowNew(true)\r\n    }\r\n}\r\n\r\n  //html to show in browser\r\n    return (\r\n    <div>\r\n        <div className=\"row my-4\">\r\n            <div className=\"listContainer col col-12 col-sm-3\">\r\n             <div className=\" col-auto \">\r\n             <h4><u>DCE list</u></h4>\r\n             <ul>\r\n                 {listHtml}\r\n            </ul>\r\n            </div>\r\n                <div className=\"row my-4\">\r\n                    <div className=\"col-auto  \">\r\n                        <h4><u>Create new DCE</u></h4>\r\n                        <div> <button className=\"btn btn-sm btn-outline-info\" onClick={showNewDceForm}> new DCE</button>\r\n                        </div>\r\n                    {dceList.list && showNew&&<NewDceForm showNewDceForm={showNewDceForm} dceList={dceList} setDceListChanged={setDceListChanged} setCurrentDce={setCurrentDce}/>}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n{showScenarioOrAspect&&\r\n                <div className=\"col scenarioContainer\">\r\n                    <ScenarioListPage currentDce={currentDce} dceId={currentDce.id} currentSc={currentSc} setCurrentSc={setCurrentSc}/>\r\n                </div>}\r\n                {!showScenarioOrAspect&&\r\n                <div className=\"col scenarioContainer\">\r\n                    <AspectListPage currentDce={currentDce} dceId={currentDce.id} currentAsp={currentAsp} setCurrentDce={setCurrentDce} setCurrentAsp={setCurrentAsp}/>\r\n                </div>}\r\n\r\n        </div>\r\n\r\n    </div>\r\n    )\r\n}\r\n","import React, { useContext, useState } from \"react\";\r\nimport { UserContext } from \"../../providers/UserProvider\";\r\nimport { Link } from \"react-router-dom\";\r\nimport ResultDce from \"./ResultDce\";\r\nimport useGetDceList from \"../model/useGetDceList\";\r\n// import useGetDceDetails from \"./useGetDceDetails\";\r\n\r\n export default function DcePlayListPage({dceList}) { // Shows list of dce's with icons for running them or see results (for grouped dce's)\r\n      \r\n    const [dceSelectEvent, setDceSelectEvent] = useState(null);\r\n    const user = useContext(UserContext);\r\n    const uid = user.uid;\r\n    const [currentDce, setCurrentDce] = useState({});\r\n    dceList.list = useGetDceList(uid);\r\n    // const {dceFeatures, dceId, dceDetails} = useGetDceDetails(dceSelectEvent, uid);\r\n\r\n\r\n\r\n  //html to show in browser\r\n    return (\r\n             <div>\r\n        <div className=\"row my-4\">\r\n            <div className=\"listContainer col col-12 col-sm-3\">\r\n           <div className=\" col-auto \">\r\n            <h4><u>DCE list</u></h4>\r\n            <ul>\r\n            {dceList.list && dceList.list.map((dce, i)=>{\r\n                return(\r\n                    <div key={i} className=\"\">\r\n                        <h5 className=\"mt-3\"><li className=\"listRuler mb-1\"  data-id={dce.id}> <b>{dce.name}</b>\r\n                            <hr className=\"ruler\"/> \r\n                            <Link to={{pathname:\"/app/\"+uid+\"/\"+ dce.id}}>\r\n                            <button className=\"btn btn-sm btn-outline-info mx-1\" ><i className=\"material-icons mat-icon mt-1\">play_circle_outline</i></button>\r\n                            </Link>\r\n                            {dce.grouped&&<button className=\"btn btn-sm btn-outline-danger mx-1\" onClick={()=>{setCurrentDce(dce)}}><i className=\"material-icons mat-icon mt-1\">poll</i></button>} \r\n                        </li></h5>\r\n                    </div>\r\n                )\r\n                })\r\n            }\r\n        </ul>\r\n</div>\r\n                    <div className=\"row my-4\">\r\n                        <div className=\"col-auto  \">\r\n                            <div> \r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n</div>\r\n\r\n<div className=\"col scenarioContainer\">\r\n    <ResultDce  currentDce={currentDce} dceId={currentDce.id} userId={uid} />\r\n</div>\r\n</div>\r\n\r\n</div>\r\n    )\r\n}\r\n","import { pemFirestore } from \"../../firebase/config\";\r\nimport Dce from './dce';\r\nimport GroupedDce from './groupedDce';\r\n\r\nclass DceList {//Object representing a list of dce's. All dce's from a user will be created from this object\r\n    constructor(user) {\r\n        this.uid=user.uid;\r\n        this.list = [];\r\n        this.nameList=function(){//Namelist used to check if a new dce name is unique\r\n            let names = [];\r\n           this.list.forEach(dce=>names.push(dce.name));\r\n           return names;\r\n            }\r\n\r\n        this.deleteDce = (dce) =>{//Function for deleting a dce from the list and the database\r\n            let dceId = dce.id;\r\n            let dceIndex = this.list.findIndex(dce=>dce.id===dceId);\r\n            this.list.splice(dceIndex, 1); //delete dce from dceList\r\n            clearCollection('Scenarios'); //clear scenarios from db\r\n            pemFirestore.collection('users').doc(this.uid).collection('DceList').doc(dceId.toString()).delete()\r\n            .then(() => { console.log(\"Document with ID\"+dceId+ \"  successfully deleted!\");\r\n                        })\r\n            .catch((error) => { console.error(\"Error removing document: \", error); });\r\n        }\r\n    \r\n        this.addDce = async (dce) =>{//Function for adding a dce to the list and the database\r\n            this.list.push(dce);\r\n            const {id, scList, ...dceToSave} = dce;//seperate the id (which is null as database creates id and scList from the part that has to be saved to db)\r\n            let dceColl = pemFirestore.collection('users').doc(this.uid).collection('DceList');\r\n            dceColl.add(Object.assign({},dceToSave))\r\n            .then((docRef)=>{\r\n                  console.log(\"Document written with ID: \", docRef.id);\r\n                  dce.id = docRef.id;//set the id of the dce in the list after it's received from the database\r\n                  return docRef.id//return the id as received from the database\r\n            })\r\n            .catch((error) => {\r\n                console.error(\"Error adding document: \", error);\r\n            });\r\n            return dce.name //returns the dce name\r\n        }\r\n\r\n    const clearCollection = (path) =>{//helper function to delete subcollections in firebase. These are not deleted automatically\r\n        const ref = pemFirestore.collection(path)\r\n        ref.onSnapshot((snapshot) => {\r\n          snapshot.docs.forEach((doc) => {\r\n            ref.doc(doc.id).delete()\r\n          })\r\n        })\r\n      }\r\n    } \r\n}\r\nexport default DceList","import React, {useEffect, useState, useContext } from \"react\";\r\nimport { HashRouter as Router, Route, Switch } from \"react-router-dom\";\r\nimport App from \"../../controller/participantApp/App\";\r\nimport SignIn from \"./SignIn\";\r\nimport SignUp from \"./SignUp\";\r\nimport { UserContext } from \"../../../providers/UserProvider\";\r\nimport PasswordReset from \"./PasswordReset\";\r\nimport DceListPage from \"../DceListPage\";\r\nimport DcePlayListPage from \"../DcePlayListPage\";\r\nimport DceList from \"../../model/dceList\";\r\n\r\nfunction Application() {//loads user and routes to pages depending on user, or to signIn pages when not logged in\r\n  const user = useContext(UserContext);\r\n  const [dceList, setDceList] = useState([]);\r\n\r\n  useEffect(() => {\r\n    if(user){\r\n      console.log(\"user must be there.. \"+JSON.stringify(user))\r\n    let getDceList = new DceList(user);//creates new dceList object for this user\r\n    setDceList(getDceList);\r\n    }\r\n  }, [user])\r\n\r\n  return (\r\n        user ?\r\n        <Switch>\r\n          <Router>\r\n            <Route exact path=\"/\" ><DceListPage dceList={dceList}/></Route>\r\n            <Route exact path=\"/dcePlayList\" ><DcePlayListPage dceList={dceList}/></Route>\r\n            <Route path=\"/app/:userId/:dceId\" exact component={()=> <App/>} />\r\n        </Router>\r\n      </Switch>\r\n      :\r\n      <Switch>\r\n        <Router>\r\n          <Route exact path=\"/signUp\" > <SignUp/></Route>\r\n          <Route exact path=\"/\" > <SignIn  /></Route>\r\n          <Route exact path=\"/passwordReset\" > <PasswordReset /> </Route>\r\n          <Route exact path=\"/dcePlayList\" ><SignIn /></Route>\r\n          <Route path=\"/app/:userId/:dceId\" exact component={()=> <App/>} />\r\n\r\n        </Router>\r\n      </Switch>\r\n  );\r\n}\r\nexport default Application;","import React  from \"react\";\r\nimport { HashRouter as Router } from \"react-router-dom\";\r\nimport Nav from \"./Nav\";\r\nimport UserProvider from \"../../../providers/UserProvider\";\r\nimport Application from \"./Application\";\r\n\r\n\r\n\r\nfunction MainApp() {//Main module with Nav header and application wrapped in UserProvider component\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <Router>\r\n        <UserProvider>\r\n          <Nav />\r\n          <Application/>\r\n        </UserProvider>\r\n      </Router>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default MainApp;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './css/bootstrap.css';\nimport './css/materialize.css';\nimport './index.css';\nimport MainApp from './comps/view/main/MainApp';\n\nReactDOM.render(\n  <React.StrictMode>\n    <MainApp />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}