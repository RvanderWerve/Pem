{"version":3,"sources":["comps/Fab.js","comps/OptieA.js","comps/OptieB.js","comps/MenuTabs.js","comps/Modals.js","comps/PcView.js","firebase/config.js","hooks/useFirestoreLoadResults.js","providers/UserProvider.jsx","comps/ResultDce.js","comps/EndForm.js","hooks/useFirestoreScenarios.js","App.js","comps/SignIn.js","comps/SignUp.js","comps/PasswordReset.js","comps/NewDce.js","hooks/useStorage.js","comps/ProgressBar.js","comps/UploadForm.js","comps/NewScenario.js","comps/ScenarioList.js","comps/DceList.js","comps/Dces.js","comps/NewAspect.js","comps/AspectEdit.js","comps/AspectList.js","comps/Application.js","comps/Nav.js","img/pem50.png","comps/MainApp.js","index.js"],"names":["Fab","className","href","style","fontSize","OptieA","handleClick","sc1","sc2","useState","choiceValue","setChoiceValue","useEffect","fValues1","data","fValues","fValues2","pref","nonPref","scText","src","scImg","alt","value","onClick","OptieB","MenuTabs","dceDescr","index","setIndex","setValue","styles","tabs","background","label","AppBar","position","color","Tabs","indicatorColor","textColor","variant","onChange","event","newValue","Tab","class","enableMouseEvents","onChangeIndex","Modals","nrQuestions","id","margin","data-id","scExpl","length","PcView","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","pemStorage","storage","pemFirestore","firestore","pemAuth","FieldValue","serverTimestamp","FieldPath","documentId","auth","provider","GoogleAuthProvider","signInWithGoogle","signInWithPopup","generateUserDocument","user","additionalData","a","userRef","doc","uid","get","exists","email","displayName","photoURL","set","console","error","getUserDocument","userDocument","useFirestoreLoadResult","dceId","results","setResults","log","unsub","collection","onSnapshot","snap","documents","forEach","push","UserContext","createContext","UserProvider","state","componentDidMount","onAuthStateChanged","userAuth","setState","JSON","stringify","this","Provider","props","children","Component","ResultDce","dceDetails","dceNameEdit","dceFeatures","userId","resultHtml","setResultHtml","aspectObjs","setAspectObjs","useLocation","ind","details","tempAspectObjs","then","querySnapshot","aspectName","aspectDescr","snapshot","tempFilters","tempFilter","favorFilters","againstFilters","filters","newFavorFilter","fName","groupFeature","fValue","groupValue","newAgainstValue","map","feature","i","featureName","featureValue1","featureValue2","newAgainstFilter","newTempObjs","findIndex","obj","tempResult","aspectObj","oddsFavor","oddsAgainst","combis","combi","nr","filter","result","passesAllFilters","favFilter","hasOwnProperty","favor","indexOf","againstFilter","against","aspectOdds","sigmoid","prob","graphProb","Math","abs","clNames","graphReverse","barClasses","getBarClasses","role","width","aria-valuenow","aria-valuemin","aria-valuemax","toFixed","t","pow","E","tempClNames","EndForm","useFirestoreScenarios","scenarios","setScenarios","App","answerList","setAnswerList","qIndex","setQIndex","done","setDone","todo","setTodo","setSc1","setSc2","prevRandomA","setPrevRandomA","prevRandomB","setPrevRandomB","setNrQuestions","isGrouped","setIsGrouped","setDceDescr","setDceFeatures","setDceDetails","setDceNameEdit","finished","setFinished","useParams","initialRender","useRef","M","AutoInit","tempListA","calcDots","tempGrouped","getRandomScenarios","ScenarioA","ScenarioB","getGroupedScenarios","dones","todos","pop","getRandomANr","maxNr","usedNrsA","randNrA","tempRandNrA","floor","random","includes","scenarioA","altnr","scenarioB","find","sc","usedNrsB","randNrB","tempRandNrB","RandomNrA","RandomNrB","getUnusedRndNrs","grouped","features","tempDetails","descr","name","dceName","dot","setDots","current","collRef","answer","add","SignIn","setEmail","password","setPassword","setError","onChangeHandler","currentTarget","type","placeholder","htmlFor","preventDefault","signInWithEmailAndPassword","catch","signInWithEmailAndPasswordHandler","to","SignUp","setDisplayName","createUserWithEmailAndPasswordHandler","createUserWithEmailAndPassword","PasswordReset","emailHasBeenSent","setEmailHasBeenSent","action","sendPasswordResetEmail","setTimeout","sendResetEmail","NewDce","showDceList","showNewDceForm","dceNameList","inputList","setInputList","setDceName","groupChecked","setGroupValue","useContext","featuresNotNull","item","alert","existsName","handleInputChange","e","target","list","handleAddClick","featureList","x","required","nameList","descrList","splice","handleRemoveClick","nrQ","nrString","Number","defaultValue","disabled","every","some","nrFeatures","docRef","useStorage","file","scNr","progress","setProgress","url","setUrl","storageRef","ref","put","on","percentage","bytesTransferred","totalBytes","err","getDownloadURL","ProgressBar","setFile","UploadForm","types","height","selected","files","NewScenario","setScNr","chosen","setChosen","handleAddScenario","setIsSaved","isSaved","setNewScNr","handleChosen","chosenList","handleEntry","getAltFValues","fValueList","newFeatValue","groupFeat","groupFeatValue","altFValueList","handleSave","toString","update","onSubmit","seqNr","newChosenList","ScenarioList","scList","setScList","showScList","response","orderBy","tempDocs","docs","altSc","detailData","editSc","parentElement","getAttribute","pathname","clipText","window","location","navigator","clipboard","writeText","confirm","scx","delete","deleteSc","DceList","dceHtml","setDceHtml","showNew","setShowNew","setDceId","setDceNameList","tempNameList","editDce","dce","deleteDce","Dces","resultDce","NewAspect","showAspectList","showNewAspectForm","aspectNameList","setAspectName","setAspectDescr","rows","aspectColl","AspectEdit","aspectNameEdit","aspectFilters","saveFilters","chosenFeatures","setChosenFeatures","handleAddCombi","handleDeleteCombi","aspectsObjs","groupValues","setGroupValues","formValue1","setFormValue1","formValue2","setFormValue2","html","setHtml","fromDb","setFromDb","aspect","handleFName","cIndex","dataset","handleFValue","handleGroupValue","tempGValues","tempList","tempChosen","tempFromDB","tempCIndex","emptyChosen","handleDelete","optionHtml","tempHtml","addCombiButton","AspectList","aspects","setAspects","setAspectsObjs","setAspectFilters","setAspectNameEdit","aspectId","setAspectId","editAspect","loadAspectData","aspectData","objCombis","setCombi","deleteAspect","aspectRef","Application","exact","path","component","withRouter","CUser","setUser","currentUser","signOut","MainApp","Nav","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.a0cd1560.chunk.js","sourcesContent":["const Fab = () => {\r\n    return ( \r\n        <div className=\"outtro\">\r\n\r\n\t\t<div className=\"fixed-action-btn\">\r\n\t\t<a href=\"#modal1\" className=\" modal-trigger btn-floating red darken-2\"><i className=\"material-icons mat-icon\" style={{fontSize: '140%'}} >help_outline</i></a>\r\n\t\t\r\n\t\t\t{/* <a className=\"btn-floating btn-large red darken-2\">\r\n\t\t\t  <i className=\"material-icons mat-icon\">menu</i>\r\n\t\t\t</a> */}\r\n\t\t\t{/* <ul>\r\n\t\t\t\t<li><a href=\"#modal2\" className=\"modal-trigger btn-floating red darken-2\"><i className=\"material-icons mat-icon\">exit_to_app</i></a></li> \r\n\t\t\t  <li><a href=\"#modal1\" className=\" modal-trigger btn-floating red darken-2\"><i className=\"material-icons mat-icon\">help_outline</i></a></li>\r\n\t\t\t</ul> */}\r\n\t\t\t\r\n            </div>\r\n            </div>\r\n     );\r\n}\r\n \r\nexport default Fab;","\r\nimport { useState, useEffect } from \"react\";\r\n\r\nconst OptieA = ({handleClick, sc1, sc2}) => {\r\n\r\nconst [choiceValue, setChoiceValue] = useState({})\r\n\r\n    useEffect(() => {\r\n      if(sc1&&sc2){\r\n      let fValues1 = sc1.data.fValues;\r\n      let fValues2 = sc2.data.fValues;\r\n      const cValue = {pref: fValues1, nonPref: fValues2}\r\n      setChoiceValue(cValue);\r\n      }\r\n    }, [sc1, sc2])\r\n    \r\n    return ( \r\n        <div className=\"swiper-slide choose-btn\">\r\n\t\t\t\t<div className=\"s10 \">\r\n           {sc1&&<div className=\"choice-container\">\r\n  <p>{sc1.data.scText}</p>\r\n  <img className = \"swipe-img choice-container\" src={sc1.data.scImg} alt=\"Image not loaded\"\r\n             />\r\n</div>}\r\n\r\n                </div>\r\n\t\t\t\t\t{sc1&&<button value='A' onClick={()=>{handleClick(choiceValue)}} className=\"btn blue darken-2 waves-effect waves-light z-depth-2\">Choose</button>}\r\n                 </div>\r\n     );\r\n}\r\n \r\nexport default OptieA;","import { useState, useEffect } from \"react\";\r\n\r\nconst OptieB = ({handleClick, sc2, sc1}) => {\r\n\r\n  const [choiceValue, setChoiceValue] = useState({})\r\n\r\n    useEffect(() => {\r\n      if(sc1&&sc2){\r\n      let fValues1 = sc1.data.fValues;\r\n      let fValues2 = sc2.data.fValues;\r\n      const cValue = {pref: fValues2, nonPref: fValues1}\r\n      setChoiceValue(cValue);\r\n      }\r\n    }, [sc1, sc2])\r\n\r\n    return ( \r\n        <div className=\"swiper-slide choose-btn\">\r\n\t\t\t\t<div className=\"s10 \">\r\n        {sc2&&<div className=\"choice-container\">\r\n  <p>{sc2.data.scText}</p>\r\n  <img className = \"swipe-img choice-container\" src={sc2.data.scImg} alt=\"Image not loaded\"\r\n             />\r\n</div>}\r\n                </div>\r\n\t\t\t\t\t\t{sc2&&<button value='B' onClick={()=>{handleClick(choiceValue)}}  className=\"btn blue darken-2 waves-effect waves-light z-depth-2\">Choose</button>}\r\n                        </div>\r\n     );\r\n}\r\n \r\nexport default OptieB;","import React, {useState} from 'react';\r\nimport Tabs from '@material-ui/core/Tabs';\r\nimport Tab from '@material-ui/core/Tab';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport SwipeableViews from 'react-swipeable-views';\r\nimport OptieA from './OptieA';\r\nimport OptieB from './OptieB';\r\nimport '../index.css';\r\n\r\n\r\n\r\n// class MenuTabs extends React.Component {\r\n  const MenuTabs = ({handleClick, sc1, sc2, dceDescr})=>{\r\n    // const [answerList, setAnswerList] =useState([]);\r\n\r\n    const [index, setIndex] = useState(0);\r\n    const [value, setValue] = useState(0);\r\n    \r\n\r\n  const handleChange = (event, newValue) => {\r\n    setValue(newValue)\r\n    setIndex(\r\n      newValue,\r\n    );\r\n    };\r\n\r\n  const handleChangeIndex = (index) => {\r\n    setIndex(\r\n      index,\r\n    );\r\n    setValue (index);\r\n  };\r\n\r\n  const styles = {\r\n    tabs: {\r\n       background: '#fff',\r\n     },\r\n     label: {\r\n       fontSize: '100%',\r\n     }}\r\n\r\n    return (\r\n      <div className=\"swiper-container\">\r\n          <AppBar position=\"static\" color=\"default\">\r\n        <Tabs indicatorColor=\"primary\" textColor=\"primary\" background=\"primary\"\r\n        variant=\"fullWidth\" value={value} onChange={handleChange} style={styles.tabs}>\r\n         <Tab style={styles.label} label=\"option n1\" />\r\n          <Tab style={styles.label} label=\"option n2\" />\r\n       </Tabs>\r\n       </AppBar>\r\n       <h5 class=\"text-secondary mt-1 mb-0 text-center\">{dceDescr}</h5>\r\n\r\n        <SwipeableViews enableMouseEvents index={index} onChangeIndex={handleChangeIndex}>\r\n          <div className=\"slide\">\r\n             <div className=\"innerslide\" >\r\n             <OptieA handleClick={handleClick} sc1={sc1} sc2={sc2}/>\r\n             </div> \r\n              </div>\r\n          <div className=\"slide\">\r\n          <div className=\"innerslide\" >\r\n              <OptieB handleClick={handleClick} sc1={sc1} sc2={sc2}/>\r\n             </div> \r\n                      </div>\r\n        </SwipeableViews>\r\n      </div>\r\n    );\r\n  }\r\n\r\n\r\nexport default MenuTabs;","\r\nconst Modals = ({nrQuestions, sc1, sc2}) => {\r\n\r\n\r\n    return ( \r\n        <div>\r\n        <div id=\"introModal\" className=\"modal\">\r\n        \t<div className=\"modal-content black-text modal-close center\">\r\n            <h4>Intro</h4>\r\n\t\t  <p className=\"flow-text\">There are {nrQuestions} choices to make during this experiment.\r\n          In each dilemma, choose one from the two options.</p>\r\n\r\n          <p className=\"flow-text\"><i className=\"material-icons danger red darken-2 btn-floating btn-sm\" style={{color: '#ffff', fontSize: '140%', margin: '15px'}} >help_outline</i> \r\n         shows additional explanation of each dilemma.</p>\r\n         \r\n            </div>\r\n        </div>\r\n\r\n        <div id=\"modal1\" data-id=\"modal1\" className=\"modal\">\r\n        \t<div className=\"modal-content black-text modal-close center\">\r\n            \r\n\t\t  \r\n        <div className=\"flow-text\"  >\r\n            <h4 className=\"mb-3\">Additional explanation:</h4>\r\n            <h6><u>Scenario 1:</u></h6>\r\n            {sc1&&<p className=\"flow-text\">{sc1.data.scExpl}</p>}\r\n            {sc1&&sc1.data.scExpl.length===0&&<h5 className=\"\">No additional explanation available</h5>}\r\n            <h6><u>Scenario 2:</u></h6>\r\n            {sc2&&<p className=\"flow-text\">{sc2.data.scExpl}</p>}\r\n            {sc2&&sc2.data.scExpl.length===0&&<h5 className=\"\">No additional explanation available</h5>}\r\n\r\n            <button className=\"btn btn-sm blue darken-2 waves-effect waves-light z-depth-2\">Close</button>\r\n        </div>\r\n      \r\n            </div>\r\n        </div>\r\n        </div>\r\n     );\r\n}\r\n \r\nexport default Modals;","import OptieB from './OptieB';\r\nimport OptieA from \"./OptieA\";\r\n\r\nconst PcView = ({handleClick, sc1, sc2, dceDescr }) => {\r\n    return ( \r\n        <div className=\"pc-view\">\r\n<h5 class=\"text-secondary mt-1 mb-1\">{dceDescr}</h5>\r\n<div className=\"pc-container\">\r\n\t<div className=\"option-container\">\r\n\t<OptieA handleClick={handleClick} sc1={sc1} sc2={sc2}/>\r\n\r\n\t</div>\r\n\t<div className=\"option-container\">\r\n\t<OptieB handleClick={handleClick} sc2={sc2} sc1={sc1}/>\r\n\r\n        </div>\r\n        </div>\r\n        </div>\r\n     );\r\n}\r\n \r\nexport default PcView;","import firebase from 'firebase/app';\r\nimport 'firebase/storage';\r\nimport 'firebase/firestore';\r\nimport 'firebase/auth';\r\n\r\n \r\n // Your web app's Firebase configuration\r\n var firebaseConfig = {\r\n    apiKey: \"AIzaSyDkuqUfQCo8w_7OWogV44gsGLzaE-yEvX4\",\r\n    authDomain: \"pem-firestore.firebaseapp.com\",\r\n    projectId: \"pem-firestore\",\r\n    storageBucket: \"pem-firestore.appspot.com\",\r\n    messagingSenderId: \"528017814946\",\r\n    appId: \"1:528017814946:web:f8fab7864531498a146efb\"\r\n  };\r\n  // Initialize Firebase\r\n  firebase.initializeApp(firebaseConfig);\r\n\r\n \r\nconst pemStorage = firebase.storage();\r\nconst pemFirestore = firebase.firestore();\r\nconst timestamp = firebase.firestore.FieldValue.serverTimestamp;\r\nconst pemId = firebase.firestore.FieldPath.documentId;\r\nconst pemAuth = firebase.auth();\r\nconst provider = new firebase.auth.GoogleAuthProvider();\r\n\r\nexport const signInWithGoogle = () => {\r\n  pemAuth.signInWithPopup(provider);\r\n};\r\nexport const generateUserDocument = async (user, additionalData) => {\r\n  if (!user) return;\r\n\r\n  const userRef = pemFirestore.doc(`users/${user.uid}`);\r\n  const snapshot = await userRef.get();\r\n\r\n  if (!snapshot.exists) {\r\n    const { email, displayName, photoURL } = user;\r\n    try {\r\n      await userRef.set({\r\n        displayName,\r\n        email,\r\n        photoURL,\r\n        ...additionalData\r\n      });\r\n    } catch (error) {\r\n      console.error(\"Error creating user document\", error);\r\n    }\r\n  }\r\n  return getUserDocument(user.uid);\r\n};\r\n\r\nconst getUserDocument = async uid => {\r\n  if (!uid) return null;\r\n  try {\r\n    const userDocument = await pemFirestore.doc(`users/${uid}`).get();\r\n\r\n    return {\r\n      uid,\r\n      ...userDocument.data()\r\n    };\r\n  } catch (error) {\r\n    console.error(\"Error fetching user\", error);\r\n  }\r\n};\r\n\r\nexport { pemStorage, pemFirestore, timestamp, pemAuth, pemId };","import {  useState, useEffect } from 'react';\r\nimport { pemFirestore } from '../firebase/config';\r\n\r\n\r\nconst useFirestoreLoadResult = (user, dceId) => {\r\nconst [results, setResults] = useState([]);\r\n\r\n\r\n  useEffect(() => {\r\n      if(dceId){\r\n      console.log('user en dce id in loadResults: '+ user +' '+dceId)\r\n    let unsub = pemFirestore.collection('users').doc(user).collection('DceList').doc(dceId).collection('RawResults')\r\n    .onSnapshot(snap => {\r\n        let documents = [];\r\n        snap.forEach(doc => {\r\n          documents.push({...doc.data().pref, id: doc.id});\r\n        });\r\n        setResults(documents);\r\n      });\r\n     \r\n    return () => unsub();\r\n    // this is a cleanup function that react will run when\r\n    // a component using the hook unmounts\r\n  }}, [dceId]);\r\n\r\n  return {results} ;\r\n}\r\n\r\nexport default useFirestoreLoadResult;","import React, { Component, createContext } from \"react\";\r\nimport { pemAuth, generateUserDocument } from '../firebase/config';\r\n\r\nexport const UserContext = createContext({ user: null });\r\n\r\nclass UserProvider extends Component {\r\n    state = {\r\n      user: null\r\n    };\r\n  \r\n    \r\n    \r\n    componentDidMount = async () => {\r\n      pemAuth.onAuthStateChanged(async userAuth => {\r\n        const user = await generateUserDocument(userAuth);\r\n        this.setState({ user });\r\n        console.log(\"Logged in, user: \" + JSON.stringify(user));\r\n      });\r\n  \r\n  \r\n    };\r\n  \r\n    render() {\r\n      const { user } = this.state;\r\n  \r\n      return (\r\n        <UserContext.Provider value={user}>\r\n          {this.props.children}\r\n        </UserContext.Provider>\r\n      );\r\n    }\r\n  }\r\n  \r\n  export default UserProvider;","import React, {useContext, useState, useEffect} from 'react';\r\nimport { pemFirestore, pemId } from \"../firebase/config\";\r\nimport { useParams, useLocation} from \"react-router-dom\";\r\nimport useFirestoreLoadResult from '../hooks/useFirestoreLoadResults';\r\nimport { UserContext } from \"../providers/UserProvider\";\r\n\r\n\r\nexport default function ResultDce({dceId, dceNameEdit, dceDetails, dceFeatures, userId}) {\r\n    // const {userId, dceId } = useParams();\r\n    \r\n    const [resultHtml, setResultHtml] = useState([]);\r\n    const [aspects, setAspects] = useState([]);\r\n    const [aspectObjs, setAspectObjs] = useState([]);\r\n    const location = useLocation();\r\n    // const user = useContext(UserContext);\r\n    console.log('user and dce id in ResultDce: '+JSON.stringify(userId) +' '+dceId)\r\n    console.log('dceDetails in ResultDce start: '+JSON.stringify(dceDetails))\r\n    const {results} = useFirestoreLoadResult(userId ,dceId);\r\n    const [ind, setInd] = useState(null);\r\n    const {details} = dceDetails;\r\n    // const [clNames, setClNames] = useState(\"progress w-80 mx-auto\")\r\n\r\n    \r\n    useEffect(() => {\r\n        if(dceId&&details){\r\n            console.log('DceId in useEffect: '+dceId)\r\n        let tempDocs = [];\r\n        let tempAspectObjs = [];\r\n        let response = pemFirestore.collection('users').doc(userId).collection('DceList').doc(dceId).collection('AspectList');\r\n        response.get()\r\n        .then((querySnapshot)=>{\r\n            // console.log('Aspects just loaded: '+JSON.stringify(querySnapshot))\r\n            querySnapshot.forEach((doc)=>{\r\n                // setInd(indx);\r\n                console.log('Aspects just loaded, in docs.forEach, doc: '+JSON.stringify(doc.data()))\r\n                tempAspectObjs.push({aspectName: doc.data().aspectName, aspectDescr: doc.data().aspectDescr, id: doc.id});\r\n                pemFirestore.collection('users').doc(userId).collection('DceList').doc(dceId).collection('AspectList').doc(doc.id).collection('Combis')\r\n                .get()\r\n                .then((snapshot)=>{\r\n                    console.log('tempAspectObjs at start: '+JSON.stringify(tempAspectObjs))\r\n                    let tempFilters = [];\r\n                     let tempAltFilters = [];\r\n                    snapshot.forEach((snap)=>{\r\n                        console.log('doc.is is: '+ doc.id)\r\n                        let tempFilter = snap.data();\r\n                        let favorFilters = [];\r\n                        let againstFilters = [];\r\n                        favorFilters.push(...tempFilter.filters);\r\n                        againstFilters.push(...tempFilter.filters);\r\n                        // console.log('favorFilters is: '+JSON.stringify(favorFilters.filters.find(obj=>obj.fName===details.groupFeature).fValue))\r\n                        // const altObj = favorFilters.filters.find(obj=>obj.fName===details.groupFeature);\r\n                        // let altValue = altObj.fValue;\r\n                        console.log('favorFilters is : '+JSON.stringify(favorFilters))\r\n                        let newFavorFilter = {fName: details.groupFeature, fValue: snap.data().groupValue};\r\n                        favorFilters.push(newFavorFilter);\r\n                        let newAgainstValue = \"\";\r\n                        dceFeatures.map((feature,i) =>{\r\n                        console.log(\"Feature: \"+ JSON.stringify(feature.featureName));\r\n                        if (feature.featureName===details.groupFeature){\r\n                            console.log(\"Group feat ===featureName\")\r\n                            if(feature.featureValue1===snap.data().groupValue){\r\n                                newAgainstValue = feature.featureValue2;}\r\n                            if(feature.featureValue2===snap.data().groupValue){\r\n                                newAgainstValue = feature.featureValue1;}\r\n                        }\r\n                        })\r\n                        let newAgainstFilter = {fName: details.groupFeature, fValue: newAgainstValue};\r\n                        againstFilters.push(newAgainstFilter);\r\n                        console.log('tempFilter: '+JSON.stringify(tempFilter))\r\n                        tempFilter['favorFilters'] = favorFilters;\r\n                        tempFilter['againstFilters'] = againstFilters\r\n                        console.log('tempFilter: '+JSON.stringify(tempFilter))\r\n                        console.log('groupFeature: '+ details.groupFeature+ ' favorFilters: '+JSON.stringify(favorFilters)+ '  againstFilters: '+JSON.stringify(againstFilters))\r\n                        tempFilters.push(tempFilter);;\r\n                        console.log('Combis in snap: '+JSON.stringify(tempFilters)+JSON.stringify(doc.id))\r\n                        // tempDocs.push({aspectName: doc.data().aspectName,id: doc.id, combi: snap.data()})\r\n                    })\r\n                    console.log('doc.is is: '+ doc.id)\r\n                    let newTempObjs = [...tempAspectObjs]\r\n                        let index = tempAspectObjs.findIndex(obj=>obj.id===doc.id);\r\n                        console.log('index2: '+JSON.stringify(index))\r\n                        newTempObjs[index]['combis'] = tempFilters;\r\n                        console.log('ind: '+ind)\r\n                        console.log('newtempObjs before setting: '+JSON.stringify(newTempObjs))\r\n                        setAspectObjs(newTempObjs);\r\n                        })\r\n            })\r\n         })\r\n        return\r\n    }},[dceId])\r\n\r\n\r\n    useEffect(() => {\r\n        let tempResult = [];\r\n        console.log('all aspectObj is: '+JSON.stringify(aspectObjs))\r\n        aspectObjs.forEach((aspectObj)=>{\r\n            let aspectName = aspectObj.aspectName;\r\n            let aspectDescr = aspectObj.aspectDescr;\r\n            let oddsFavor = [];\r\n            let oddsAgainst = [];\r\n            console.log('aspectObj is: '+JSON.stringify(aspectObj));\r\n            if(aspectObj.combis){\r\n                console.log('combi if entered')\r\n            aspectObj.combis.forEach(combi=>{\r\n                console.log('combi: '+JSON.stringify(combi));\r\n\r\n                let nr = combi.nr;\r\n\r\n                    const checkFValue = (result=>{\r\n                        let passesAllFilters = true;\r\n                        combi.favorFilters.forEach(favFilter=>{\r\n                            console.log('forEach favFilter: '+ JSON.stringify(favFilter))\r\n                    console.log('result in forEach: '+ JSON.stringify(result))\r\n                    if(!(favFilter.fValue===result[favFilter.fName]&&result.hasOwnProperty(favFilter.fName))){\r\n                        passesAllFilters = false;\r\n                    }\r\n                })\r\n                    return(passesAllFilters)\r\n                    })\r\n                    let tempFavors = results.filter(checkFValue);\r\n                    tempFavors.forEach(favor=>{\r\n                        console.log(' forEach favor '+JSON.stringify(favor) )\r\n                        if(oddsFavor.indexOf(favor)===-1){\r\n                            oddsFavor.push(favor);\r\n                        }\r\n                    })\r\n               \r\n                \r\n                    const checkAValue = (result=>{\r\n                        let passesAllFilters = true;\r\n                        combi.againstFilters.forEach(againstFilter=>{\r\n                        console.log('forEach againstFilter: '+ JSON.stringify(againstFilter))\r\n                        console.log('result in forEach: '+ JSON.stringify(result))\r\n                        if(!(againstFilter.fValue===result[againstFilter.fName]&&result.hasOwnProperty(againstFilter.fName))){\r\n                            passesAllFilters=false;\r\n                        }\r\n                    })\r\n                        return(passesAllFilters)\r\n                    })\r\n                    let tempAgainst = results.filter(checkAValue);\r\n                    tempAgainst.forEach(against=>{\r\n                        console.log(' forEach against '+JSON.stringify(against) )\r\n                        if (oddsAgainst.indexOf(against)===-1){\r\n                            oddsAgainst.push(against);\r\n                        }\r\n                        console.log('oddsAgainst: '+JSON.stringify(oddsAgainst))\r\n                    })\r\n                })\r\n        }\r\n        let aspectOdds = 1;\r\n        if (oddsAgainst.length>0){\r\n        aspectOdds = oddsFavor.length/oddsAgainst.length\r\n        }\r\n        let logAspectOdds = sigmoid(aspectOdds);\r\n        let prob = 2*(oddsFavor.length/(oddsFavor.length+oddsAgainst.length))-1;\r\n        let probPerc = prob*100;\r\n        let graphProb = Math.abs(prob*50);\r\n       let clNames = graphReverse(prob);\r\n       let barClasses = getBarClasses(prob)\r\n\r\n                              console.log('oddsFavor: '+JSON.stringify(oddsFavor))\r\n                tempResult.push(\r\n                <div>\r\n                    Aspect: {aspectName} <br/>\r\n                    <span className=\"text-secondary\">{aspectDescr}</span><br/>\r\n                    {/* Nr: {nr}  */}\r\n                    {/* Length in favor: {oddsFavor.length} <br/> */}\r\n                    {/* Length against odds: {oddsAgainst.length}<br/> */}\r\n                    {/* Odds: {aspectOdds}<br/> */}\r\n                    {/* Prob: {probPerc.toFixed(2)} %<br/> */}\r\n                    <div className={clNames}>\r\n                    <div className=\"progress-bar bg-light-grey\" role=\"progressbar\" style={{width: 50+\"%\"}} aria-valuenow=\"25\" aria-valuemin=\"0\" aria-valuemax=\"100\"></div>\r\n                    {prob===0&&<div class=\"progress-bar bg-teal\" role=\"progressbar\" style={{width: 2 +\"px\"}} aria-valuenow=\"30\" aria-valuemin=\"0\" aria-valuemax=\"100\"></div>}\r\n<div className={barClasses} role=\"progressbar\" aria-valuenow={prob} aria-valuemin=\"0\" aria-valuemax=\"100\" style={{width:graphProb+\"%\"}}>\r\n    {(prob>=0.1||prob<=-0.1)&&<span className=\"sr-only\">&Delta; P = {prob.toFixed(2)}</span>}\r\n    </div>\r\n  </div>\r\n  {(prob<0.1&&prob>-0.1)&&<div>&Delta; P = {prob.toFixed(2)}</div>}\r\n                    {/* Sigmoid: {logAspectOdds}<br/> */}\r\n                    {/* elements in favor: {JSON.stringify(oddsFavor)}<br/> */}\r\n                    {/* elements against: {JSON.stringify(oddsAgainst)}<br/> */}\r\n\r\n                </div>)\r\n                console.log('resultHtml: '+JSON.stringify(tempResult))\r\n                setResultHtml(tempResult);\r\n            })\r\n                return \r\n    }, [aspectObjs])\r\n\r\n    const sigmoid = (t=> {\r\n        return 1/(1+Math.pow(Math.E, -t));\r\n    })\r\n\r\n    const graphReverse = (prob)=>{\r\n        let tempClNames = \"progress w-80 mx-auto\"\r\n        if (prob<0){\r\n            tempClNames=\"progress w-80 mx-auto flex-row-reverse\"\r\n        }\r\n        console.log(\"clNames: \"+tempClNames);\r\n        return  (tempClNames);\r\n    }\r\n\r\n    const getBarClasses = (prob)=>{\r\n        let barClasses = \"progress-bar bg-teal progress-bar-striped\";\r\n        if (prob<0){\r\n            barClasses = \"progress-bar bg-purple progress-bar-striped\"\r\n        }\r\n        return barClasses;\r\n    }\r\n\r\n    return (\r\n        <div>\r\n             <h4>Some of the results for the experiment so far:</h4>\r\n            {/* Results: {JSON.stringify(results)} */}\r\n            {/* filter results: {JSON.stringify(results.filter(checkValue, featToCheck))}<br/> */}\r\n           <div className=\"mb-3\"> &Delta; P shows the difference in probability that the aspect is true and the \r\n               probability that the aspect is not true\r\n           </div>\r\n         {resultHtml}\r\n            {/* dceFeatures: {dceFeatures&&JSON.stringify(dceFeatures)} */}\r\n            \r\n           \r\n        </div>\r\n    )\r\n}\r\n","import ResultDce from \"./ResultDce\";\r\n\r\nconst EndForm = ({dceDetails, dceNameEdit, dceId, dceFeatures, userId}) => {\r\n\r\n    return ( \r\n       <div className=\"my-5\"> \r\n         <p>Thank you for completing this experiment!</p>\r\n         <p>Your contribution might actually trigger a chain of events that could eventually even save lives!!<br/>\r\n         </p>\r\n         <div className=\"col resultsContainer mx-3\">\r\n    <ResultDce  dceDetails={dceDetails} dceNameEdit = {dceNameEdit} dceId={dceId} dceFeatures={dceFeatures} userId={userId} />\r\n</div>\r\n     </div>\r\n     );\r\n}\r\n \r\nexport default EndForm;","import {  useState, useEffect } from 'react';\r\nimport { pemFirestore } from '../firebase/config';\r\n\r\n\r\nconst useFirestoreScenarios = (user, dceId) => {\r\n  const [scenarios, setScenarios] = useState([]);\r\n\r\n\r\n  useEffect(() => {\r\n    const unsub = pemFirestore.collection('users').doc(user).collection('DceList').doc(dceId).collection('Scenarios')\r\n      .onSnapshot(snap => {\r\n        let documents = [];\r\n        snap.forEach(doc => {\r\n          documents.push({...doc.data(), id: doc.id});\r\n        });\r\n        setScenarios(documents);\r\n      });\r\n\r\n    return () => unsub();\r\n    // this is a cleanup function that react will run when\r\n    // a component using the hook unmounts\r\n  }, []);\r\n\r\n  return { scenarios };\r\n}\r\n\r\nexport default useFirestoreScenarios;","import './App.css';\nimport Fab from './comps/Fab';\nimport MenuTabs from './comps/MenuTabs';\nimport Modals from './comps/Modals';\nimport M from 'materialize-css/dist/js/materialize.min.js';\n\nimport PcView from './comps/PcView';\nimport { useState, useEffect, useRef } from \"react\";\nimport {  HashRouter as Router, Switch, useLocation, useParams} from \"react-router-dom\";\nimport EndForm from './comps/EndForm';\n// import useFirestore from \"./hooks/useFirestore\";\n// import Footer from './comps/Footer';\nimport { pemFirestore } from './firebase/config';\nimport useFirestoreScenarios from './hooks/useFirestoreScenarios';\n// import ToBinary from './comps/ToBinary';\n\n\nfunction App() {\n\n\n  const [answerList, setAnswerList] =useState([]);\n  const [qIndex, setQIndex] = useState(1);\n   const [done,setDone] = useState([<span class='dot blue darken-2'></span>]);\n    const [todo, setTodo] = useState([]);\n const [sc1, setSc1] = useState(null);\nconst [sc2, setSc2] = useState(null);\nconst [prevRandomA, setPrevRandomA] = useState(null);\nconst [prevRandomB, setPrevRandomB] = useState(null);\nconst [nrQuestions, setNrQuestions] = useState(0);\nconst [isGrouped, setIsGrouped] = useState(false);\nconst [dceDescr, setDceDescr] = useState(null);\nconst [dceFeatures, setDceFeatures] = useState([]);\nconst [dceDetails, setDceDetails] = useState(null)\nconst [dceNameEdit, setDceNameEdit] = useState('');\n\nconst [finished, setFinished] = useState(false);\n\nconst {userId, dceId } = useParams();\nconst {scenarios} = useFirestoreScenarios(userId, dceId);\nconst initialRender = useRef(true);\n\nuseEffect(() => {\n  //initialize materialize\n  M.AutoInit();\n});\n\n\n// handle click from choose button\n  const handleClick = (choiceValue) => {\n    console.log(\"result passed from Choices: \"+JSON.stringify(choiceValue));\n    let tempListA =[...answerList];\ntempListA.push(choiceValue);\n    setAnswerList(tempListA);\n    setScenarios(isGrouped);\n    if(qIndex+1>nrQuestions){\n      setFinished(true);\n    }\n    setQIndex(qIndex + 1);\n    calcDots(); \n   }\n\n// set the 2 scenario's that are shown on the screen. Either random or grouped.\n   const setScenarios = (tempGrouped)=>{\n    if(!tempGrouped){\n      const {ScenarioA, ScenarioB}  =  getRandomScenarios();\n      setSc1(ScenarioA);\n      setSc2(ScenarioB);\n      console.log(\"not grouped: random scenario1: \"+ JSON.stringify(ScenarioA));\n      console.log(\"not grouped: random scenario2: \"+ JSON.stringify(ScenarioB));\n       }\n      if (tempGrouped){\n      const {ScenarioA, ScenarioB} = getGroupedScenarios();\n      setSc1(ScenarioA);\n      setSc2(ScenarioB);\n      console.log(\"grouped: random scenario1: \"+ JSON.stringify(ScenarioA));\n      console.log(\"grouped: random scenario2: \"+ JSON.stringify(ScenarioB));\n      }\n   }\n\n   //calculate nr of dots of questions still to answer\nconst calcDots = ()=>{\n  console.log(done);\n //indicator dots for number of questions\n let dones = [];\n dones = [...done];\n dones.push(<span class=\"dot blue darken-2\"></span>);\n setDone(dones);\n let todos = [];\n todos = [...todo];\n todos.pop();\n setTodo(todos);\n}\n\n\n// get random nr for the first scenario and store used nrs to avoid repeats\nconst getRandomANr = (maxNr)=>{\n  let usedNrsA = [];\n  if (prevRandomA!=null){usedNrsA=[...prevRandomA]}\n  let randNrA=-1;\n  for (let i=scenarios.length*5; i>0; i--){\n    const tempRandNrA = Math.floor(Math.random() * maxNr);\n    console.log(\"tempRndA nr is: \"+tempRandNrA);\n    console.log(\"usedNrsA in for loop: \" + JSON.stringify(usedNrsA))\nif (!usedNrsA.includes(tempRandNrA)){\nrandNrA=tempRandNrA;\nbreak;\n}\n  }\n  if(randNrA!==-1){usedNrsA.push(randNrA); }\n    setPrevRandomA(usedNrsA);\n  return randNrA;\n}\n\n\nconst getUnusedRndNrs = ()=>{\nlet usedNrsB = [];\nif (prevRandomB!=null){usedNrsB=[...prevRandomB]}\nconst maxNr = scenarios.length;\nlet randNrA = getRandomANr(maxNr);\n// catch if a-nr ==-1??\nlet randNrB=-1;\nconsole.log(\"usedNrsB: \" + JSON.stringify(usedNrsB))\n  console.log(\"maxnr is: \"+maxNr);\nfor (let i=scenarios.length*10; i>0; i--){\n  const tempRandNrB = Math.floor(Math.random() * maxNr);\n  console.log(\"tempRndB nr is: \"+tempRandNrB);\n  console.log(\"usedNrsB in for loop: \" + JSON.stringify(usedNrsB))\nif (randNrA!==tempRandNrB){\n  randNrB=tempRandNrB;\n  break;\n  }\n}\nif(randNrB!==-1){usedNrsB.push(randNrB);}\nsetPrevRandomB(usedNrsB);\nreturn {RandomNrA: randNrA, RandomNrB: randNrB};\n}\n\n\n//Get 2 scenarios that are only differing in the group feature. Scenario A is random\nconst getGroupedScenarios = ()=>{\n  const maxNr = scenarios.length;\n  let randNrA = getRandomANr(maxNr);\nconst scenarioA = scenarios[randNrA];\nif (!scenarioA){\n  setFinished(true)\n}\nelse{\nconsole.log(\"randNrA: \"+randNrA+ \" scenarioA: \"+ JSON.stringify(scenarioA));\nconst altnr = scenarioA[\"data\"][\"altnr\"];\nconsole.log(\"altnr from getGroupedSc: \"+altnr)\nconst scenarioB = scenarios.find(sc=>(sc[\"data\"][\"nr\"]===altnr));\nconsole.log(\"scenario B inside getGroupedscenarios: \"+ JSON.stringify(scenarioB));\nreturn({ScenarioA: scenarioA, ScenarioB: scenarioB});  \n}\nreturn({ScenarioA: \"\", ScenarioB: \"\"});\n}\n\n\n//get 2 random scenarios, no repeats and A!=B\nconst getRandomScenarios = ()=>{\nconst {RandomNrA, RandomNrB} = getUnusedRndNrs();\n  return ({ScenarioA: scenarios[RandomNrA], ScenarioB: scenarios[RandomNrB]});\n}\n\n\nconst setDots = (length)=>{\n  let dot = [];\n for(let i=0; i<length-1;i++){\n  dot.push(<span class=\"dot\"></span>)\n  };\n  setTodo(dot);\nreturn;\n};\n\n//execute at startup and upon change of scenarios\n//load dce details from database\nuseEffect(()=>{\n//get Dce\nlet response = pemFirestore.collection('users').doc(userId).collection('DceList').doc(dceId);\n    response.get()\n   .then((doc=>{\n     let tempGrouped = doc.data().grouped;\n     setDceFeatures(doc.data().features);\n     const tempDetails = {details: {grouped: doc.data().grouped, groupFeature: doc.data().groupFeature, nrQuestions: doc.data().nrQuestions}}\n     setDceDetails(tempDetails);\n     setDceDescr(doc.data().descr.dceDescr);\n     setDceNameEdit(doc.data().name.dceName);\nsetNrQuestions(doc.data().nrQuestions);\nsetIsGrouped(tempGrouped);\nsetDots(doc.data().nrQuestions);\nif (scenarios.length!==0){\n  setScenarios(tempGrouped);\n  }\n}))\n},[scenarios]);\n\n\nuseEffect(() => {\n  console.log(\"initial render: \"+initialRender+ \" and intialRender.current: \"+ initialRender.current);\n  // ensure this effect does not run on startup\n  if (initialRender.current) {\n    initialRender.current = false;\n  } else {\n //save result to firstore\n  console.log(\"dce is finished: save to db\")\n  let collRef = pemFirestore.collection('users').doc(userId).collection('DceList').doc(dceId).collection('RawResults')\n  answerList.map((answer,i)=> {collRef.add(answer);\n  });\n}\n}, [finished])\n\n\n  return (\n    <div className=\"App\">\n      <Modals  nrQuestions={nrQuestions} sc1={sc1} sc2={sc2}/>\n      {!finished && <MenuTabs handleClick = {handleClick} sc1={sc1} sc2={sc2} dceDescr={dceDescr} />} \n      {!finished && sc1&&sc2&& <PcView  handleClick = {handleClick} sc1={sc1} sc2={sc2} dceDescr={dceDescr}/>}\n      {finished&&userId&&dceId&& <EndForm dceDetails={dceDetails} dceNameEdit = {dceNameEdit} dceId={dceId} dceFeatures={dceFeatures} userId={userId}/>}\n      {/* {!finished&&<div> {answerList && <p>Choicelist: {JSON.stringify(answerList)}</p>}\n                </div>} */}\n      {!finished&&<Fab/>}\n      {!finished&& <div className=\"footer\">\n         {done}\n         {todo}\n      </div>}\n    </div>\n  )\n}\n\nexport default App;\n","import React, {useState} from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { signInWithGoogle } from \"../firebase/config\";\r\nimport { pemAuth } from \"../firebase/config\";\r\n\r\nconst SignIn = () => {\r\n    const [email, setEmail] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [error, setError] = useState(null);\r\n    const signInWithEmailAndPasswordHandler = \r\n            (event,email, password) => {\r\n                event.preventDefault();\r\n                console.log(\"signing in w pw n email \" + JSON.stringify(email));\r\n                pemAuth.signInWithEmailAndPassword(email, password).catch(error => {\r\n                    setError(\"Error signing in with password and email!\");\r\n                      console.error(\"Error signing in with password and email\", error);\r\n                    });\r\n    };\r\n\r\n      const onChangeHandler = (event) => {\r\n          const {name, value} = event.currentTarget;\r\n\r\n          if(name === 'userEmail') {\r\n              setEmail(value);\r\n          }\r\n          else if(name === 'userPassword'){\r\n            setPassword(value);\r\n          }\r\n      };\r\n\r\n  return (\r\n    <div className=\"row justify-content-center\">\r\n      <h1 className=\"text-3xl mb-2 text-center font-bold\">Sign In</h1>\r\n      <div className=\"col-sm-7\">\r\n        {error !== null && <div className = \"text-danger mb-3\">{error}</div>}\r\n        <form className=\"\">\r\n        <div className=\"form-floating\">\r\n           <input\r\n            type=\"email\"\r\n            className=\"form-control\"\r\n            name=\"userEmail\"\r\n            value = {email}\r\n            placeholder=\"Your email\"\r\n            id=\"userEmail\"\r\n            onChange = {(event) => onChangeHandler(event)}\r\n          />\r\n          <label htmlFor=\"userEmail\" className=\"block\">\r\n            Email:\r\n          </label>\r\n          </div>\r\n\r\n          <div className=\"form-floating \">\r\n          <input\r\n            type=\"password\"\r\n            className=\"form-control\"\r\n            name=\"userPassword\"\r\n            value = {password}\r\n            placeholder=\"Your Password\"\r\n            id=\"userPassword\"\r\n            onChange = {(event) => onChangeHandler(event)}\r\n          />\r\n             <label htmlFor=\"userPassword\" className=\"block\">\r\n            Password:\r\n          </label>\r\n          </div>\r\n          <button className=\"btn btn-outline-info\" onClick = {(event) => {signInWithEmailAndPasswordHandler(event, email, password)}}>\r\n            Sign in\r\n          </button>\r\n        </form>\r\n        <p className=\"my-3\">or</p>\r\n        <button\r\n          className=\"btn btn-outline-info\" onClick={() => {\r\n            signInWithGoogle();\r\n          }}>\r\n          Sign in with Google\r\n        </button>\r\n        <p className=\"my-3\">\r\n          Don't have an account?{\" \"}\r\n          <Link to=\"/signUp\" className=\"text-blue-500 hover:text-blue-600\">\r\n            Sign up here\r\n          </Link>{\" \"}\r\n          <br />{\" \"}\r\n          <Link to = \"passwordReset\" className=\"text-blue-500 hover:text-blue-600\">\r\n            Forgot Password?\r\n          </Link>\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\nexport default SignIn;","import React, { useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { pemAuth, signInWithGoogle, generateUserDocument } from \"../firebase/config\";\r\n\r\nconst SignUp = () => {\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [displayName, setDisplayName] = useState(\"\");\r\n  const [error, setError] = useState(null);\r\n\r\n  const createUserWithEmailAndPasswordHandler =async (event, email, password) => {\r\n    event.preventDefault();\r\n    try{\r\n        const {user} = await pemAuth.createUserWithEmailAndPassword(email, password);\r\n        generateUserDocument(user, {displayName});\r\n      }\r\n      catch(error){\r\n        setError('Error Signing up with email and password');\r\n      }\r\n    setEmail(\"\");\r\n    setPassword(\"\");\r\n    setDisplayName(\"\");\r\n  };\r\n  const onChangeHandler = event => {\r\n    const { name, value } = event.currentTarget;\r\n    if (name === \"userEmail\") {\r\n      setEmail(value);\r\n    } else if (name === \"userPassword\") {\r\n      setPassword(value);\r\n    } else if (name === \"displayName\") {\r\n      setDisplayName(value);\r\n    }\r\n  };\r\n  return (\r\n    <div className=\"row justify-content-center\">\r\n      <h1 className=\"text-3xl mb-2 text-center font-bold\">Sign Up</h1>\r\n      <div className=\"col-sm-7\">\r\n        {error !== null && (\r\n          <div className=\"text-danger mb-3\">\r\n            {error}\r\n          </div>\r\n        )}\r\n        <form className=\"\">\r\n        <div className=\"form-floating\">     \r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control \"\r\n            name=\"displayName\"\r\n            value={displayName}\r\n            placeholder=\"Display name\"\r\n            id=\"displayName\"\r\n            onChange={event => onChangeHandler(event)}\r\n          />\r\n           <label htmlFor=\"displayName\" className=\"block\">\r\n            Display Name:\r\n          </label>\r\n        </div>\r\n        <div className=\"form-floating\">     \r\n           <input\r\n            type=\"email\"\r\n            className=\"form-control\"\r\n            name=\"userEmail\"\r\n            value={email}\r\n            placeholder=\"Your Email\"\r\n            id=\"userEmail\"\r\n            onChange={event => onChangeHandler(event)}\r\n          />\r\n           <label htmlFor=\"userEmail\" className=\"block\">\r\n            Email:\r\n          </label>\r\n          </div>\r\n          <div className=\"form-floating\">     \r\n          <input\r\n            type=\"password\"\r\n            className=\"form-control\"\r\n            name=\"userPassword\"\r\n            value={password}\r\n            placeholder=\"Your Password\"\r\n            id=\"userPassword\"\r\n            onChange={event => onChangeHandler(event)}\r\n          />\r\n          <label htmlFor=\"userPassword\" className=\"block\">\r\n            Password:\r\n          </label>\r\n          </div>\r\n          <button\r\n            className=\"btn btn-outline-info\"\r\n            onClick={event => {\r\n              createUserWithEmailAndPasswordHandler(event, email, password);\r\n            }}\r\n          >\r\n            Sign up\r\n          </button>\r\n        </form>\r\n        <p className=\"my-3\">or</p>\r\n        <button\r\n          className=\"btn btn-outline-info\"\r\n          onClick={() => {\r\n            try {\r\n              signInWithGoogle();\r\n            } catch (error) {\r\n              console.error(\"Error signing in with Google\", error);\r\n            }\r\n        }}\r\n        >\r\n          Sign In with Google\r\n        </button>\r\n        <p className=\"my-3\">\r\n          Already have an account?{\" \"}\r\n          <Link to=\"/\" className=\"text-blue-500 hover:text-blue-600\">\r\n            Sign in here\r\n          </Link>{\" \"}\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\nexport default SignUp;","import React, { useState } from \"react\";\r\nimport { pemAuth } from \"../firebase/config\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst PasswordReset = () => {\r\n  const [email, setEmail] = useState(\"\");\r\n  const [emailHasBeenSent, setEmailHasBeenSent] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  const onChangeHandler = event => {\r\n    const { name, value } = event.currentTarget;\r\n\r\n    if (name === \"userEmail\") {\r\n      setEmail(value);\r\n    }\r\n  };\r\n\r\n  const sendResetEmail = event => {\r\n    event.preventDefault();\r\n    pemAuth\r\n      .sendPasswordResetEmail(email)\r\n      .then(() => {\r\n          setEmailHasBeenSent(true);\r\n        setTimeout(() => {setEmailHasBeenSent(false)}, 3000);\r\n      })\r\n      .catch(() => {\r\n        setError(\"Error resetting password\");\r\n      });\r\n  };\r\n  return (\r\n    <div className=\"row justify-content-center\">\r\n      <h1 className=\"text-xl text-center font-bold mb-3\">\r\n        Reset your Password\r\n      </h1>\r\n      <div className=\"col-sm-7\">\r\n        <form action=\"\">\r\n          {emailHasBeenSent && (\r\n            <div className=\"text-danger mb-3\">\r\n              An email has been sent to you!\r\n            </div>\r\n          )}\r\n          {error !== null && (\r\n            <div className=\"text-danger mb-3\">\r\n              {error}\r\n            </div>\r\n          )}\r\n                  <div class=\"form-floating\">\r\n          \r\n          <input\r\n            type=\"email\"\r\n            name=\"userEmail\"\r\n            id=\"userEmail\"\r\n            value={email}\r\n            placeholder=\"Input your email\"\r\n            onChange={onChangeHandler}\r\n            className=\"form-control\"\r\n          />\r\n          <label htmlFor=\"userEmail\" className=\"block\">\r\n            Email:\r\n          </label>\r\n          </div>\r\n          <button\r\n            className=\"btn btn-outline-info my-3\"\r\n            onClick={event => {\r\n              sendResetEmail(event);\r\n            }}\r\n          >\r\n            Send me a reset link\r\n          </button>\r\n        </form>\r\n\r\n        <Link\r\n          to=\"/\"\r\n          className=\"my-2 text-blue-700 hover:text-blue-800 text-center block\"\r\n        >\r\n          &larr; back to sign in page\r\n        </Link>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PasswordReset;","import React, { useContext, useState } from \"react\";\r\nimport { UserContext } from \"../providers/UserProvider\";\r\nimport { pemFirestore } from \"../firebase/config\";\r\n\r\nexport default function NewDce({showDceList, showNewDceForm, dceNameList}) {\r\n    const [inputList, setInputList] = useState([{ featureName: null, featureValue1: null, featureValue2: null }]);\r\n    const [dceName, setDceName] = useState([{ dceName: \"\"}]);\r\n    const [dceDescr, setDceDescr] = useState([{dceDescr: \"\"}]);\r\n    const [groupChecked, setGroupChecked] = useState(true);//set to false when allowing ungrouped dce's\r\n    const [groupValue, setGroupValue] = useState(null);\r\n    const [nrQuestions, setNrQuestions] = useState(0);\r\n\r\n    const user = useContext(UserContext);\r\n    const uid = user.uid;\r\n\r\n    //Check if feature names and values are all filled in before save\r\n  const featuresNotNull = (item)=>{\r\nif(item.featureName==null||item.featureName===\"\"){\r\nalert(\"Please fill in all feature names\");\r\nreturn false;\r\n}\r\nif(item.featureValue1==null||item.featureValue1===\"\"||item.featureValue2==null||item.featureValue2===\"\"){\r\n  alert(\"Please fill in all feature values\");\r\n  return false;\r\n}\r\nreturn true;\r\n  }\r\n\r\n//helper for dceNotNull check\r\n  const existsName = (name => dceName[0].dceName===name);\r\n\r\n//Check if dce name and number of questions are all filled in before save. Also check if dce name is unique\r\n  const dceNotNull = ()=>{\r\n    if(dceName[0].dceName===\"\" || dceNameList.some(existsName)){\r\n      alert(\"Fill in a unique DCE name\");\r\n      return false;\r\n    }\r\n    if(nrQuestions<=0){\r\n      alert(\"Fill in the number of questions the participant has to answer in the DCE\");\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  //Check if groupValue is not null \r\n  const groupValueNotNull = ()=>{\r\n    if (groupValue===null){\r\n      alert(\"Please select a value for the group feature\");\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  //Save dce if all fields are filled in\r\n    const saveDce = (e)=>{\r\n        e.preventDefault();\r\n        if(inputList.every(featuresNotNull)&&dceNotNull()&&groupValueNotNull()){\r\n        let dceColl = pemFirestore.collection('users').doc(uid).collection('DceList');\r\n        dceColl.add({name: dceName[0], descr: dceDescr[0], features: inputList, nrFeatures: inputList.length, grouped: groupChecked, groupFeature: groupValue, nrQuestions: nrQuestions})\r\n        .then((docRef)=>{\r\n              console.log(\"Document written with ID: \", docRef.id);\r\n        })\r\n        .catch((error) => {\r\n            console.error(\"Error adding document: \", error);\r\n        });\r\n        showDceList();\r\n        showNewDceForm();\r\n    }\r\n  }\r\n\r\n    // handle name input change\r\n    const handleNameInputChange = (e) => {\r\n        const name = e.target.value;\r\n        const nameList = [...dceName];\r\n        nameList[0][\"dceName\"] = name;\r\n        setDceName(nameList);\r\n    }\r\n\r\n    // handle descr input change\r\n    const handleDescrInputChange = (e) => {\r\n        const descr = e.target.value;\r\n        const descrList = [...dceDescr];\r\n        descrList[0][\"dceDescr\"] = descr;\r\n        setDceDescr(descrList);\r\n    }\r\n\r\n    // handle nr questions input change\r\n    const handleNrQuestionsInput = (e) =>{\r\n      const nrString = e.target.value;\r\n      let nrQ = 0;\r\n      nrQ = Number(nrString);\r\n      setNrQuestions(nrQ);\r\n    }\r\n\r\n     // handle feature input change\r\n  const handleInputChange = (e, index) => {\r\n    const { name, value } = e.target;\r\n    const list = [...inputList];\r\n    list[index][name] = value;\r\n    setInputList(list);\r\n  };\r\n \r\n  // deletes dce from database and refreshes list\r\n  const handleRemoveClick = index => {\r\n    const list = [...inputList];\r\n    list.splice(index, 1);\r\n    setInputList(list);\r\n    showDceList();\r\n  };\r\n \r\n  // Adds another feature in the form\r\n  const handleAddClick = () => {\r\n    setInputList([...inputList, { featureName: null , featureValue1: null, featureValue2: null}]);\r\n  }\r\n\r\n  // checkbox for group feature - prep for ungrouped dce's\r\n  const handleCheckbox = (e)=>{\r\n    const { checked} = e.target;\r\n    setGroupChecked(checked);\r\n  }\r\n\r\n  //registers choice for group feature\r\n  const handleGroupChoice = (e) =>{\r\n    const fName = e.target.value;\r\n    setGroupValue(fName);\r\n  }\r\n\r\n  // function to create options in group feature in html\r\n  let featureList = inputList.map((x, i)=>{\r\n    return(\r\n      <option key={i} value={x.featureName}>{x.featureName}</option>\r\n    )\r\n  })\r\n \r\n  //html to show in browser\r\n  return (\r\n        <div>\r\n            <form className=\"form-inline\">\r\n                <div className=\"form-floating\">\r\n                    <input type=\"text\" className=\"form-control\" name=\"dceName\"  placeholder=\"DCE name\" id=\"dceName\" \r\n                    required onChange={handleNameInputChange}></input>\r\n                    <label htmlFor=\"dceName\" className=\"block\">Name: </label>\r\n                    </div>\r\n                <div className=\"form-floating\">\r\n                    <input type=\"text\" className=\"form-control\" name=\"descr\"  placeholder=\"Description - this text will be displayed in the DCE\" id=\"descr\" \r\n                    required onChange={handleDescrInputChange}></input>\r\n                    <label htmlFor=\"descr\" className=\"block\">Description (shown in DCE): </label>\r\n                    </div>\r\n                  \r\n                {inputList.map((x, i) => {\r\n        return (\r\n          <div className=\" row\">\r\n              <div className=\"col-xs-12 col-sm-9 form-floating\">\r\n            <input\r\n            className=\"form-control \"\r\n              name=\"featureName\"\r\n              required\r\n              id={i}\r\n   placeholder=\"Enter feature name\"\r\n              value={x.featureName}\r\n              onChange={e => handleInputChange(e, i)}\r\n            />             \r\n            <label htmlFor={i} className=\"\">Feature name: </label>\r\n            </div>\r\n            <div className=\"col col-xs-1\">\r\n            {inputList.length !== 1 && <button\r\n                className=\"btn btn-sm btn-outline-success\"\r\n                onClick={() => handleRemoveClick(i)}><i class=\"material-icons mat-icon\">delete_forever</i></button>}\r\n              </div>\r\n\r\n              <div className=\"col-xs-12 col-sm-9 form-floating\">\r\n              <input\r\n            className=\"form-control \"\r\n              name=\"featureValue1\"\r\n              required\r\n              id={i}\r\n              placeholder=\"Enter feature value 1\"\r\n              value={x.featureValue1}\r\n              onChange={e => handleInputChange(e, i)}\r\n            />             \r\n            <label htmlFor={i} className=\"\">Feature value 1: </label>\r\n            </div>\r\n              <div className=\"col-xs-12 col-sm-9 form-floating\">\r\n              <input\r\n            className=\"form-control \"\r\n              name=\"featureValue2\"\r\n              required\r\n              id={i}\r\n              placeholder=\"Enter feature value 2\"\r\n              value={x.featureValue2}\r\n              onChange={e => handleInputChange(e, i)}\r\n            />             \r\n            <label htmlFor={i} className=\"\">Feature value 2: </label>\r\n            </div>\r\n              <div>\r\n              {inputList.length - 1 === i && <button className=\"btn btn-sm btn-outline-info\" onClick={handleAddClick}>Add another feature</button>}</div>\r\n           </div>\r\n        );\r\n      })}\r\n      <div>\r\n        <label htmlFor=\"nrChoices\">Nr of questions in DCE</label>\r\n        <input type=\"number\" className=\"col col-xs-1\" id=\"nrChoices\" required onChange={handleNrQuestionsInput} />\r\n      </div>\r\n      {/* uncomment the checkbox part when allowing ungrouped dce's */ }\r\n      {/* <div>\r\n        <input type=\"checkbox\" name=\"group\" id=\"chkGrp\" onClick={handleCheckbox}></input>\r\n        <label htmlFor=\"group\" className=\"\">Group by feature </label>\r\n      </div> */}\r\n      <div>\r\n        {groupChecked&&\r\n        <label htmlFor=\"groupFeature\" className=\"col-xs-6 col-form-label\">Group feature\r\n            <select className=\"form-select form-select-sm col-xs-6 \" defaultValue=\"\" name=\"groupFeature\"  id=\"groupFeature\"  onChange={handleGroupChoice}>\r\n            <option value=\"\" disabled></option>\r\n             {featureList}\r\n             </select>\r\n            </label>\r\n        }\r\n      </div>\r\n      <button className=\"btn btn-sm btn-outline-success\" onClick={saveDce} >Save DCE</button>\r\n          </form>\r\n        </div>\r\n    )\r\n}\r\n","import { useContext, useState, useEffect } from 'react';\r\nimport { pemStorage, pemFirestore } from '../firebase/config';\r\nimport { UserContext } from \"../providers/UserProvider\";\r\n\r\n\r\nconst useStorage = (file, dceId, scNr ) => {\r\n  const [progress, setProgress] = useState(0);\r\n  const [error, setError] = useState(null);\r\n  const [url, setUrl] = useState(null);\r\n\r\n  const user = useContext(UserContext);\r\n  const uid = user.uid;\r\n\r\n  useEffect(() => {\r\n    // references\r\n    const storageRef = pemStorage.ref(file.name);\r\n    const collectionRef = pemFirestore.collection('users').doc(uid).collection('DceList').doc(dceId).collection('Scenarios');\r\n    \r\n    storageRef.put(file).on('state_changed', (snap) => {\r\n      let percentage = (snap.bytesTransferred / snap.totalBytes) * 100;\r\n      setProgress(percentage);\r\n    }, (err) => {\r\n      setError(err);\r\n    }, async () => {\r\n      const url = await storageRef.getDownloadURL();\r\n    //   await collectionRef.doc(scNr).set({data: {scImg: url}},{merge: true});\r\n      setUrl(url);\r\n    });\r\n  }, [file]);\r\n\r\n  return { progress, url, error };\r\n}\r\n\r\nexport default useStorage;","import React, { useEffect } from 'react';\r\nimport useStorage from '../hooks/useStorage';\r\n\r\nconst ProgressBar = ({ file, setFile, dceId, scNr, setUrl }) => {\r\n  const { progress, url } = useStorage(file, dceId, scNr);\r\n\r\n  //set file and url when url (from storage) changes \r\n  useEffect(() => {\r\n    if (url) {\r\n      setFile(null);\r\n      setUrl(url);\r\n    }\r\n  }, [url, setFile]);\r\n\r\n\r\n    //Html to show in browser\r\n  return (\r\n    <div className=\"progress-bar\"\r\n      style={{ width: progress + '%' }}\r\n    ></div>\r\n  );\r\n} \r\n\r\nexport default ProgressBar;","import React, { useState } from 'react';\r\nimport ProgressBar from './ProgressBar';\r\n\r\nconst UploadForm = ({ dceId, scNr, setUrl }) => {\r\n  const [file, setFile] = useState(null);\r\n  const [error, setError] = useState(null);\r\n\r\n  const types = ['image/png', 'image/jpeg'];\r\n\r\n  //handle selected file\r\n  const handleChange = (e) => {\r\n    let selected = e.target.files[0];\r\n    if (selected && types.includes(selected.type)) {\r\n      setFile(selected);\r\n      setError('');\r\n    } else {\r\n      setFile(null);\r\n      setError('Please select an image file (png or jpg)');\r\n    }\r\n  };\r\n\r\n  //Html to show in browser\r\n  return (\r\n    <form>\r\n      <label>\r\n        <input type=\"file\" style={{height: 0, width: 0}} onChange={handleChange} />\r\n        <span className=\"btn btn-sm btn-outline-info mb-3\">Upload image</span>\r\n      </label>\r\n      <div className=\"output\">\r\n        { error && <div className=\"error\">{ error }</div>}\r\n        { file && <div>{ file.name }</div> }\r\n        { file && <ProgressBar file={file} setFile={setFile} dceId={dceId} scNr={scNr} setUrl={setUrl}/> }\r\n      </div>\r\n    </form>\r\n  );\r\n}\r\n\r\nexport default UploadForm;","import React, { useContext, useState } from \"react\";\r\nimport { UserContext } from \"../providers/UserProvider\";\r\nimport { pemFirestore } from \"../firebase/config\";\r\nimport UploadForm from \"./UploadForm\";\r\n\r\nexport default function NewScenario({ dceId, dceFeatures, dceDetails, scNr, setScNr, chosen, setChosen, handleAddScenario, setIsSaved, isSaved}) {\r\n\r\n    const user = useContext(UserContext);\r\n    const uid = user.uid;\r\n    \r\n    const [newScNr, setNewScNr] = useState(scNr);\r\n    // const disabled = chosen[0][\"data\"][\"selectDisable\"];\r\n    const disabled = 'true';\r\n\r\n// set url for the image and save to chosenList\r\n    const setUrl = (url)=>{\r\n        const chosenList = [...chosen];\r\n        chosenList[0][\"data\"][\"scImg\"]= url;\r\n        setChosen(chosenList);\r\n        setIsSaved(false)\r\n    }\r\n\r\n    //Handles choices from dropdown fValues\r\n    const handleChosen = (e)=>{\r\n        e.preventDefault();\r\n        const {name, value} = e.target;\r\n        const chosenList = [...chosen];\r\n        chosenList[0][\"data\"][\"fValues\"][name]= value;\r\n        setChosen(chosenList);\r\n        setIsSaved(false);\r\n    }\r\n\r\n    //Handles entries from input fields\r\n    const handleEntry = (e)=>{\r\n        e.preventDefault();\r\n        const {name, value} = e.target;\r\n        const chosenList = [...chosen];\r\n        chosenList[0][\"data\"][name]= value;\r\n        setChosen(chosenList);\r\n        setIsSaved(false);\r\n    }\r\n\r\n//Gets features for the other scenario in a pair\r\nconst getAltFValues = (fValueList) =>{\r\n    const groupFeat = dceDetails.details.groupFeature;\r\n    const groupFeatValue = fValueList[groupFeat];\r\n    let newFeatValue;\r\n    dceFeatures.map((feature,i) =>{\r\n    console.log(\"Feature: \"+ JSON.stringify(feature.featureName));\r\n    if (feature.featureName===groupFeat){\r\n        console.log(\"Group feat ===featureName\")\r\n        if(feature.featureValue1===groupFeatValue){\r\n            newFeatValue = feature.featureValue2;}\r\n        if(feature.featureValue2===groupFeatValue){\r\n            newFeatValue = feature.featureValue1;}\r\n    }\r\n    })\r\n    console.log(\"newFeatValue is: \"+ newFeatValue);\r\n    let altFValueList = {...fValueList};\r\n    altFValueList[groupFeat] = newFeatValue;\r\n    return {altFValueList, newFeatValue }\r\n}\r\n\r\n\r\n//Saves via handleSave and creates the alternative scenario in case of grouped features\r\nconst handleCreateAlt = (e)=>{\r\n    console.log(\"handle create clicked\")\r\n    let seqNr;\r\n    handleAddScenario(scNr)\r\n    .then((nr)=>{seqNr=nr;\r\n        console.log(\"New seqNr is: \"+seqNr); \r\n        //here handleSave\r\n        const chosenList = [...chosen];\r\n        const fValueList = chosen[0][\"data\"][\"fValues\"];\r\n\r\n        console.log(\"fValueList: \"+JSON.stringify(fValueList));\r\n        const {altFValueList, newFeatValue} = getAltFValues(fValueList);\r\n        console.log(\"altFValues is: \" + JSON.stringify(altFValueList));\r\n        chosenList[0][\"data\"][\"altnr\"]= seqNr;\r\n        setChosen(chosenList);\r\n        setNewScNr(seqNr);\r\n        setScNr(seqNr);\r\n        handleSave(e)\r\n        .then(()=>{\r\n        //load data in forms\r\n        setChosen([{}]);\r\n        pemFirestore.collection('users').doc(uid).collection('DceList').doc(dceId).collection('Scenarios').doc(seqNr.toString()).get()\r\n    .then((doc)=>{\r\n        let data = doc.data();\r\n        let newChosenList = [data]\r\n        newChosenList[0][\"data\"][\"fValues\"]=altFValueList;\r\n        setChosen(newChosenList);\r\n        let response = pemFirestore.collection('users').doc(uid).collection('DceList').doc(dceId).collection('Scenarios');\r\n        response.doc(seqNr.toString()).set(newChosenList[0]);\r\n     })\r\n    })\r\n    });\r\n    \r\n}\r\n\r\n\r\n //Checks if all required field have an entry and saves to Firestore if ok.\r\n //Else alert with error message\r\nconst handleSave = async (e)=>{\r\ne.preventDefault();\r\nif (chosen[0][\"data\"][\"scText\"].length===0 && chosen[0][\"data\"][\"scImg\"].length===0){\r\nalert(\"Fill in the Scenario Text or upload a Scenario Image, or do both\") \r\n}\r\ndceFeatures.some(feature=>{\r\n    if(chosen[0][\"data\"][\"fValues\"][feature.featureName].length===0){\r\n        alert(\"Select a value for every feature in the scenario\");\r\n        return true; \r\n    } return false;\r\n})\r\nlet response = pemFirestore.collection('users').doc(uid).collection('DceList').doc(dceId).collection('Scenarios');\r\nresponse.doc(scNr.toString()).set(chosen[0]);\r\nconst fValues = chosen[0][\"data\"][\"fValues\"];\r\nconsole.log(\"fValues in handleSave: \"+JSON.stringify(fValues));\r\nconst altnr = chosen[0][\"data\"][\"altnr\"];\r\nconsole.log(\"altnr is: \"+altnr);\r\nconst {altFValueList} = getAltFValues(fValues);\r\nconsole.log(\"altFValues in handleSave: \"+JSON.stringify(altFValueList));\r\nif (altnr){\r\n    let response = pemFirestore.collection('users').doc(uid).collection('DceList').doc(dceId).collection('Scenarios');\r\n        response.doc(altnr.toString()).update({\r\n            \"data.fValues\": altFValueList\r\n        });\r\n}\r\nsetIsSaved(true);\r\n}\r\n\r\n\r\n//Html to show in browser\r\n    return (\r\n        <div>\r\n              {dceDetails&&dceDetails.details.grouped&&chosen[0][\"data\"]&&<h5>Paired with scenario nr: {chosen[0][\"data\"][\"altnr\"]}</h5>}\r\n              <form className=\"form-row\" > \r\n              <h6>Features</h6>\r\n        {chosen[0][\"data\"]&& dceFeatures.map((feature,i) =>{\r\n                  return (\r\n                  <label htmlFor={i} className=\"col-md-3 col-form-label\">{feature.featureName}\r\n                  <select className=\"form-select form-select-sm col-md-3  mb-3\" disabled={chosen[0][\"data\"][\"altSc\"]} name={feature.featureName} defaultValue={chosen[0][\"data\"][\"fValues\"][feature.featureName]} onChange={handleChosen} id={i} required>\r\n                   <option value=\"\" disabled></option>\r\n                   <option value={feature.featureValue1}>{feature.featureValue1}</option>\r\n                   <option value={feature.featureValue2} >{feature.featureValue2}</option>\r\n                   </select>\r\n                   </label>\r\n                  )\r\n              })}\r\n              </form>\r\n              {chosen[0][\"data\"]&&<form id=\"textForm\" onSubmit={handleSave}>\r\n              <div>\r\n              <h6>Scenario text</h6>\r\n              <textarea className=\"form-control form-control-sm mb-3\" name=\"scText\" value={chosen[0][\"data\"][\"scText\"]} placeholder=\"Enter scenario text\" id=\"scText\" onChange={e=>handleEntry(e)}></textarea>\r\n               </div>\r\n                                     \r\n               <div>\r\n                   <h6>Scenario explanation</h6>\r\n                   <textarea className=\"form-control form-control-sm mb-3\" type=\"text\" name=\"scExpl\" value={chosen[0][\"data\"][\"scExpl\"]} placeholder=\"Enter additional explanatory text\" id=\"scExpl\" onChange={e=>handleEntry(e)}></textarea>\r\n\r\n               </div>\r\n              \r\n               <h6>Scenario image link</h6>\r\n               <UploadForm dceId={dceId} scNr={scNr} setUrl={setUrl} />\r\n               {chosen[0][\"data\"][\"scImg\"]&&<img src={chosen[0][\"data\"][\"scImg\"]} className='scImage' alt=\"scenario image\"/>}\r\n               {dceDetails&&dceDetails.details.grouped&&!chosen[0][\"data\"][\"altnr\"]&&<input className=\"btn  btn-outline-success mb-3\" type=\"button\" onClick={handleCreateAlt} value=\"Save & Create pair\"></input>}\r\n               {(chosen[0][\"data\"][\"altnr\"]||!dceDetails.details.grouped)&&<input className=\"btn  btn-outline-success mb-3\" type=\"submit\" value=\"Save\"></input>}\r\n               </form>}\r\n               {isSaved&&<div className={isSaved}>Scenario has been saved</div>}\r\n    </div>\r\n    )\r\n}\r\n","import React, { useContext, useState, useEffect } from \"react\";\r\nimport { UserContext } from \"../providers/UserProvider\";\r\nimport { pemFirestore } from \"../firebase/config\";\r\nimport NewScenario from \"./NewScenario\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\n\r\nexport default function ScenarioList({dceNameEdit, dceId, dceFeatures, dceDetails}) {\r\n\r\n    const user = useContext(UserContext);\r\n    const uid = user.uid;\r\n    const [chosen, setChosen] = useState([{nr: 0}]);\r\n    const [scList, setScList] = useState([]);\r\n    const [scNr, setScNr] = useState(\"\");\r\n    const [isSaved, setIsSaved] = useState(false);\r\n\r\n    //Show list of scenario's for the selected dce\r\n    const showScList = async() => {\r\n        if(dceId){\r\n        let response = pemFirestore.collection('users').doc(uid).collection('DceList').doc(dceId).collection('Scenarios').orderBy('data.nr');\r\n        let data = await response.get();\r\n        let tempDocs = [];\r\n        data.docs.forEach(doc => {\r\n            tempDocs.push({...doc.data(), id: doc.id});\r\n            });\r\n        setScList(tempDocs) ;\r\n        }\r\n    }\r\n\r\n    //show scenario list when dceId is changed\r\n    useEffect(() => {\r\n        showScList();\r\n        setChosen([{}]);\r\n            setScNr(null);\r\n            setIsSaved(false)\r\n      }, [dceId])\r\n\r\n// Adds scenario with id which is first available unique number \r\n// Features are taken from dce\r\n    const handleAddScenario = async(altnr) =>{\r\n        if(dceId){\r\n            const fValues ={};\r\n            // let featNr = 1;\r\n            dceFeatures.map(feature=>{\r\n                fValues[feature.featureName]=\"\";\r\n                // featNr +=1;\r\n            })\r\n            let response = pemFirestore.collection('users').doc(uid).collection('DceList').doc(dceId).collection('Scenarios').orderBy('data.nr');\r\n        let data =  await response.get();\r\n        let seqNr=1;\r\n        data.docs.forEach(doc => {\r\n            if(doc.data().data.nr!==seqNr){\r\n                console.log(\"doc id !== seqNr, seqNr is: \"+seqNr + \"doc id is: \"+ doc.data().data.nr);\r\n                return;\r\n            }\r\n            else {\r\n                console.log(\"doc id == seqNr, seqNr is: \"+seqNr + \"doc id is: \"+ doc.data().data.nr);\r\n                seqNr +=1;\r\n            }\r\n            });\r\n            let altSc = false;\r\n            if (altnr){altSc = true}\r\n            setChosen([{}]);\r\n            const detailData = {data: {nr: seqNr, altnr: altnr, altSc: altSc, fValues, scText: \"\", scImg: \"\", scExpl: \"\"}};\r\n            let response2 = pemFirestore.collection('users').doc(uid).collection('DceList').doc(dceId).collection('Scenarios');\r\n            response2.doc(seqNr.toString()).set(detailData);\r\n            setChosen([detailData]);\r\n            setScNr(seqNr);\r\n        showScList();\r\n      return seqNr;\r\n    }\r\n}\r\n\r\n//delete scenario from database and refresh list\r\nconst deleteSc = (e) => {\r\n    let sc;\r\n    console.log(\"e is: \"+ e.target.parentElement.parentElement.getAttribute('data-id'));\r\n    if(e.target.parentElement.parentElement.getAttribute('data-id')){\r\n    sc = e.target.parentElement.parentElement.getAttribute('data-id');\r\n    } else{\r\n        sc = e.target.parentElement.getAttribute('data-id');\r\n    }\r\n    let altSc = scList.find(scx=>scx.id===sc).data.altnr;\r\nconsole.log(\"Alt sc that should be deleted: \"+JSON.stringify(altSc));\r\n    \r\n    pemFirestore.collection('users').doc(uid).collection('DceList').doc(dceId).collection('Scenarios').doc(sc).delete().then(() => {\r\n        console.log(\"Scenario with ID \"+sc+ \"  successfully deleted!\");\r\n    }).catch((error) => {\r\n        console.error(\"Error removing document: \", error);\r\n    });\r\n    if (altSc){\r\n    pemFirestore.collection('users').doc(uid).collection('DceList').doc(dceId).collection('Scenarios').doc(altSc.toString()).delete().then(() => {\r\n        console.log(\"Alt scenario with ID \"+altSc.toString()+ \"  successfully deleted!\");\r\n    }).catch((error) => {\r\n        console.error(\"Error removing document: \", error);\r\n    });}\r\nif (sc===scNr){\r\n    setChosen([{}]);\r\n    setScNr(\"\");\r\n    setIsSaved(false);\r\n}\r\nshowScList();\r\n}\r\n\r\n//select scenario to show and edit details \r\nconst editSc = (e) => {\r\n    setChosen([{}]);\r\n    let sc;\r\n    console.log(\"e is: \"+ e.target.parentElement.parentElement.getAttribute('data-id'));\r\n    if(e.target.parentElement.parentElement.getAttribute('data-id')){\r\n    sc = e.target.parentElement.parentElement.getAttribute('data-id');\r\n    } else{\r\n        sc = e.target.parentElement.getAttribute('data-id');\r\n    }\r\n    setScNr(sc);\r\n    pemFirestore.collection('users').doc(uid).collection('DceList').doc(dceId).collection('Scenarios').doc(sc).get()\r\n.then((doc)=>{\r\n    let data = doc.data();\r\n    setChosen([data]);\r\n    setIsSaved(false);\r\n })\r\n}\r\n\r\n    //html to show in browser\r\n    return (\r\n        <div>\r\n            <h4><u>Details</u> for <b> {dceNameEdit}</b>{scNr&&<span> - Scenario nr. {scNr}</span>}{!scNr&&<span> - Select a scenario nr.</span>}</h4>\r\n            <div className=\"\">\r\n            <h6>{dceDetails&&<span> <Link to={{pathname:\"/app/\"+uid+\"/\"+ dceId}}>\r\n                    <button className=\"btn btn-sm btn-outline-info mx-1\" ><i class=\"material-icons mat-icon mt-1\">play_circle_outline</i></button>\r\n                    </Link></span>}\r\n                    {dceDetails&&<span> Play this DCE</span>} {dceDetails&& <span> <hr className=\"ruler detailsRuler\"/> <button className=\"btn btn-sm btn-outline-info\" onClick={() => {let clipText = window.location.href+\"app/\"+uid+\"/\"+ dceId; navigator.clipboard.writeText(clipText)}}>Copy DCE link </button></span>} </h6></div>\r\n           <div className=\"pb-4\"><h6> {dceDetails&&dceDetails.details.grouped&&<span>Group feature: {dceDetails.details.groupFeature}</span>} {dceDetails&& <span> <hr className=\"ruler detailsRuler\"/> Questions in DCE: {dceDetails.details.nrQuestions}</span>}</h6></div>\r\n            <div className=\"row\">\r\n   <div className=\"scenarioList col col-6 col-md-3 col-sm-5\">\r\n    <h5>Scenario's</h5>\r\n    <ul>\r\n    <li className=\"listRuler mb-1\">Nr.  <hr className=\"ruler\"/> Edit <hr className=\"rulerSm\"/>&nbsp;Delete </li>\r\n                {scList && scList.map((sc,i)=>{\r\n                return(\r\n                    <div key={i} className=\"\">\r\n                    <h5 className=\"mt-3\"><li className=\"listRuler mb-1\" data-id={sc.id}><button className=\"btn btn-sm btn-outline-info\" onClick={editSc}>{sc.data.nr}</button>\r\n                    <hr className=\"ruler\"/> \r\n                    <button className=\"btn  btn-outline-warning btn-sm mx-2\" onClick={editSc} > <i class=\"material-icons mat-icon\">edit</i></button>\r\n                    <hr className=\"rulerSm\"/>\r\n                    <button className=\"btn  btn-outline-success btn-sm mx-2\" onClick={(e) => { if (window.confirm('Are you sure you wish to delete this scenario?')) deleteSc(e) }} > <i class=\"material-icons mat-icon\">delete_forever</i></button></li></h5>\r\n                    </div>\r\n                )\r\n                })\r\n            }\r\n   \r\n           {dceId&&<li className=\"mb-2\"><button className=\"btn btn-sm btn-outline-info\" onClick={()=>handleAddScenario(null)}>Add scenario</button></li>}\r\n    </ul>\r\n    </div>\r\n    \r\n    <div className=\"col\">\r\n        <NewScenario dceId={dceId} dceFeatures={dceFeatures} dceDetails={dceDetails} scNr={scNr} setScNr={setScNr} \r\n        chosen={chosen} setChosen={setChosen} handleAddScenario={handleAddScenario} setIsSaved={setIsSaved} isSaved={isSaved}/>\r\n    </div>\r\n    </div>\r\n        </div>\r\n    )\r\n}\r\n","import React, { useContext, useEffect, useState } from \"react\";\r\nimport Header from './Header';\r\nimport { UserContext } from \"../providers/UserProvider\";\r\nimport { pemFirestore } from \"../firebase/config\";\r\nimport NewDce from \"./NewDce\";\r\nimport ScenarioList from \"./ScenarioList\";\r\nimport { HashRouter as Router, Route, Link } from \"react-router-dom\";\r\n\r\n\r\n\r\n\r\nexport default function DceList() {\r\n\r\n    const [dceHtml, setDceHtml] = useState([]);\r\n    const [showNew, setShowNew] = useState(false);\r\n    const [dceNameEdit, setDceNameEdit] = useState('(Click on ICON in DCE list)');\r\n    const [dceFeatures, setDceFeatures] = useState([]);\r\n    const [dceId, setDceId] = useState('');\r\n    const [dceNameList, setDceNameList] = useState([]);\r\n    const [dceDetails, setDceDetails] = useState(null)\r\n    const user = useContext(UserContext);\r\n    const uid = user.uid;\r\n\r\n    console.log(\"user uid in dcelist is: \" +JSON.stringify(user.uid));\r\n\r\n//Get list of dce's from database and show on screen\r\nconst showDceList = async() => {\r\n    let response = pemFirestore.collection('users').doc(uid).collection('DceList');\r\n    let data = await response.get();\r\n    let tempDocs = [];\r\n    let tempNameList = [];\r\n    data.docs.forEach(doc => {\r\n        tempDocs.push({...doc.data(), id: doc.id});\r\n        tempNameList.push(doc.data().name.dceName);\r\n      });\r\n    setDceHtml(tempDocs) ;\r\n    setDceNameList(tempNameList);\r\n}\r\n\r\n//auto trigger showDceList upon first render only\r\nuseEffect(() => {\r\n    showDceList();\r\n  }, [])\r\n\r\n\r\n// collect dce id from clicked button and get data from database so dce can be edited.\r\nconst editDce = (e) => {\r\n    let dce;\r\nconsole.log(\"e is: \"+ e.target.parentElement.parentElement.getAttribute('data-id'));\r\nif(e.target.parentElement.parentElement.getAttribute('data-id')){\r\ndce = e.target.parentElement.parentElement.getAttribute('data-id');\r\n} else{\r\n    dce = e.target.parentElement.getAttribute('data-id');\r\n}\r\nconst dceData = pemFirestore.collection('users').doc(uid).collection('DceList').doc(dce).get()\r\n.then((doc)=>{\r\n    const dceName = doc.data().name.dceName;\r\n    const tempDetails = {details: {grouped: doc.data().grouped, groupFeature: doc.data().groupFeature, nrQuestions: doc.data().nrQuestions}}\r\n    setDceNameEdit(dceName);\r\n    setDceFeatures(doc.data().features)\r\n    setDceId(dce);\r\n    setDceDetails(tempDetails);\r\n})\r\n}\r\n\r\n//delete a dce from database and refresh list\r\nconst deleteDce = (e) => {\r\n    let dce;\r\n    if(e.target.parentElement.parentElement.getAttribute('data-id')){\r\n    dce = e.target.parentElement.parentElement.getAttribute('data-id');\r\n    } else{\r\n        dce = e.target.parentElement.getAttribute('data-id');\r\n    }    pemFirestore.collection('users').doc(uid).collection('DceList').doc(dce).delete().then(() => {\r\n        console.log(\"Documentwith ID\"+dce.id+ \"  successfully deleted!\");\r\n    }).catch((error) => {\r\n        console.error(\"Error removing document: \", error);\r\n    });\r\nshowDceList();\r\n}\r\n\r\n//toggle to show or hide form for new dce\r\n  const showNewDceForm = ()=>{\r\n      if(showNew){\r\n          setShowNew(false)\r\n      }\r\n      else if(!showNew){\r\n          setShowNew(true)\r\n      }\r\n  }\r\n\r\n  //html to show in browser\r\n    return (\r\n             <div>\r\n           {/* <Header/>  */}\r\n        <div className=\"row my-4\">\r\n            <div className=\"listContainer col col-12 col-sm-3\">\r\n           <div className=\" col-auto \">\r\n            <h4><u>DCE list</u></h4>\r\n            <ul>\r\n            {dceHtml&&console.log('dceHtml: '+JSON.stringify(dceHtml))}\r\n\r\n            {dceHtml && dceHtml.map((dce, i)=>{\r\n                return(\r\n                    <div key={i} className=\"\">\r\n                    <h5 className=\"mt-3\"><li className=\"listRuler mb-1\"  data-id={dce.id}> <b>{dce.name.dceName}</b>\r\n                    <hr className=\"ruler\"/> \r\n                    <button className=\"btn btn-sm btn-outline-warning mx-1\" onClick={editDce}><i class=\"material-icons mat-icon mt-1\">edit</i></button>\r\n                    <Link to={{pathname:\"/aspectList/\"+uid+\"/\"+ dce.id, dceFeatures: dce.features, groupFeature: dce.groupFeature, dceNameEdit: dceNameEdit}}>\r\n                    <button className=\"btn btn-sm btn-outline-danger mx-1\" ><i class=\"material-icons mat-icon mt-1\">settings</i></button>\r\n                    </Link>\r\n                    <button className=\"btn  btn-outline-success btn-sm mx-1\" onClick={(e) => { if (window.confirm('Are you sure you wish to delete this DCE?')) deleteDce(e) } }><i class=\"material-icons mat-icon mt-1\">delete_forever</i></button>\r\n                    </li></h5>\r\n                    </div>\r\n                )\r\n                })\r\n            }\r\n        </ul>\r\n</div>\r\n<div className=\"row my-4\">\r\n<div className=\"col-auto  \">\r\n    <h4><u>Create new DCE</u></h4>\r\n    <div> <button className=\"btn btn-sm btn-outline-info\" onClick={showNewDceForm}> new DCE</button>\r\n</div>\r\n{showNew&&<NewDce showDceList={showDceList} showNewDceForm={showNewDceForm} dceNameList={dceNameList} />}\r\n</div>\r\n</div>\r\n</div>\r\n\r\n<div className=\"col scenarioContainer\">\r\n    <ScenarioList dceNameEdit = {dceNameEdit} dceId={dceId} dceFeatures={dceFeatures}  dceDetails={dceDetails}/>\r\n</div>\r\n</div>\r\n\r\n</div>\r\n    )\r\n}\r\n","import React, { useContext, useEffect, useState } from \"react\";\r\nimport Header from './Header';\r\nimport { UserContext } from \"../providers/UserProvider\";\r\nimport { pemAuth, pemFirestore } from \"../firebase/config\";\r\nimport { useParams, HashRouter as Router, Route, Link } from \"react-router-dom\";\r\nimport ResultDce from \"./ResultDce\";\r\n\r\n \r\n \r\n\r\nexport default function Dces() {\r\n    // const CUser = useContext(UserContext);\r\n\r\n    // const [user, setUser] = useState(CUser);\r\n\r\n\r\n    // useEffect(() => {\r\n    //     setUser(pemAuth.currentUser);\r\n    //     })\r\n\r\n    \r\n    \r\n    const [dceHtml, setDceHtml] = useState([]);\r\n    const [showNew, setShowNew] = useState(false);\r\n    const [dceNameEdit, setDceNameEdit] = useState('(Click on ICON in DCE list)');\r\n    const [dceFeatures, setDceFeatures] = useState([]);\r\n    const [dceId, setDceId] = useState('');\r\n    const [dceNameList, setDceNameList] = useState([]);\r\n    const [dceDetails, setDceDetails] = useState([])\r\n    // const {user } = useParams();\r\n    console.log('Params at start dces '+JSON.stringify(useParams()))\r\n    const user = useContext(UserContext);\r\n    const uid = user.uid;\r\n\r\n    console.log(\"user uid in dces is: \" +JSON.stringify(user.uid));\r\n\r\n//Get list of dce's from database and show on screen\r\nconst showDceList = async() => {\r\n    let response = pemFirestore.collection('users').doc(uid).collection('DceList');\r\n    let data = await response.get();\r\n    let tempDocs = [];\r\n    let tempNameList = [];\r\n    data.docs.forEach(doc => {\r\n        tempDocs.push({...doc.data(), id: doc.id});\r\n        tempNameList.push(doc.data().name.dceName);\r\n      });\r\n    setDceHtml(tempDocs) ;\r\n    setDceNameList(tempNameList);\r\n}\r\n\r\n//auto trigger showDceList upon first render only\r\nuseEffect(() => {\r\n    showDceList();\r\n    console.log(\"user uid in dces is: \" +JSON.stringify(user.uid));\r\n\r\n  }, [user])\r\n\r\n\r\n// collect dce id from clicked button and get data from database so dce can be edited.\r\nconst resultDce = (e) => {\r\n    let dce;\r\nconsole.log(\"e is: \"+ e.target.parentElement.parentElement.getAttribute('data-id'));\r\nif(e.target.parentElement.parentElement.getAttribute('data-id')){\r\ndce = e.target.parentElement.parentElement.getAttribute('data-id');\r\n} else{\r\n    dce = e.target.parentElement.getAttribute('data-id');\r\n}\r\nconst dceData = pemFirestore.collection('users').doc(uid).collection('DceList').doc(dce).get()\r\n.then((doc)=>{\r\n    const dceName = doc.data().name.dceName;\r\n    const tempDetails = {details: {grouped: doc.data().grouped, groupFeature: doc.data().groupFeature, nrQuestions: doc.data().nrQuestions}}\r\n    setDceNameEdit(dceName);\r\n    setDceDetails(tempDetails);\r\n    setDceFeatures(doc.data().features)\r\n    setDceId(dce);\r\n    console.log('dceDetails onCreate: '+JSON.stringify(tempDetails))\r\n})\r\n}\r\n\r\n\r\n  //html to show in browser\r\n    return (\r\n             <div>\r\n           {/* <Header/>  */}\r\n        <div className=\"row my-4\">\r\n            <div className=\"listContainer col col-12 col-sm-3\">\r\n           <div className=\" col-auto \">\r\n            <h4><u>DCE list</u></h4>\r\n            <ul>\r\n            {dceHtml && dceHtml.map((dce, i)=>{\r\n                return(\r\n                    <div key={i} className=\"\">\r\n                    <h5 className=\"mt-3\"><li className=\"listRuler mb-1\"  data-id={dce.id}> <b>{dce.name.dceName}</b>\r\n                    <hr className=\"ruler\"/> \r\n                    <Link to={{pathname:\"/app/\"+uid+\"/\"+ dce.id}}>\r\n                    <button className=\"btn btn-sm btn-outline-info mx-1\" ><i class=\"material-icons mat-icon mt-1\">play_circle_outline</i></button>\r\n                    </Link>\r\n                    <button className=\"btn btn-sm btn-outline-danger mx-1\" onClick={resultDce}><i class=\"material-icons mat-icon mt-1\">poll</i></button>\r\n                    </li></h5>\r\n                    </div>\r\n                )\r\n                })\r\n            }\r\n        </ul>\r\n</div>\r\n<div className=\"row my-4\">\r\n<div className=\"col-auto  \">\r\n    <div> \r\n</div>\r\n</div>\r\n</div>\r\n</div>\r\n\r\n<div className=\"col scenarioContainer\">\r\n    <ResultDce  dceDetails={dceDetails} dceNameEdit = {dceNameEdit} dceId={dceId} dceFeatures={dceFeatures} userId={uid} />\r\n</div>\r\n</div>\r\n\r\n</div>\r\n    )\r\n}\r\n","import React, { useContext, useState } from \"react\";\r\nimport { UserContext } from \"../providers/UserProvider\";\r\nimport { pemFirestore } from \"../firebase/config\";\r\nimport { useParams, useLocation} from \"react-router-dom\";\r\n\r\n\r\nexport default function NewAspect({ showAspectList, showNewAspectForm, aspectNameList}) {\r\n\r\n    const [inputList, setInputList] = useState([{ featureName: null, featureValue1: null, featureValue2: null }]);\r\n    const [aspectName, setAspectName] = useState(['name']);\r\n    const [aspectDescr, setAspectDescr] = useState(['descr']);\r\n    const {userId, dceId } = useParams();\r\n\r\n    const user = useContext(UserContext);\r\n    const uid = user.uid;\r\n\r\n \r\n\r\n//helper for aspectNotNull check\r\n  const existsName = (name => aspectName[0].aspectName===name);\r\n\r\n//Check if aspect name is filled in before save. Also check if aspect name is unique\r\n  const aspectNotNull = ()=>{\r\n    if(aspectName[0].aspectName===\"\" || aspectNameList.some(existsName)){\r\n      alert(\"Fill in a unique aspect name\");\r\n      return false;\r\n    }\r\n   \r\n    return true;\r\n  }\r\n\r\n  //Save aspect if all fields are filled in\r\n    const saveAspect = (e)=>{\r\n        e.preventDefault();\r\n        if(aspectNotNull()){\r\n        let aspectColl = pemFirestore.collection('users').doc(userId).collection('DceList').doc(dceId).collection('AspectList');\r\n        aspectColl.add( {aspectName: aspectName[0], aspectDescr: aspectDescr[0]})\r\n        .then((docRef)=>{\r\n              console.log(\"Document written with ID: \", docRef.id);\r\n              aspectColl.doc(docRef.id).collection('Combis').doc('0').set({nr: 0, groupValue: \"\", filters: []})\r\n        })\r\n        .catch((error) => {\r\n            console.error(\"Error adding document: \", error);\r\n        });\r\n        showAspectList();\r\n        showNewAspectForm();\r\n    }\r\n  }\r\n\r\n    // handle name input change\r\n    const handleNameInputChange = (e) => {\r\n        const name = e.target.value;\r\n        const nameList = [...aspectName];\r\n        nameList[0]=name;\r\n        setAspectName(nameList);\r\n    }\r\n    // handle descr input change\r\n    const handleDescrInputChange = (e) => {\r\n      const descr = e.target.value;\r\n      const descrList = [...aspectDescr];\r\n      descrList[0] = descr;\r\n      setAspectDescr(descrList);\r\n  }\r\n\r\n\r\n \r\n  // deletes aspect from database and refreshes list\r\n  const handleRemoveClick = index => {\r\n    const list = [...inputList];\r\n    list.splice(index, 1);\r\n    setInputList(list);\r\n    showAspectList();\r\n  };\r\n \r\n \r\n\r\n\r\n \r\n\r\n  //html to show in browser\r\n  return (\r\n        <div>\r\n            <form className=\"form-inline\">\r\n                <div className=\"form-floating\">\r\n                    <input type=\"text\" className=\"form-control\" name=\"aspectName\"  placeholder=\"Aspect name\" id=\"aspectName\" \r\n                    required onChange={handleNameInputChange}></input>\r\n                    <label htmlFor=\"aspectName\" className=\"block\">Name: </label>\r\n                    </div>\r\n                    <div className=\"form-floating\">\r\n                    <textarea type=\"text\" rows=\"7\" className=\"form-control\" name=\"aspectDescr\"  placeholder=\"Description\" id=\"aspectDescr\" \r\n                    required onChange={handleDescrInputChange}></textarea>\r\n                    <label htmlFor=\"aspectDescr\" className=\"block\">Description: </label>\r\n                    </div>\r\n      <button className=\"btn btn-sm btn-outline-success\" onClick={saveAspect} >Save aspect</button>\r\n          </form>\r\n        </div>\r\n    )\r\n}\r\n","import React, {useState, useEffect} from 'react';\r\nimport { useParams, useLocation} from \"react-router-dom\";\r\nimport useFirestoreLoadResult from '../hooks/useFirestoreLoadResults';\r\n// import '../index.css';\r\n\r\n\r\nexport default function AspectEdit({aspectNameEdit, aspectDescr, aspectFilters, saveFilters, chosenFeatures, setChosenFeatures, handleAddCombi, handleDeleteCombi, aspectsObjs, groupValues, setGroupValues}) {\r\n\r\n    // const [feature, setFeature] = useState('q');\r\n    // const [fValue, setFValue] = useState('h');\r\n    // const [aspects, setAspects] = useState([]);\r\n    const [formValue1, setFormValue1] = useState(null)\r\n    const [formValue2, setFormValue2] = useState(null)\r\n    const [html, setHtml] = useState([]);\r\n    const [fromDb, setFromDb] = useState([]);\r\n    const {userId, dceId } = useParams();\r\n    const location = useLocation();\r\n    const dceFeatures = location.dceFeatures;\r\n    const groupFeature = location.groupFeature;\r\n    const {results} = useFirestoreLoadResult(userId,dceId);\r\n    console.log(\"props from location: \"+JSON.stringify(location));\r\n    console.log(\"aspectNameEdit: \"+ JSON.stringify(aspectNameEdit));\r\n    // console.log(\"props: \"+ JSON.stringify(props));\r\n    console.log(\"aspecteFilters: \"+JSON.stringify(aspectFilters))\r\n\r\n\r\n\r\n\r\n    useEffect(() => {\r\n        let tempResult = [];\r\n        aspectsObjs.forEach((aspect)=>{\r\n            let aspectName = aspect.aspectName;\r\n            let oddsFavor = [];\r\n            let oddsAgainst = [];\r\n            console.log('aspectObj: '+JSON.stringify(aspect));\r\n                let nr = aspect.combis.nr;\r\n\r\n                aspect.combis.filters.forEach(filter=>{\r\n                    const checkValue = (result=>{\r\n                        console.log('forEach filter: '+ JSON.stringify(filter))\r\n                    console.log('result in forEach: '+ JSON.stringify(result))\r\n                    return(filter.fValue===result[filter.fName]&&result.hasOwnProperty(filter.fName))\r\n                    })\r\n                    let tempFavors = results.filter(checkValue);\r\n                    tempFavors.forEach(favor=>{\r\n                        if(oddsFavor.indexOf(favor)===-1){\r\n                            oddsFavor.push(favor);\r\n                        }\r\n                    })\r\n                })\r\n\r\n                })\r\n                return \r\n    }, [aspectsObjs])\r\n\r\n    \r\n    const handleFName = (e)=>{\r\n        e.preventDefault();\r\n        setFormValue1(null);\r\n        console.log(\"SetFormValue null\");\r\n        const { value, id} = e.target;\r\n        const cIndex = e.target.dataset.id;\r\n        console.log(\"handleChosen triggered, target:\"+JSON.stringify(e.target.dataset));\r\n        console.log(\"value is: \"+JSON.stringify(value));\r\n        console.log(\"chosenFeatures before copy: \"+JSON.stringify(chosenFeatures));\r\n        console.log(\"aspectFilter before copy: \"+JSON.stringify(aspectFilters));\r\n        const chosenList = [...chosenFeatures];\r\n        // chosenList[0]['fName'] = value;\r\n        chosenList[cIndex][0]={fName: value};\r\n        // chosenList.push({fName: value});\r\n        console.log(\"chosenList: \"+ JSON.stringify(chosenList));\r\n        setChosenFeatures(chosenList);\r\n    }\r\n\r\n    const handleFValue = (e) =>{\r\n        e.preventDefault();\r\n        setFormValue1(null);\r\n        setFormValue2(null);\r\n        const {value, id } = e.target;\r\n        const cIndex = e.target.dataset.id;\r\n        console.log(\"handleFValue triggered, cIndex = \"+cIndex);\r\n        const chosenList = [...chosenFeatures];\r\n        console.log(\"chosenList: \"+ JSON.stringify(chosenList));\r\n        chosenList[cIndex][0]['fValue'] = value;\r\n        // chosenList[0]={fValue: value};\r\n        console.log(\"chosenList: \"+ JSON.stringify(chosenList));\r\n        setChosenFeatures(chosenList);\r\n    }\r\n    \r\n    const handleGroupValue = (e)=>{\r\n        e.preventDefault();\r\n        const {value, id } = e.target;\r\n        const cIndex = e.target.dataset.id;\r\n        let tempGValues = [...groupValues]\r\n        tempGValues[cIndex]=value\r\n        setGroupValues(tempGValues);\r\n        console.log('handleGroup value: '+value);\r\n        console.log('Group values: '+JSON.stringify(tempGValues));\r\n    }\r\n \r\n\r\n\r\nconst handleSave = (e)=>{\r\n    e.preventDefault();\r\n    const cIndex = e.target.dataset.id;\r\n    console.log('handleSave data-id: '+JSON.stringify(e.target.dataset.id))\r\n    console.log('chosenFeatures at start of handleSave: '+JSON.stringify(chosenFeatures));\r\n    console.log('chosenFeatues[cIndex] at start of handleSave: '+JSON.stringify(chosenFeatures[cIndex]));\r\n    let tempList = [...aspectFilters[cIndex],...chosenFeatures[cIndex]];\r\n    let tempChosen = [...chosenFeatures];\r\n    tempChosen[cIndex] = [];\r\n    console.log('group values: '+JSON.stringify(groupValues))\r\n    if (groupValues[cIndex].length===0){\r\n        alert(\"Select a value for the Group feature before saving\")\r\n    } else{\r\n    saveFilters(cIndex, tempList, tempChosen, groupValues);\r\n    console.log(\"tempList in save: \"+JSON.stringify(tempList))\r\n    console.log(\"tempChosen in save: \"+JSON.stringify(tempChosen))\r\n    // setChosenFeatures(tempChosen);\r\n    setFormValue1(\"\");\r\n    console.log(\"SetFormValue blanc\");\r\n    setFormValue2(\"\");\r\n    }\r\n}\r\n\r\nconst handleDelete = (e, index, cIndex)=>{\r\n    e.preventDefault();\r\n    let tempCIndex = cIndex.toString();\r\n    console.log(\"delete filter with id \"+index);\r\n    console.log(\"delete filter with cIndex \"+tempCIndex);\r\n    let tempFilters = [...aspectFilters[tempCIndex]];\r\n    console.log('tempFilters voor splice: '+JSON.stringify(tempFilters))\r\n    let emptyChosen = [];\r\n    aspectFilters.map(x=>{emptyChosen.push([])});\r\n    tempFilters.splice(index, 1);\r\n    console.log('tempFilters na splice: '+JSON.stringify(tempFilters))\r\n    console.log('emptyChosen na splice: '+JSON.stringify(emptyChosen))\r\n    saveFilters(tempCIndex, tempFilters, emptyChosen, groupValues);\r\n}\r\n\r\n\r\n\r\nuseEffect(() => {\r\n    console.log(\"chosenFeatures in useEffect: \"+JSON.stringify(chosenFeatures));\r\n    console.log(\"aspectFilters in useEffect: \"+JSON.stringify(aspectFilters))\r\n    setFormValue1(\"\");\r\n    // console.log(\"SetFormValue blanc\");\r\n    setFormValue2(\"\");\r\n\r\n    let tempFromDB =[];\r\n    aspectFilters.map((combi, cIndex)=>{\r\n        tempFromDB.push(\r\n           <div> {(cIndex!==0)&&(<h5 className=\"my-5\">\r\n           <button onClick={(e)=>handleDeleteCombi(e,cIndex)} className=\"btn  btn-outline-success btn-sm mx-2\"  > <i class=\"material-icons mat-icon\">delete_forever</i></button>\r\n           combined with: \r\n           </h5>\r\n           )}\r\n           <h5>Select value for group feature - {groupFeature}</h5>\r\n           <label htmlFor=\"groupVal\">Group value\r\n           {console.log('dceFeatures and groupFeature in select: '+JSON.stringify(dceFeatures)+JSON.stringify(groupFeature))}\r\n           {console.log('groupValues: '+JSON.stringify(groupValues))}\r\n<select name=\"groupVal\" id=\"\" className=\"form-select form-select-sm col-md-3  mb-3\" defaultValue=\"\" value={groupValues[cIndex]} data-id={cIndex} onChange={handleGroupValue}>\r\n<option value=\"\" disabled></option>\r\n{dceFeatures&&<option value={dceFeatures.find(x=>x.featureName===groupFeature).featureValue1}>{dceFeatures.find(x=>x.featureName===groupFeature).featureValue1}</option>}\r\n{dceFeatures&&<option value={dceFeatures.find(x=>x.featureName===groupFeature).featureValue2}>{dceFeatures.find(x=>x.featureName===groupFeature).featureValue2}</option>}\r\n</select>\r\n              </label>\r\n          <h5>Saved features and values</h5>\r\n\r\n           </div>\r\n        )\r\n        combi.map((filter, index)=>{\r\n        console.log(\"filter is: \"+JSON.stringify(filter));\r\n        tempFromDB.push(\r\n        <div className=\"my-3\"><div className=\"savedFeatures my-2 mx-3 px-5 py-1 p-3 border rounded\">{filter.fName}</div><span className=\"savedFeatures mx-3 px-5 py-1 border rounded\">{filter.fValue}</span>\r\n            <span>\r\n               <button onClick={(e)=>handleDelete(e,index, cIndex)} className=\"btn  btn-outline-success btn-sm mx-2\"  > <i class=\"material-icons mat-icon\">delete_forever</i></button>\r\n               </span>\r\n          </div>\r\n    ) // end of fromDb\r\n}) // end of combi \r\n{          // add filter button - fromDb pt2\r\n}\r\ntempFromDB.push(\r\n    <div>\r\n          <span>\r\n            <form>\r\n                {console.log('groupFeature: '+groupFeature)}\r\n                {console.log('dceFeatures: '+JSON.stringify(dceFeatures))}\r\n              <label htmlFor='fNames' className=\"col-md-3 col-form-label\">Add filter feature\r\n                  <select className=\"form-select form-select-sm col-md-3  mb-3\" defaultValue=\"\" value={formValue1}  data-id={cIndex} id={0} onChange={handleFName}>\r\n                    {/* <option value=\"\" disabled></option> */}\r\n                      {dceFeatures&&dceFeatures.map((feature,ind) =>{\r\n                          console.log(\"ind is: \"+ind);\r\n                          let optionHtml = feature.featureName;\r\n                          let disabled = \"\";\r\n                          if (feature.featureName===groupFeature){\r\n                              optionHtml = \"\";\r\n                              disabled = \"disabled\"\r\n                          }\r\n                          return (\r\n                            <option value={optionHtml} disabled={disabled}>{optionHtml} </option>\r\n                          )\r\n                      })}\r\n                  </select>\r\n              </label>\r\n              </form>\r\n              {dceFeatures&&<form>\r\n              <label htmlFor=\"fValue\">Filter value\r\n<select name=\"fValue\" id=\"\" className=\"form-select form-select-sm col-md-3  mb-3\" defaultValue=\"\" value={formValue2} data-id={cIndex} onChange={handleFValue}>\r\n<option value=\"\" disabled></option>\r\n{console.log(\"chosenFeatures: \"+JSON.stringify(chosenFeatures))}\r\n{chosenFeatures[cIndex]&& console.log(\"chosenFeatures[cIndex][0]: \"+JSON.stringify(chosenFeatures[cIndex]))}\r\n{chosenFeatures[cIndex][0]&&<option value={dceFeatures.find(x=>x.featureName===chosenFeatures[cIndex][0][\"fName\"]).featureValue1}>{dceFeatures.find(x=>x.featureName===chosenFeatures[cIndex][0][\"fName\"]).featureValue1}</option>}\r\n{chosenFeatures[cIndex][0]&&<option value={dceFeatures.find(x=>x.featureName===chosenFeatures[cIndex][0][\"fName\"]).featureValue2}>{dceFeatures.find(x=>x.featureName===chosenFeatures[cIndex][0][\"fName\"]).featureValue2}</option>}\r\n</select>\r\n              </label>\r\n              </form>}\r\n              </span>\r\n              <button data-id={cIndex} className=\"btn btn-sm btn-outline-info mb-3\" onClick={handleSave}>save filter feature and group value</button>\r\n\r\n              </div>\r\n    ) // end of fromDb pt2\r\n   \r\n}) // end of aspect\r\n    // }\r\n    setFromDb(tempFromDB);\r\n    // setChosenFeatures(aspectFilters);\r\n    return\r\n    \r\n}, [chosenFeatures, groupValues])\r\n   \r\n\r\nuseEffect(() => {\r\n    console.log(\"Rerender choose html\");\r\n    console.log(\"chosenFeatures in choose html: \"+JSON.stringify(chosenFeatures));\r\n    setFormValue2(\"\");\r\n    let tempHtml = [];\r\n    if(aspectNameEdit!=='(Click on ICON in Aspect list)'){\r\n        tempHtml.push(\r\n            <div>\r\n            <form>\r\n              <label htmlFor='fNames' className=\"col-md-3 col-form-label\">Add filter feature\r\n                  <select className=\"form-select form-select-sm col-md-3  mb-3\" defaultValue=\"\" value={formValue1} data-id={0} id={chosenFeatures.length-1} onChange={handleFName}>\r\n                    <option value=\"\" disabled></option>\r\n                      {dceFeatures&&dceFeatures.map((feature,ind) =>{\r\n                          console.log(\"ind is: \"+ind)\r\n                          return (\r\n                            <option value={feature.featureName}>{feature.featureName} </option>\r\n                          )\r\n                      })}\r\n                  </select>\r\n              </label>\r\n              </form>\r\n              {dceFeatures&&<form>\r\n              <label htmlFor=\"fValue\">Filter value\r\n<select name=\"fValue\" id=\"\" className=\"form-select form-select-sm col-md-3  mb-3\" defaultValue=\"\" value={formValue2} data-id={0} onChange={handleFValue}>\r\n<option value=\"\" disabled></option>\r\n{console.log(\"i=\"+chosenFeatures.length-1)}\r\n{console.log(\"chosenFeatures: \"+JSON.stringify(chosenFeatures))}\r\n{chosenFeatures[0][0]&&<option value={dceFeatures.find(x=>x.featureName===chosenFeatures[0][0][\"fName\"]).featureValue1}>{dceFeatures.find(x=>x.featureName===chosenFeatures[0][0][\"fName\"]).featureValue1}</option>}\r\n{chosenFeatures[0][0]&&<option value={dceFeatures.find(x=>x.featureName===chosenFeatures[0][0][\"fName\"]).featureValue2}>{dceFeatures.find(x=>x.featureName===chosenFeatures[0][0][\"fName\"]).featureValue2}</option>}\r\n</select>\r\n              </label>\r\n              </form>}\r\n              <button data-id={'0'} className=\"btn btn-sm btn-outline-info mb-3\" onClick={handleSave}>save filter feature</button>\r\n\r\n              </div>\r\n        )}\r\n        setHtml(tempHtml);\r\n\r\n    return \r\n}, [chosenFeatures])\r\n\r\nlet addCombiButton = [];\r\n   if(aspectNameEdit!=='(Click on ICON in Aspect list)'){\r\n       addCombiButton.push(\r\n        <button className=\"btn btn-sm btn-outline-info my-4\" onClick={handleAddCombi}>add combination feature</button>\r\n        )\r\n}\r\n\r\n    return (\r\n        <div>\r\n            <h4 className=\"mb-1\">Define aspect for <b>{aspectNameEdit}</b></h4>\r\n            <h6 className=\"text-secondary pb-3\">Description: {aspectDescr}</h6>\r\n            {/* Results: {JSON.stringify(results)} */}\r\n            {/* filter results: {JSON.stringify(results.filter(checkValue, featToCheck))}<br/> */}\r\n            {/* dceFeatures: {dceFeatures&&JSON.stringify(dceFeatures)} */}\r\n\r\n     \r\n              {fromDb}\r\n              {fromDb.length===0&&html}\r\n              {/* <button className=\"btn btn-sm btn-outline-info\" onClick={handleSave}>save filter feature</button> */}\r\n              {()=>{ if(aspectNameEdit!=='(Click on ICON in Aspect list)'){return\r\n              <button className=\"btn btn-sm btn-outline-info my-4\" onClick={handleAddCombi}>add combination feature</button>\r\n              }}}\r\n              {fromDb.length>2&&addCombiButton}\r\n\r\n        </div>\r\n    )\r\n}\r\n","import React, { useContext, useEffect, useState } from \"react\";\r\nimport Header from './Header';\r\nimport { UserContext } from \"../providers/UserProvider\";\r\nimport { pemFirestore, pemId } from \"../firebase/config\";\r\nimport NewAspect from \"./NewAspect\";\r\nimport FactorList from \"./FactorList\";\r\nimport AspectEdit from \"./AspectEdit\";\r\nimport { HashRouter as Router, Route, Link } from \"react-router-dom\";\r\nimport { useParams, useLocation} from \"react-router-dom\";\r\n\r\n\r\n\r\n\r\n\r\nexport default function AspectList() {\r\n\r\n    const [aspects, setAspects] = useState([]);\r\n    const [aspectsObjs, setAspectsObjs] = useState([])\r\n    const [chosenFeatures, setChosenFeatures] = useState([]);\r\n    const [aspectFilters, setAspectFilters] = useState([]);\r\n    const [groupValues, setGroupValues] = useState([])\r\n    const [showNew, setShowNew] = useState(false);\r\n    const [aspectNameEdit, setAspectNameEdit] = useState('(Click on ICON in Aspect list)');\r\n    const [aspectDescr, setAspectDescr] = useState('');\r\n    const [dceFeatures, setDceFeatures] = useState([]);\r\n    const [aspectId, setAspectId] = useState('');\r\n    const [aspectNameList, setAspectNameList] = useState([]);\r\n    const [dceDetails, setDceDetails] = useState(null)\r\n    const user = useContext(UserContext);\r\n    const uid = user.uid;\r\n    const {userId, dceId } = useParams();\r\n    const {dceNameEdit} = useLocation();\r\n\r\nconsole.log('location data in aspectList: '+ JSON.stringify(useLocation()))\r\n    console.log(\"user uid in dcelist is: \" +JSON.stringify(user.uid));\r\n\r\n//Get list of dce's from database and show on screen\r\nconst showAspectList = async() => {\r\n    let response = pemFirestore.collection('users').doc(userId).collection('DceList').doc(dceId).collection('AspectList');\r\n    let data = await response.get();\r\n    let tempDocs = [];\r\n    // let tempNameList = [];\r\n    data.docs.forEach(doc => {\r\n        tempDocs.push({...doc.data(), id: doc.id});\r\n        // tempNameList.push(doc.data().name.dceName);\r\n      });\r\n      console.log('Aspects data: '+JSON.stringify(tempDocs));\r\n    setAspects(tempDocs) ;\r\n    // setDceNameList(tempNameList);\r\n}\r\n\r\n//auto trigger showAspectList upon first render only\r\nuseEffect(() => {\r\n    showAspectList();\r\n  }, [dceNameEdit])\r\n\r\n\r\n// collect aspect id from clicked button and get data from database so aspect can be edited.\r\nconst editAspect = (e) => {\r\n    let aspect;\r\n    \r\nconsole.log(\"e is: \"+ e.target.parentElement.parentElement.getAttribute('data-id'));\r\nif(e.target.parentElement.parentElement.getAttribute('data-id')){\r\naspect = e.target.parentElement.parentElement.getAttribute('data-id');\r\n} else{\r\n    aspect = e.target.parentElement.getAttribute('data-id');\r\n}\r\nloadAspectData(aspect);\r\n}\r\n\r\nconst loadAspectData = (aspect)=>{\r\n    let emptyChosen = [];\r\n    const aspectData = pemFirestore.collection('users').doc(userId).collection('DceList').doc(dceId).collection('AspectList').doc(aspect);\r\n    aspectData.get()\r\n    .then((doc)=>{\r\n        const aspectName = doc.data().aspectName;\r\n        console.log(\"docData: \"+JSON.stringify(doc.data()));\r\n        let combis = [];\r\n        let objCombis =[];\r\n        let tempGValues = [];\r\n        aspectData.collection('Combis').get()\r\n        .then((snapshot)=>{\r\n            snapshot.docs.forEach(snap=>{\r\n                console.log(\"snap: \"+JSON.stringify(snap.data().filters));\r\n             combis.push(snap.data().filters);\r\n             objCombis.push({aspectName: aspectName, combis: {nr: snap.data().nr, groupValue: snap.data().groupValue, filters: snap.data().filters}});\r\n             emptyChosen.push([]);\r\n             tempGValues.push(snap.data().groupValue)\r\n            })\r\n            console.log(\"objCombis: \"+JSON.stringify(objCombis));\r\n            console.log(\"emptyChosen: \"+JSON.stringify(emptyChosen));\r\n            console.log(\"tempGValues: \"+JSON.stringify(tempGValues));\r\n            setAspectDescr(doc.data().aspectDescr);\r\n            setGroupValues(tempGValues);\r\n            setAspectsObjs(objCombis);\r\n            setAspectFilters(combis);\r\n            setChosenFeatures(emptyChosen);\r\n        })\r\n        setAspectNameEdit(aspectName);\r\n        setAspectId(aspect);\r\n    })    \r\n}\r\n\r\nconst saveFilters = (cIndex, filters, emptyChosen, groupValues)=>{\r\n    console.log('params: userId: '+ userId+' dceId: '+dceId+ ' aspectId: '+aspectId+ ' cIndex: '+cIndex);\r\n    console.log('cINdex: '+cIndex+ 'filters: '+ JSON.stringify(filters)+' emptyChosen: '+JSON.stringify(emptyChosen));\r\n    const aspectRef = pemFirestore.collection('users').doc(userId).collection('DceList').doc(dceId).collection('AspectList').doc(aspectId).collection('Combis').doc(cIndex);\r\n    aspectRef.update({filters: filters, groupValue: groupValues[cIndex]})\r\n.then(() => {\r\n    let tempFilters = [...aspectFilters];\r\n    tempFilters[cIndex] = filters;\r\n    setAspectFilters(tempFilters);\r\n    setChosenFeatures(emptyChosen);\r\n    console.log(\"Document successfully updated!\");\r\n})\r\n.catch((error) => {\r\n    // The document probably doesn't exist.\r\n    console.error(\"Error updating document: \", error);\r\n});\r\n}\r\n\r\nconst handleAddCombi = async()=>{\r\n    let response = pemFirestore.collection('users').doc(userId).collection('DceList').doc(dceId).collection('AspectList').doc(aspectId).collection('Combis').orderBy('nr', 'asc');\r\n    response.get()\r\n    .then((data)=>{console.log('data in handleAddCombi: '+JSON.stringify(data.docs));\r\n    let seqNr=0;\r\n    for(let i=0; i<data.docs.length; i++){\r\n        if(data.docs[i].data().nr!==seqNr){\r\n            console.log(\"doc nr !== seqNr, seqNr is: \"+seqNr + \"doc id is: \"+ data.docs[i].data().nr);\r\n            setCombi(seqNr);\r\n            return;\r\n        }\r\n        else  {\r\n            console.log(\"doc nr == seqNr, seqNr is: \"+seqNr + \"doc id is: \"+ data.docs[i].data().nr);\r\n            seqNr +=1;\r\n            if(i===data.docs.length-1){\r\n                console.log('Last doc, i===length');\r\n                setCombi(seqNr);\r\n            }\r\n        }\r\n    }\r\n})\r\n}\r\n\r\n\r\nconst setCombi = (seqNr)=>{\r\n    pemFirestore.collection('users').doc(userId).collection('DceList').doc(dceId).collection('AspectList').doc(aspectId).collection('Combis').doc(seqNr.toString())\r\n    .set({nr: seqNr, groupValue: \"\", filters: []})\r\n    .then(()=>{\r\n        console.log('combi added');\r\n        loadAspectData(aspectId);\r\n    })\r\n    .catch((error)=>{\r\n        console.log('Error adding combi', error);\r\n    })\r\n}\r\n\r\n\r\nconst handleDeleteCombi = (e, cIndex)=>{\r\n    pemFirestore.collection('users').doc(userId).collection('DceList').doc(dceId).collection('AspectList').doc(aspectId).collection('Combis').doc(cIndex.toString())\r\n    .delete().then(() => {\r\n        console.log(\"Combination successfully deleted!\");\r\n        loadAspectData(aspectId);\r\n    }).catch((error) => {\r\n        console.error(\"Error removing document: \", error);\r\n    });        \r\n}\r\n\r\n//delete a aspect from database and refresh list\r\nconst deleteAspect = (e) => {\r\n    let aspect;\r\n    if(e.target.parentElement.parentElement.getAttribute('data-id')){\r\n    aspect = e.target.parentElement.parentElement.getAttribute('data-id');\r\n    } else{\r\n        aspect = e.target.parentElement.getAttribute('data-id');\r\n    }    \r\n    let aspectRef = pemFirestore.collection('users').doc(userId).collection('DceList').doc(dceId).collection('AspectList').doc(aspect);\r\n    aspectRef.collection('Combis').get()\r\n    .then((docs)=>{\r\n        docs.forEach(doc=>{\r\n            aspectRef.collection('Combis').doc(doc.id).delete()\r\n            .then(()=>{console.log('Combi with ID '+doc.id+ ' deleted')})\r\n        })\r\n    })\r\n    .then(()=>{\r\n        console.log(\"Combis deleted\");\r\n        aspectRef.delete()\r\n    .then(() => {\r\n        console.log(\"Document with ID\"+aspect+ \"  successfully deleted!\");\r\n    }).catch((error) => {\r\n        console.error(\"Error removing document: \", error);\r\n    });\r\n    if(aspect===aspectId){\r\n        setAspectId('');\r\n        setAspectDescr('');\r\n        setAspectNameEdit('(Click on ICON in Aspect list)');\r\n        setAspectFilters([]);\r\n        setChosenFeatures([]);    \r\n    }\r\nshowAspectList();\r\n})\r\n}\r\n//toggle to show or hide form for new aspect\r\n  const showNewAspectForm = ()=>{\r\n      if(showNew){\r\n          setShowNew(false)\r\n      }\r\n      else if(!showNew){\r\n          setShowNew(true)\r\n      }\r\n  }\r\n\r\n  //html to show in browser\r\n    return (\r\n             <div>\r\n           {/* <Header/>  */}\r\n        <div className=\"row my-4\">\r\n            <div className=\"listContainer col col-12 col-sm-3\">\r\n           <div className=\" col-auto \">\r\n            <h4><u>Aspect list</u></h4>\r\n            <ul>\r\n            {aspects && aspects.map((aspect, i)=>{\r\n                return(\r\n                    <div key={i} className=\"\">\r\n                    <h5 className=\"mt-3\"><li className=\"listRuler mb-1\"  data-id={aspect.id}> <b>{aspect.aspectName}</b>\r\n                    <hr className=\"ruler\"/> \r\n                    <button className=\"btn btn-sm btn-outline-warning\" onClick={editAspect}><i class=\"material-icons mat-icon\">edit</i></button>\r\n                    <button className=\"btn  btn-outline-success btn-sm mx-2\" onClick={deleteAspect}><i class=\"material-icons mat-icon\">delete_forever</i></button>\r\n                    {/* <Link to={{pathname:\"/AspectEdit/\"+uid+\"/\"+ aspect.id}}>\r\n                    <button className=\"btn btn-sm btn-outline-warning\" ><i class=\"material-icons mat-icon mt-1\">settings</i></button>\r\n                    </Link> */}\r\n                    </li></h5>\r\n                    </div>\r\n                )\r\n                })\r\n            }\r\n        </ul>\r\n</div>\r\n<div className=\"row my-4\">\r\n<div className=\"col-auto  \">\r\n    <h4><u>Create new Aspect</u></h4>\r\n    <div> <button className=\"btn btn-sm btn-outline-info\" onClick={showNewAspectForm}> new Aspect</button>\r\n</div>\r\n{showNew&&<NewAspect dceId={dceId} showAspectList={showAspectList} showNewAspectForm={showNewAspectForm} aspectNameList={aspectNameList} />}\r\n</div>\r\n</div>\r\n</div>\r\n\r\n<div className=\"col scenarioContainer\">\r\n    <AspectEdit aspectNameEdit={aspectNameEdit} aspectDescr={aspectDescr} aspectFilters={aspectFilters} saveFilters={saveFilters} chosenFeatures={chosenFeatures} setChosenFeatures={setChosenFeatures} handleAddCombi={handleAddCombi} handleDeleteCombi={handleDeleteCombi} aspectsObjs={aspectsObjs} groupValues={groupValues} setGroupValues={setGroupValues}/>\r\n</div>\r\n</div>\r\n\r\n</div>\r\n    )\r\n}\r\n","import React, { useContext } from \"react\";\r\n// import { Router } from \"@reach/router\";\r\nimport { HashRouter as Router, Route, Switch } from \"react-router-dom\";\r\nimport App from \"../App\";\r\nimport SignIn from \"./SignIn\";\r\nimport SignUp from \"./SignUp\";\r\nimport { UserContext } from \"../providers/UserProvider\";\r\nimport PasswordReset from \"./PasswordReset\";\r\nimport DceList from \"./DceList\";\r\nimport Dces from \"./Dces\";\r\nimport AspectList from \"./AspectList\";\r\n\r\nfunction Application() {\r\n  const user = useContext(UserContext);\r\n  return (\r\n        user ?\r\n        <Switch>\r\n          <Router>\r\n            <Route exact path=\"/\" ><DceList /></Route>\r\n            <Route exact path=\"/dces\" ><Dces /></Route>\r\n            <Route exact path=\"/results\" ><Dces /></Route>\r\n            <Route path=\"/aspectList/:userId/:dceId\" exact component={()=> <AspectList/>} />\r\n            <Route path=\"/app/:userId/:dceId\" exact component={()=> <App/>} />\r\n        </Router>\r\n      </Switch>\r\n      :\r\n      <Switch>\r\n        <Router>\r\n          <Route exact path=\"/signUp\" > <SignUp/></Route>\r\n          <Route exact path=\"/\" > <SignIn  /></Route>\r\n          <Route exact path=\"/passwordReset\" > <PasswordReset /> </Route>\r\n          <Route exact path=\"/dces\" ><SignIn /></Route>\r\n          <Route exact path=\"/results\" ><SignIn /></Route>\r\n          <Route path=\"/app/:userId/:dceId\" exact component={()=> <App/>} />\r\n\r\n        </Router>\r\n      </Switch>\r\n  );\r\n}\r\nexport default Application;","import  React, { useEffect, useState, useContext } from \"react\";\r\nimport { Link, withRouter } from \"react-router-dom\";\r\nimport {pemAuth} from \"../firebase/config\";\r\nimport { UserContext } from \"../providers/UserProvider\";\r\nimport logo from \"../img/pem50.png\"\r\n\r\n\r\n\r\nfunction Navigation(props) {\r\n    const CUser = useContext(UserContext);\r\n\r\n    const [user, setUser] = useState(CUser);\r\n\r\n\r\n    useEffect(() => {\r\n        setUser(pemAuth.currentUser);\r\n        })\r\n\r\n    \r\n \r\n\r\n  return (\r\n    <div className=\"navigation\">\r\n      <nav class=\"navbar navbar-expand navbar-dark bg-dark\">\r\n        <div class=\"container\">\r\n          <Link class=\"navbar-brand\" to=\"/\">\r\n            <img src={logo} width='35px' height='30px' />\r\n                 </Link>\r\n\r\n          <div>\r\n            <ul class=\"navbar-nav ml-auto\">\r\n              <li\r\n                class={`nav-item  ${\r\n                  props.location.pathname === \"/\" ? \"active\" : \"\"\r\n                }`}\r\n              >\r\n                <Link class=\"nav-link\" to=\"/\">\r\n                  Develop\r\n                </Link>\r\n              </li>\r\n              <li\r\n                class={`nav-item  ${\r\n                  props.location.pathname === \"/dces\" ? \"active\" : \"\"\r\n                }`}\r\n              >\r\n                <Link class=\"nav-link\" to=\"/dces\">\r\n\r\n                 Run/Results\r\n                </Link>\r\n              </li>\r\n              <li className=\"nav-item\">\r\n          <Link to=\"/\" className=\"nav-link\" onClick = {() => {pemAuth.signOut()}}>Sign out</Link>\r\n        </li>\r\n            </ul>\r\n          </div>\r\n        </div>\r\n      </nav>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default withRouter(Navigation);","export default \"data:image/png;base64,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\"","import React, { useContext }  from \"react\";\r\nimport { HashRouter as Router, Route, Switch } from \"react-router-dom\";\r\nimport Nav from \"./Nav\";\r\nimport ResearchApp from \"../ResearchApp\";\r\nimport ResearchDce from \"../ResearchDce\";\r\nimport Dces from \"./Dces\";\r\nimport App from \"../App\";\r\nimport AspectEdit from \"./AspectEdit\";\r\nimport AspectList from \"./AspectList\";\r\nimport UserProvider, { UserContext } from \"../providers/UserProvider\";\r\nimport DceList from \"./DceList\";\r\nimport SignIn from \"./SignIn\";\r\nimport SignUp from \"./SignUp\";\r\nimport PasswordReset from \"./PasswordReset\";\r\nimport Application from \"./Application\";\r\n\r\n\r\n\r\nfunction MainApp() {\r\n  const user = useContext(UserContext);\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <Router>\r\n        <Nav />\r\n        <UserProvider>\r\n       <Application/>\r\n        {/* <Switch>\r\n          <Route path=\"/\" exact component={() => <DceList />} />\r\n          <Route path=\"/dces\" exact component={() => <ResearchDce />} />\r\n          <Route path=\"/app/:userId/:dceId\" exact component={()=> <App/>} /> */}\r\n          {/* <Route path=\"/AspectEdit/:userId/:dceId\" exact component={()=> <AspectEdit/>} /> */}\r\n          {/* <Route path=\"/aspectList/:userId/:dceId\" exact component={()=> <AspectList/>} />\r\n          <Route path=\"/results\" exact component={() => <Dces />} />\r\n        </Switch>\r\n        \r\n        <Switch>\r\n        <Router>\r\n          <Route exact path=\"/signUp\" > <SignUp/></Route>\r\n          <Route exact path=\"/\" > <SignIn  /></Route>\r\n          <Route exact path=\"/passwordReset\" component={()=> <PasswordReset  />}/> \r\n                \r\n        </Router>\r\n      </Switch> */}\r\n        </UserProvider>\r\n\r\n      </Router>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default MainApp;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './css/bootstrap.css';\nimport './css/materialize.css';\nimport './index.css';\nimport App from './App';\nimport ResearchApp from './ResearchApp';\nimport MainApp from './comps/MainApp';\n\nReactDOM.render(\n  <React.StrictMode>\n    {/* <App /> */}\n    <MainApp />\n    {/* <ResearchApp /> */}\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}