{"version":3,"sources":["firebase/config.js","providers/UserProvider.jsx","comps/main/Nav.js","img/pem50.png","comps/app/Fab.js","comps/app/Option.js","comps/app/MenuTabs.js","comps/app/Modals.js","comps/app/PcView.js","comps/app/StartForm.js","firebase/useFirestoreScenarios.js","comps/result/useSetAspectObjs.js","comps/result/useGetResultHtml.js","firebase/useFirestoreLoadResults.js","comps/result/ResultDce.js","comps/app/ParticipantResults.js","comps/app/DotFunctions.js","comps/app/ScenarioFunctions.js","comps/app/App.js","comps/app/useSaveResult.js","comps/main/SignIn.js","comps/main/SignUp.js","comps/main/PasswordReset.js","comps/dce/handleDInputs.js","comps/dce/useNewDceHtml.js","comps/dce/NewDce.js","firebase/useStorage.js","comps/dce/ProgressBar.js","comps/dce/UploadForm.js","comps/dce/useNewScenarioHtml.js","comps/dce/NewScenario.js","comps/dce/useShowScList.js","comps/dce/ScenarioList.js","comps/dce/useShowDceList.js","comps/dce/useGetDceDetails.js","comps/dce/DceList.js","comps/dce/Dces.js","comps/result/handleAInputs.js","comps/result/NewAspect.js","comps/result/AspectEdit.js","comps/result/useAspectEditHtml.js","comps/result/useGetAspectList.js","comps/result/List.js","comps/result/HandleAddDelete.js","comps/result/AspectList.js","comps/main/Application.js","comps/main/MainApp.js","index.js"],"names":["firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","pemStorage","storage","pemFirestore","firestore","pemAuth","FieldValue","serverTimestamp","FieldPath","documentId","auth","provider","GoogleAuthProvider","signInWithGoogle","signInWithPopup","generateUserDocument","user","additionalData","a","userRef","doc","uid","get","exists","email","displayName","photoURL","set","console","error","getUserDocument","userDocument","data","UserContext","createContext","UserProvider","state","componentDidMount","onAuthStateChanged","userAuth","setState","log","this","Provider","value","props","children","Component","withRouter","useContext","useState","setLoggedInName","useEffect","className","to","src","width","height","alt","location","pathname","onClick","signOut","Fab","href","style","fontSize","Option","handleClick","sc1","sc2","shownSc","ageGender","choiceValue","setChoiceValue","fValues1","fValues","fValues2","cValue","pref","nonPref","scText","scImg","MenuTabs","dceDescr","index","setIndex","setValue","styles","tabs","background","label","AppBar","position","color","Tabs","indicatorColor","textColor","variant","onChange","event","newValue","Tab","enableMouseEvents","onChangeIndex","Modals","id","data-id","scExpl","length","PcView","StartForm","nrQuestions","setStarted","handleAGChoice","htmlFor","options","name","option","useFirestoreScenarios","dceId","scenarios","setScenarios","unsub","collection","onSnapshot","snap","documents","forEach","push","useSetAspectObjs","userId","details","dceFeatures","aspectObjs","setAspectObjs","tempAspectObjs","then","querySnapshot","aspectName","aspectDescr","snapshot","tempFilters","tempFilter","favorFilters","againstFilters","filters","newFavorFilter","fName","groupFeature","fValue","groupValue","age","ageFilter","gender","genderFilter","newAgainstValue","feature","i","featureName","featureValue1","featureValue2","newAgainstFilter","newTempObjs","findIndex","obj","catch","err","useGetResultHtml","results","resultHtml","setResultHtml","tempResult","aspectObj","oddsFavor","oddsAgainst","combis","combi","filter","result","passesAllFilters","favFilter","hasOwnProperty","favor","indexOf","againstFilter","against","prob","graphProb","Math","abs","clNames","graphReverse","barClasses","getBarClasses","role","aria-valuenow","aria-valuemin","aria-valuemax","class","toFixed","tempClNames","useFirestoreLoadResult","setResults","ResultDce","dceDetails","ParticipantResults","resultList","dceNameEdit","grouped","GetRandomANr","maxNr","prevRandomA","setPrevRandomA","usedNrsA","randNrA","tempRandNrA","floor","random","includes","GetUnusedRndNrs","randNrB","tempRandNrB","RandomNrA","RandomNrB","App","answerList","setAnswerList","setResultList","setAgeGender","qIndex","setQIndex","done","setDone","todo","setTodo","setSc1","setSc2","setNrQuestions","isGrouped","setIsGrouped","setDceDescr","setDceFeatures","setDceDetails","setDceNameEdit","finished","setFinished","started","setError","useParams","M","AutoInit","tempListA","settingScenarios","dones","todos","pop","calcDots","ScenarioA","ScenarioB","getRandomScenarios","scenarioA","altnr","find","sc","getGroupedScenarios","containsEmpty","map","Object","values","x","tempGrouped","features","tempDetails","descr","dceName","dot","setDots","initialRender","useRef","current","collRef","tempResultList","answer","add","useSaveResult","tempAgeGender","SignIn","setEmail","password","setPassword","onChangeHandler","currentTarget","type","placeholder","preventDefault","signInWithEmailAndPassword","signInWithEmailAndPasswordHandler","SignUp","setDisplayName","createUserWithEmailAndPasswordHandler","createUserWithEmailAndPassword","PasswordReset","emailHasBeenSent","setEmailHasBeenSent","action","sendPasswordResetEmail","setTimeout","sendResetEmail","handleInputD","e","currentList","currentName","target","nameList","useNewDceHtml","inputProps","groupProps","miscProps","handleNameInputChange","handleDescrInputChange","handleInputChange","handleRemoveClick","handleNrQuestionsInput","inputList","setGroupValue","groupChecked","handleCheckbox","handleAddClick","saveDce","dceHtml","setDceHtml","tempHtml","required","rows","NewDce","showNewDceForm","dceNameList","setDceListChanged","setInputList","setDceName","setGroupChecked","featuresNotNull","item","alert","existsName","descrList","list","splice","nrQ","nrString","Number","checked","every","some","nrFeatures","docRef","useStorage","file","progress","setProgress","url","setUrl","storageRef","ref","put","on","percentage","bytesTransferred","totalBytes","getDownloadURL","ProgressBar","setFile","scNr","creatUrl","useCallback","UploadForm","types","selected","files","useNewScenarioHtml","dceProps","scProps","handleProps","chosen","setChosen","setIsSaved","isSaved","handleChosen","handleSave","handleEntry","handleCreateAlt","scenarioHtml","setScenarioHtml","chosenList","defaultValue","isDisabled","NewScenario","setScNr","handleAddScenario","getAltFValues","fValueList","newFeatValue","groupFeat","groupFeatValue","altFValueList","fieldsComplete","featuresComplete","textOrImageComplete","toString","update","seqNr","nr","newChosenList","useShowScList","scListChanged","scList","setScList","orderBy","tempDocs","docs","ScenarioList","setScListChanged","response","altSc","detailData","editSc","parentElement","getAttribute","clipText","window","navigator","clipboard","writeText","confirm","scx","delete","deleteSc","useShowDceList","dceListChanged","setDceNameList","tempNameList","useGetDceDetails","setDceId","dce","DceList","showNew","setShowNew","dceSelectEvent","setDceSelectEvent","deleteDce","Dces","handleInputA","NewAspect","setShowAspectsFlag","showNewAspectForm","setAspectName","setAspectDescr","aspectColl","AspectEdit","aspectProps","editFunctions","editProps","filterSaved","setFilterSaved","useLocation","history","useHistory","saveFilters","setAgeGenderValues","setGroupValues","setChosenFeatures","handleAddCombi","handleDeleteCombi","aspectId","aspectNameEdit","aspectFilters","groupValues","chosenFeatures","ageGenderValues","undefined","fromDb","handleDelete","handleGroupValue","handleFName","handleFValue","handleAgeGenderValue","setFromDb","helperArray","ageOptions","genderOptions","tempFromDB","cIndex","c","ind","optionHtml","isClearable","useAspectEditHtml","tempCIndex","emptyChosen","tempGValues","tempSavedList","dataset","tempList","tempChosen","tempAgeGenderValues","addCombiButton","useGetAspectList","showAspectsFlag","aspects","setAspects","List","editAspect","deleteAspect","aspect","handleAddCombiS","setCombi","AspectList","setAspectFilters","setAspectNameEdit","setAspectId","loadAspectData","aspectData","aspectRef","Application","exact","path","component","MainApp","Nav","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.c9df1342.chunk.js","sourcesContent":["import firebase from 'firebase/app';\r\nimport 'firebase/storage';\r\nimport 'firebase/firestore';\r\nimport 'firebase/auth';\r\n\r\n \r\n // Firebase configuration file\r\n \r\n var firebaseConfig = {\r\n    apiKey: \"AIzaSyDkuqUfQCo8w_7OWogV44gsGLzaE-yEvX4\",\r\n    authDomain: \"pem-firestore.firebaseapp.com\",\r\n    projectId: \"pem-firestore\",\r\n    storageBucket: \"pem-firestore.appspot.com\",\r\n    messagingSenderId: \"528017814946\",\r\n    appId: \"1:528017814946:web:f8fab7864531498a146efb\"\r\n  };\r\n  // Initialize Firebase\r\n  firebase.initializeApp(firebaseConfig);\r\n\r\n \r\nconst pemStorage = firebase.storage();\r\nconst pemFirestore = firebase.firestore();\r\nconst timestamp = firebase.firestore.FieldValue.serverTimestamp;\r\nconst pemId = firebase.firestore.FieldPath.documentId;\r\nconst pemAuth = firebase.auth();\r\nconst provider = new firebase.auth.GoogleAuthProvider();\r\n\r\nexport const signInWithGoogle = () => {\r\n  pemAuth.signInWithPopup(provider);\r\n};\r\nexport const generateUserDocument = async (user, additionalData) => {\r\n  if (!user) return;\r\n\r\n  const userRef = pemFirestore.doc(`users/${user.uid}`);\r\n  const snapshot = await userRef.get();\r\n\r\n  if (!snapshot.exists) {\r\n    const { email, displayName, photoURL } = user;\r\n    try {\r\n      await userRef.set({\r\n        displayName,\r\n        email,\r\n        photoURL,\r\n        ...additionalData\r\n      });\r\n    } catch (error) {\r\n      console.error(\"Error creating user document\", error);\r\n    }\r\n  }\r\n  return getUserDocument(user.uid);\r\n};\r\n\r\nconst getUserDocument = async uid => {\r\n  if (!uid) return null;\r\n  try {\r\n    const userDocument = await pemFirestore.doc(`users/${uid}`).get();\r\n\r\n    return {\r\n      uid,\r\n      ...userDocument.data()\r\n    };\r\n  } catch (error) {\r\n    console.error(\"Error fetching user\", error);\r\n  }\r\n};\r\n\r\nexport { pemStorage, pemFirestore, timestamp, pemAuth, pemId };","import React, { Component, createContext } from \"react\";\r\nimport { pemAuth, generateUserDocument } from '../firebase/config';\r\n\r\nexport const UserContext = createContext({ user: null });\r\n\r\nclass UserProvider extends Component {//Component to provide username via Context if user is logged in\r\n    state = {\r\n      user: null\r\n    };\r\n  \r\n        \r\n    componentDidMount = async () => {\r\n      pemAuth.onAuthStateChanged(async userAuth => {\r\n        const user = await generateUserDocument(userAuth);\r\n        this.setState({ user });\r\n        console.log(\"User logged in\");\r\n      });\r\n  \r\n  \r\n    };\r\n  \r\n    render() {\r\n      const { user } = this.state;\r\n  \r\n      return (\r\n        <UserContext.Provider value={user}>\r\n          {this.props.children}\r\n        </UserContext.Provider>\r\n      );\r\n    }\r\n  }\r\n  \r\n  export default UserProvider;","import  React, { useContext, useState, useEffect } from \"react\";\r\nimport { Link, withRouter } from \"react-router-dom\";\r\nimport {pemAuth} from \"../../firebase/config\";\r\nimport logo from \"../../img/pem50.png\"\r\nimport { UserContext } from \"../../providers/UserProvider\";\r\n\r\n\r\n\r\nfunction Navigation(props) {\r\n     //Nav component with menu items\r\n     const user = useContext(UserContext);\r\n    // const displayName = user.displayName;\r\n const [loggedInName, setLoggedInName] = useState('');\r\n\r\n    useEffect(() => {\r\n      let displayName;\r\n      if(user){\r\n      displayName = user.displayName\r\n      setLoggedInName(displayName);\r\n      }\r\n      else {displayName=''}\r\n    }, [user])\r\n\r\n  return (\r\n    <div className=\"navigation\">\r\n      <nav className=\"navbar navbar-expand navbar-dark bg-dark\">\r\n        <div className=\"container\">\r\n          <Link className=\"navbar-brand\" to=\"/\">\r\n            <img src={logo} width='35px' height='30px' alt=\"PEM logo\" />\r\n          </Link>\r\n          <div>\r\n            <ul className=\"navbar-nav ml-auto\">\r\n              <li key=\"0\"\r\n                className={`nav-item  ${\r\n                  props.location.pathname === \"/\" ? \"active\" : \"\"\r\n                }`}>\r\n                <Link className=\"nav-link\" to=\"/\">\r\n                  Develop\r\n                </Link>\r\n              </li>\r\n              <li key=\"1\"\r\n                className={`nav-item  ${\r\n                  props.location.pathname === \"/dces\" ? \"active\" : \"\"\r\n                }`}>\r\n                <Link className=\"nav-link\" to=\"/dces\">\r\n                 Run/Results\r\n                </Link>\r\n              </li>\r\n              {user? <li key=\"2\" className=\"nav-item\">\r\n          <Link to=\"/\" className=\"nav-link\" onClick = {() => {pemAuth.signOut()}}>Sign out ({user.displayName})</Link>\r\n        </li>\r\n        : <li key=\"2\" className=\"nav-item\">\r\n          <Link to=\"/\" className=\"nav-link\" to=\"/\">Sign in</Link>\r\n        </li>}\r\n            </ul>\r\n          </div>\r\n        </div>\r\n      </nav>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default withRouter(Navigation);","export default \"data:image/png;base64,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\"","const Fab = () => {\r\n\t//Fixed action button for additional explanation during dce\r\n    return ( \r\n        <div className=\"outtro\">\r\n\t\t\t<div className=\"fixed-action-btn\">\r\n\t\t\t\t<a href=\"#modal1\" className=\" modal-trigger btn-floating red darken-2\">\r\n\t\t\t\t\t<i className=\"material-icons mat-icon\" style={{fontSize: '140%'}} >help_outline</i></a>\r\n\t\t\t</div>\r\n\t\t</div>\r\n     );\r\n}\r\n \r\nexport default Fab;","import { useState, useEffect } from \"react\";\r\n\r\nconst Option = ({handleClick, sc1, sc2, value, shownSc, ageGender}) => {\r\n//Component that contains option details and feeds back result of choice\r\n\r\nconst [choiceValue, setChoiceValue] = useState({})\r\n//sets choicevalue depending on choice made during experiment\r\n    useEffect(() => {\r\n      if(sc1&&sc2){\r\n      let fValues1 = sc1.data.fValues;\r\n      let fValues2 = sc2.data.fValues;\r\n      let cValue = null;\r\n      if(value==='A'){\r\n      cValue = {pref: {...fValues1, ...ageGender}, nonPref: {...fValues2, ...ageGender}}\r\n      }\r\n      if(value==='B'){\r\n        cValue = {pref: {...fValues2, ...ageGender}, nonPref: {...fValues1, ...ageGender}}\r\n      }\r\n      setChoiceValue(cValue);\r\n      }\r\n    }, [sc1, sc2, ageGender, value])\r\n    \r\n    //Shows text and images on the screen\r\n    return ( \r\n        <div className=\"swiper-slide choose-btn\">\r\n\t\t\t\t  <div className=\"s10 \">\r\n            {shownSc&&<div className=\"choice-container\">\r\n            <p>{shownSc.data.scText}</p>\r\n            <img className = \"swipe-img choice-container\" src={shownSc.data.scImg} alt=\"\"/>\r\n                  </div>}\r\n           </div>\r\n\t\t\t\t\t{shownSc&&<button value={value} onClick={()=>{handleClick(choiceValue)}} className=\"btn blue darken-2 waves-effect waves-light z-depth-2\">Choose</button>}\r\n        </div>\r\n     );\r\n}\r\n \r\nexport default Option;","import React, {useState} from 'react';\r\nimport Tabs from '@material-ui/core/Tabs';\r\nimport Tab from '@material-ui/core/Tab';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport SwipeableViews from 'react-swipeable-views';\r\nimport '../../index.css';\r\nimport Option from './Option';\r\n\r\n  const MenuTabs = ({handleClick, sc1, sc2, dceDescr, ageGender})=>{\r\n//Component for displaying choices in swipable tabs for smartphones\r\n\r\n    const [index, setIndex] = useState(0);\r\n    const [value, setValue] = useState(0);\r\n    \r\n\r\n  const handleChange = (event, newValue) => {\r\n    setValue(newValue)\r\n    setIndex(\r\n      newValue,\r\n    );\r\n    };\r\n\r\n  const handleChangeIndex = (index) => {\r\n    setIndex(\r\n      index,\r\n    );\r\n    setValue (index);\r\n  };\r\n\r\n  const styles = {\r\n    tabs: {\r\n      background: '#fff',\r\n      },\r\n    label: {\r\n       fontSize: '100%',\r\n      }}\r\n\r\n    return (\r\n      <div className=\"swiper-container\">\r\n          <AppBar position=\"static\" color=\"default\">\r\n            <Tabs indicatorColor=\"primary\" textColor=\"primary\" background=\"primary\"\r\n              variant=\"fullWidth\" value={value} onChange={handleChange} style={styles.tabs}>\r\n              <Tab style={styles.label} label=\"option n°1\" />\r\n              <Tab style={styles.label} label=\"option n°2\" />\r\n            </Tabs>\r\n          </AppBar>\r\n        <h5 className=\"text-secondary mt-1 mb-0 text-center\">{dceDescr}</h5>\r\n\r\n        <SwipeableViews enableMouseEvents index={index} onChangeIndex={handleChangeIndex}>\r\n          <div className=\"slide\">\r\n            {/* Displays first option  */}\r\n             <div className=\"innerslide\" >\r\n             <Option handleClick={handleClick} sc1={sc1} sc2={sc2} value='A' shownSc={sc1} ageGender={ageGender}/>\r\n             </div> \r\n              </div>\r\n          <div className=\"slide\">\r\n            {/* Displays second option */}\r\n            <div className=\"innerslide\" >\r\n              <Option handleClick={handleClick} sc1={sc1} sc2={sc2} value='B' shownSc={sc2} ageGender={ageGender}/>\r\n             </div> \r\n          </div>\r\n        </SwipeableViews>\r\n      </div>\r\n    );\r\n  }\r\n\r\n\r\nexport default MenuTabs;","\r\nconst Modals = ({sc1, sc2}) => {\r\n//Component for displaying modals\r\n\r\n    return ( \r\n        <div>\r\n            \r\n         {/* //Modal for showing additional explanation during dce */}\r\n            <div id=\"modal1\" data-id=\"modal1\" className=\"modal\">\r\n                <div className=\"modal-content black-text modal-close center\">\r\n                    <div className=\"flow-text\"  >\r\n                        <h4 className=\"mb-3\">Additional explanation:</h4>\r\n                        <h6><u>Scenario 1:</u></h6>\r\n                        {sc1&&<p className=\"flow-text\">{sc1.data.scExpl}</p>}\r\n                        {sc1&&sc1.data.scExpl.length===0&&<h5 className=\"\">No additional explanation available</h5>}\r\n                        <h6><u>Scenario 2:</u></h6>\r\n                        {sc2&&<p className=\"flow-text\">{sc2.data.scExpl}</p>}\r\n                        {sc2&&sc2.data.scExpl.length===0&&<h5 className=\"\">No additional explanation available</h5>}\r\n\r\n                        <button className=\"btn btn-sm blue darken-2 waves-effect waves-light z-depth-2\">Close</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n     );\r\n}\r\n \r\nexport default Modals;","import Option from './Option';\r\n\r\nconst PcView = ({handleClick, sc1, sc2, dceDescr, ageGender }) => {\r\n    //Component for displaying choices on larger screen like pc, options are next to eachother\r\n\r\n    return ( \r\n        <div className=\"pc-view\">\r\n            <h5 className=\"text-secondary mt-1 mb-1\">{dceDescr}</h5>\r\n            <div className=\"pc-container\">\r\n                {/* Displays first option  */}\r\n                <div className=\"option-container\">\r\n                    <Option handleClick={handleClick} sc1={sc1} sc2={sc2} value='A' shownSc={sc1} ageGender={ageGender}/>\r\n                </div>\r\n                {/* Displays second option */}\r\n                <div className=\"option-container\">\r\n                    <Option handleClick={handleClick} sc2={sc2} sc1={sc1} value='B' shownSc={sc2} ageGender={ageGender}/>\r\n                </div>\r\n             </div>\r\n        </div>\r\n     );\r\n}\r\n \r\nexport default PcView;","import Select from \"react-select\";\r\n\r\nconst StartForm = ({nrQuestions, setStarted, handleAGChoice}) => {\r\n//Page component that is shown to the participant at the start of the dce.\r\n//Age and gender are requested. If left empty, the dce will start anyway.\r\n//Values are stored via HandleAGChoice\r\n\r\nconst ageOptions = [{label: \"younger than 25 years\", value: \"young\"},{label: \"25 years or older\", value: \"old\"}];\r\nconst genderOptions = [{label: \"female\", value: \"female\"},{label: \"male\", value: \"male\"}]\r\n    \r\n     return ( \r\n       <div className=\"my-5\"> \r\n          <div className=\"col resultsContainer mx-3\">\r\n               <h5>Thank you for particpating in this experiment. You will be asked {nrQuestions} questions about your preference.</h5>\r\n               <h5 className=\"text-secondary mb-5\">Please select your gender and age and then start by clicking the button below. </h5>\r\n               \r\n               <div className=\"col-md-4   mx-auto\"> <label htmlFor=\"gender\" className=\"col-form-label\">Gender</label>\r\n                    <Select className=\"mb-2\" options={genderOptions} id=\"gender\" name=\"gender\" onChange={(option, name)=>handleAGChoice(option.value, name.name)}/>\r\n               </div>\r\n               <div className=\"col-md-4   mx-auto\"> <label htmlFor=\"age\" className=\"col-form-label\">Age</label>\r\n                    <Select className=\"mb-4\" options={ageOptions} id=\"age\" name=\"age\" onChange={(option, name)=>handleAGChoice(option.value,  name.name)}/>\r\n               </div>\r\n               <button className=\"btn blue darken-2 \" onClick={setStarted}>Start</button>\r\n          </div>\r\n     </div>\r\n     );\r\n}\r\n \r\nexport default StartForm;","import {  useState, useEffect } from 'react';\r\nimport { pemFirestore } from './config';\r\n\r\n\r\nconst useFirestoreScenarios = (user, dceId) => {//Connect to firestore dB and get scenario's and return them as array\r\n  const [scenarios, setScenarios] = useState([]);\r\n\r\n\r\n  useEffect(() => {\r\n    if(user&& dceId){\r\n    const unsub = pemFirestore.collection('users').doc(user).collection('DceList').doc(dceId).collection('Scenarios')\r\n      .onSnapshot(snap => {\r\n        let documents = [];\r\n        snap.forEach(doc => {\r\n          documents.push({...doc.data(), id: doc.id});\r\n        });\r\n        setScenarios(documents);\r\n      });\r\n    return () => unsub();\r\n    }\r\n    // this is a cleanup function that react will run when\r\n    // a component using the hook unmounts\r\n  }, [user, dceId]);\r\n\r\n  return { scenarios };\r\n}\r\n\r\nexport default useFirestoreScenarios;","import { useState, useEffect} from 'react';\r\nimport { pemFirestore } from \"../../firebase/config\";\r\n\r\nexport default function useSetAspectObjs(userId, dceId, details, dceFeatures) {\r\n    // Loads aspects from database and return them as objects with combi's including filters for 'in favor' and 'against'\r\n    const [aspectObjs, setAspectObjs] = useState([]);\r\n\r\n\r\n    useEffect(() => {\r\n        if(userId&&dceId&&details&&dceFeatures){\r\n        let tempAspectObjs = [];\r\n        setAspectObjs(tempAspectObjs);//ensure AspectObjects are empty\r\n        let response = pemFirestore.collection('users').doc(userId).collection('DceList').doc(dceId).collection('AspectList');\r\n        response.get()\r\n        .then((querySnapshot)=>{\r\n            querySnapshot.forEach((doc)=>{//for each aspect set name and description\r\n                tempAspectObjs.push({aspectName: doc.data().aspectName, aspectDescr: doc.data().aspectDescr, id: doc.id});\r\n                pemFirestore.collection('users').doc(userId).collection('DceList').doc(dceId).collection('AspectList').doc(doc.id).collection('Combis')\r\n                .get()\r\n                .then((snapshot)=>{\r\n                    let tempFilters = [];\r\n                    snapshot.forEach((snap)=>{//for each combi set in favor and against filters\r\n                        let tempFilter = snap.data();\r\n                        let favorFilters = [];\r\n                        let againstFilters = [];\r\n                        favorFilters.push(...tempFilter.filters);\r\n                        againstFilters.push(...tempFilter.filters);\r\n                        let newFavorFilter = {fName: details.groupFeature, fValue: snap.data().groupValue};//include groupfeature as favorfilter\r\n                        if(snap.data().ageGender){\r\n                            if(snap.data().ageGender.age!==\"\"){\r\n                        let ageFilter = {fName: \"age\", fValue: snap.data().ageGender.age};\r\n                        favorFilters.push(ageFilter);\r\n                        againstFilters.push(ageFilter);\r\n                    }\r\n                    if(snap.data().ageGender.gender!==\"\"){\r\n                        let genderFilter = {fName: \"gender\", fValue: snap.data().ageGender.gender};\r\n                        favorFilters.push(genderFilter);\r\n                        againstFilters.push(genderFilter);\r\n                        }}\r\n                        favorFilters.push(newFavorFilter);\r\n                        let newAgainstValue = \"\";//include opposite value of groupfeature as filter in againstfilters\r\n                        dceFeatures.forEach((feature,i) =>{\r\n                        if (feature.featureName===details.groupFeature){\r\n                            if(feature.featureValue1===snap.data().groupValue){\r\n                                newAgainstValue = feature.featureValue2;}\r\n                            if(feature.featureValue2===snap.data().groupValue){\r\n                                newAgainstValue = feature.featureValue1;}\r\n                        }\r\n                        })\r\n                        let newAgainstFilter = {fName: details.groupFeature, fValue: newAgainstValue};\r\n                        againstFilters.push(newAgainstFilter);\r\n                        tempFilter['favorFilters'] = favorFilters;\r\n                        tempFilter['againstFilters'] = againstFilters\r\n                        tempFilters.push(tempFilter);;\r\n                    })\r\n                    let newTempObjs = [...tempAspectObjs]\r\n                        let index = tempAspectObjs.findIndex(obj=>obj.id===doc.id);//find current aspect in list of aspectObjects\r\n                        newTempObjs[index]['combis'] = tempFilters;//set filters to current aspectObject\r\n                        setAspectObjs(newTempObjs);\r\n                        })\r\n            })\r\n         }).catch((err)=>{\r\n            console.log('Error with loading document'+err);\r\n        })\r\n        return\r\n    }},[userId, dceId, details, dceFeatures])\r\n\r\n\r\n\r\n\r\n    return {aspectObjs};\r\n}\r\n","import React, { useState, useEffect} from 'react';\r\n\r\nexport default function useGetResultHtml(aspectObjs, results) {\r\n    // Calculate outcome of aspectfilters and return html\r\n \r\n    const [resultHtml, setResultHtml] = useState([]);\r\n\r\n    useEffect(() => {\r\n        let tempResult = [];\r\n        tempResult.push(\r\n            <div key=\"head\">\r\n           <div key=\"headtext\" className=\"mb-3\"> &Delta; P shows the difference in probability that the aspect is true and the \r\n               probability that the aspect is not true\r\n           </div>\r\n           </div>\r\n        )\r\n        aspectObjs.forEach((aspectObj,i)=>{//For each aspect filter calculate how many results are in favor and against\r\n            let aspectDescr = aspectObj.aspectDescr;\r\n            let oddsFavor = [];\r\n            let oddsAgainst = [];\r\n            if(aspectObj.combis){\r\n            aspectObj.combis.forEach(combi=>{\r\n\r\n                    const checkFValue = (result=>{//check if result has to be counted in favor\r\n                        let passesAllFilters = true;\r\n                        combi.favorFilters.forEach(favFilter=>{\r\n                            if(!(favFilter.fValue===result[favFilter.fName]&&result.hasOwnProperty(favFilter.fName))){\r\n                                passesAllFilters = false;\r\n                            }\r\n                        })\r\n                        return(passesAllFilters)\r\n                    })\r\n                    let tempFavors = results.filter(checkFValue);\r\n                    tempFavors.forEach(favor=>{\r\n                        if(oddsFavor.indexOf(favor)===-1){//add to list if not already in list\r\n                            oddsFavor.push(favor);\r\n                        }\r\n                    })\r\n                               \r\n                    const checkAValue = (result=>{//check if result has to be counted against\r\n                        let passesAllFilters = true;\r\n                        combi.againstFilters.forEach(againstFilter=>{\r\n                            if(!(againstFilter.fValue===result[againstFilter.fName]&&result.hasOwnProperty(againstFilter.fName))){\r\n                                passesAllFilters=false;\r\n                            }\r\n                        })\r\n                        return(passesAllFilters)\r\n                    })\r\n                    let tempAgainst = results.filter(checkAValue);\r\n                    tempAgainst.forEach(against=>{\r\n                        if (oddsAgainst.indexOf(against)===-1){//add to list if not already in list\r\n                            oddsAgainst.push(against);\r\n                        }\r\n                    })\r\n                })\r\n        }\r\n        let prob = 0;\r\n        if (oddsAgainst.length>0||oddsFavor.length>0){\r\n            prob = 2*(oddsFavor.length/(oddsFavor.length+oddsAgainst.length))-1;\r\n        }\r\n        let graphProb = Math.abs(prob*50);// property to set width of bar in graph\r\n        let clNames = graphReverse(prob); // Set className to get reverse direction in case of negative number\r\n        let barClasses = getBarClasses(prob); // Set color of bars depending on positive or negative numbers\r\n\r\n        tempResult.push(//html for bars and text. Bars 'start' from middle by filling first half with empty bar. Small stripe in case of zero value.\r\n            <div key={`graphs ${i}`} className=\"pb-2\">\r\n                <span key={`asp-desc ${i}`} className=\"text-secondary\">{aspectDescr}</span><br/>\r\n                <div key={`clNames ${i}`} className={clNames}>\r\n                <div key={`pg-bar-pt1 ${i}`} className=\"progress-bar bg-light-grey\" role=\"progressbar\" style={{width: 50+\"%\"}} aria-valuenow=\"25\" aria-valuemin=\"0\" aria-valuemax=\"100\"></div>\r\n                {prob===0&&<div key={`pg-bar-pt2 ${i}`} class=\"progress-bar bg-teal\" role=\"progressbar\" style={{width: 2 +\"px\"}} aria-valuenow=\"30\" aria-valuemin=\"0\" aria-valuemax=\"100\"></div>}\r\n                <div key={`pg-bar-pt3 ${i}`} className={barClasses} role=\"progressbar\" aria-valuenow={prob} aria-valuemin=\"0\" aria-valuemax=\"100\" style={{width:graphProb+\"%\"}}>\r\n                {(prob>=0.2||prob<=-0.2)&&<span key={`pg-title ${i}`} className=\"sr-only\">&Delta; P = {prob.toFixed(2)}</span>}\r\n                </div>\r\n                </div>\r\n                {(prob<0.2&&prob>-0.2)&&<div key={`pg-desc ${i}`}>&Delta; P = {prob.toFixed(2)}</div>}\r\n                <span key={`pg-desc2 ${i}`}>(Chosen {(100*prob).toFixed(0)}% {prob<0 ? \"less\": \"more\"} than the opposite.)</span>\r\n\r\n            </div>)\r\n        setResultHtml(tempResult);\r\n        })\r\n        if(aspectObjs.length===0){\r\n            setResultHtml([<div><h5>No aspects defined.</h5></div>])\r\n        }\r\n        return \r\n    }, [aspectObjs, results])\r\n\r\n\r\n   const graphReverse = (prob)=>{// Set className to get reverse direction in case of negative number\r\n        let tempClNames = \"progress w-80 mx-auto\"\r\n        if (prob<0){\r\n            tempClNames=\"progress w-80 mx-auto flex-row-reverse\"\r\n        }\r\n        return  (tempClNames);\r\n    }\r\n\r\n    const getBarClasses = (prob)=>{// Set color of bars depending on positive or negative numbers\r\n        let barClasses = \"progress-bar bg-teal progress-bar-striped\";\r\n        if (prob<0){\r\n            barClasses = \"progress-bar bg-purple progress-bar-striped\"\r\n        }\r\n        return barClasses;\r\n    }\r\n\r\n\r\n    return {resultHtml};\r\n}\r\n","import {  useState, useEffect } from 'react';\r\nimport { pemFirestore } from './config';\r\n\r\n\r\nconst useFirestoreLoadResult = (user, dceId) => {//Loads the raw results from the database and returns them\r\nconst [results, setResults] = useState([]);\r\n\r\n\r\nuseEffect(() => {\r\n  if(user&&dceId){\r\n    let unsub = pemFirestore.collection('users').doc(user).collection('DceList').doc(dceId).collection('RawResults')\r\n    .onSnapshot(snap => {\r\n        let documents = [];\r\n        snap.forEach(doc => {\r\n          documents.push({...doc.data().pref, id: doc.id});\r\n        });\r\n        setResults(documents);\r\n      });\r\n      return () => unsub();\r\n    // this is a cleanup function that react will run when\r\n    // a component using the hook unmounts\r\n  }}, [user, dceId]);\r\n\r\n  return {results} ;\r\n}\r\n\r\nexport default useFirestoreLoadResult;","import React from 'react';\r\nimport useFirestoreLoadResult from '../../firebase/useFirestoreLoadResults';\r\nimport useSetAspectObjs from './useSetAspectObjs';\r\nimport useGetResultHtml from './useGetResultHtml';\r\n\r\n\r\nexport default function ResultDce({dceId, dceDetails, dceFeatures, userId}) {\r\n    //Shows results of a DCE. Only available for grouped dce's at present\r\n\r\n    const {results} = useFirestoreLoadResult(userId ,dceId);//load results from database\r\n    const {details} = dceDetails;\r\n    const {aspectObjs} = useSetAspectObjs(userId, dceId, details, dceFeatures); //load aspects from dB\r\n    const {resultHtml} = useGetResultHtml(aspectObjs, results); //calculate numbers and return html for results\r\n\r\n    return (\r\n        <div key=\"main\">\r\n           <div key=\"title\" className=\"mb-5\"><h3>Total results from all particpants: </h3>\r\n            {resultHtml}</div>\r\n           \r\n        </div>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport useSetAspectObjs from '../result/useSetAspectObjs';\r\nimport useGetResultHtml from '../result/useGetResultHtml';\r\nimport ResultDce from \"../result/ResultDce\";\r\n\r\n\r\nexport default function ParticipantResults({resultList, dceDetails, dceNameEdit, dceId, dceFeatures, userId}) {\r\n    const {details} = dceDetails;\r\n    const {grouped} = details;\r\n    const {aspectObjs} = useSetAspectObjs(userId, dceId, details, dceFeatures);\r\n    const {resultHtml} = useGetResultHtml(aspectObjs, resultList);\r\n\r\n    return (\r\n        <div className=\"my-5\"> \r\n            <p>Thank you for completing this experiment!</p>\r\n            {/*only show results if the dce is grouped*/}\r\n            {grouped&&<div className=\"col resultsContainer mx-3\"> \r\n                <div className=\"mb-5\"><h3>Your results: </h3>\r\n                {resultHtml}</div>\r\n                <ResultDce  dceDetails={dceDetails} dceId={dceId} dceFeatures={dceFeatures} userId={userId} />\r\n            </div>}\r\n     </div>\r\n    )\r\n}\r\n","//Sets the dots that indicate the questions that have to be answered\r\nconst setDots =  (length)=>{\r\n    let dot = [];\r\n    for(let i=0; i<length-1;i++){\r\n    dot.push(<span key={`emptydot${i}`} className=\"dot\"></span>)};\r\n  return dot;\r\n  };\r\n\r\n     //calculate nr of dots of questions still to answer\r\n  const calcDots = (done, setDone, todo, setTodo, qIndex)=>{\r\n    let dones = [];//indicator dots for number of questions\r\n    dones = [...done];\r\n    dones.push(<span key={`filleddot${qIndex}`} className=\"dot blue darken-2\"></span>);\r\n    setDone(dones);\r\n    let todos = [];//indicator dots for questions still to answer\r\n    todos = [...todo];\r\n    todos.pop();\r\n    setTodo(todos);\r\n    return;\r\n}\r\n \r\nexport {setDots, calcDots};","\r\n   //Get 2 scenarios that are only differing in the group feature. ScenarioA is random, ScenarioB is the pair of A\r\nconst getGroupedScenarios = (scenarios, setFinished, prevRandomA, setPrevRandomA)=>{\r\n    const maxNr = scenarios.length;\r\n    let randNrA = GetRandomANr(maxNr, prevRandomA, setPrevRandomA);\r\n    const scenarioA = scenarios[randNrA];\r\n    if (!scenarioA){\r\n      setFinished(true)  //if there are not enough scenarios available, finish experiment\r\n    }\r\n    else{\r\n      const altnr = scenarioA[\"data\"][\"altnr\"];\r\n      const scenarioB = scenarios.find(sc=>(sc[\"data\"][\"nr\"]===altnr));\r\n      return({ScenarioA: scenarioA, ScenarioB: scenarioB});  \r\n    }\r\n    return({ScenarioA: \"\", ScenarioB: \"\"});\r\n  }\r\n\r\n  //get 2 random scenarios, no repeats and A!=B\r\nconst getRandomScenarios = (scenarios, prevRandomA, setPrevRandomA)=>{\r\n    const maxNr = scenarios.length;\r\n    const {RandomNrA, RandomNrB} = GetUnusedRndNrs(maxNr, prevRandomA, setPrevRandomA);\r\n    return ({ScenarioA: scenarios[RandomNrA], ScenarioB: scenarios[RandomNrB]});\r\n    }\r\n\r\n    \r\n// get random nr for the first scenario and store used nrs to avoid repeats\r\nconst GetRandomANr = (maxNr, prevRandomA, setPrevRandomA)=>{\r\n    // const [prevRandomA, setPrevRandomA] = useState(null);\r\n    let usedNrsA = [];\r\n    if (prevRandomA!=null){usedNrsA=[...prevRandomA]}\r\n    let randNrA=-1;\r\n    for (let i=maxNr*5; i>0; i--){\r\n        const tempRandNrA = Math.floor(Math.random() * maxNr);\r\n        if (!usedNrsA.includes(tempRandNrA)){\r\n          randNrA=tempRandNrA;\r\n          break;\r\n          }\r\n      }\r\n    if(randNrA!==-1){usedNrsA.push(randNrA)}  //store A-nr if it is used\r\n    setPrevRandomA(usedNrsA);\r\n    return randNrA;\r\n  }\r\n\r\n//Gets 2 random nrs where A-nr has not been used before in this session and B is different from A\r\n//Used for Dce's without grouped scenario's\r\nconst GetUnusedRndNrs = (maxNr, prevRandomA, setPrevRandomA)=>{\r\n    let randNrA = GetRandomANr(maxNr, prevRandomA, setPrevRandomA);\r\n    let randNrB=-1;\r\n    for (let i=maxNr*10; i>0; i--){\r\n      const tempRandNrB = Math.floor(Math.random() * maxNr);\r\n      console.log(\"rndA is \"+randNrA+\" rndB is \"+tempRandNrB);\r\n      if (randNrA!==tempRandNrB){\r\n        randNrB=tempRandNrB;\r\n        break;\r\n      }\r\n    }   \r\n    return {RandomNrA: randNrA, RandomNrB: randNrB};\r\n}\r\n\r\n\r\nexport  {getRandomScenarios, getGroupedScenarios } ;\r\n","import Fab from './Fab';\nimport MenuTabs from './MenuTabs';\nimport Modals from './Modals';\nimport M from 'materialize-css/dist/js/materialize.min.js';\nimport PcView from './PcView';\nimport { useState, useEffect } from \"react\";\nimport { useParams} from \"react-router-dom\";\nimport StartForm from './StartForm';\nimport { pemFirestore } from '../../firebase/config';\nimport useFirestoreScenarios from '../../firebase/useFirestoreScenarios';\nimport ParticipantResults from './ParticipantResults';\nimport { setDots, calcDots } from './DotFunctions';\nimport {getRandomScenarios, getGroupedScenarios } from './ScenarioFunctions'\nimport useSaveResult from './useSaveResult';\n\nfunction App() {\n\n  const [answerList, setAnswerList] =useState([]);\n  const [resultList, setResultList] = useState([]);\n  const [ageGender, setAgeGender] = useState({age: \"\", gender: \"\"})\n  const [qIndex, setQIndex] = useState(1);\n  const [done,setDone] = useState([<span key=\"1st done\" className='dot blue darken-2'></span>]);\n  const [todo, setTodo] = useState([]);\n  const [sc1, setSc1] = useState(null);\n  const [sc2, setSc2] = useState(null);\n  const [nrQuestions, setNrQuestions] = useState(0);\n  const [isGrouped, setIsGrouped] = useState(false);\n  const [dceDescr, setDceDescr] = useState(null);\n  const [dceFeatures, setDceFeatures] = useState([]);\n  const [dceDetails, setDceDetails] = useState(null)\n  const [dceNameEdit, setDceNameEdit] = useState('');\n  const [finished, setFinished] = useState(false);\n  const [started, setStarted] = useState(false);\n  const [error, setError] = useState(\"\");\n  const {userId, dceId } = useParams();\n  const {scenarios} = useFirestoreScenarios(userId, dceId); // load scenario's from database\n  const [prevRandomA, setPrevRandomA] = useState(null);\n  // const [prevRandomB, setPrevRandomB] = useState(null);\n\n\nuseEffect(() => {\n  //initialize materialize - css library\n  M.AutoInit();\n});\n\n//Handle click from age and gender select in startform\nconst handleAGChoice = (value, id) =>{\n  let tempAgeGender = ageGender;\n  tempAgeGender[id] = value;\n  setAgeGender(tempAgeGender);\n}\n\n// handle click from choose button\n  const handleClick = (choiceValue) => {\n    if(choiceValue){\n    let tempListA =[...answerList];\n    tempListA.push(choiceValue);\n    setAnswerList(tempListA);\n    }//if choiceValue ==0, next scenario's are selected and answers are not recorded.\n    settingScenarios(isGrouped);\n    if(qIndex+1>nrQuestions){\n      setFinished(true)}     //finishes if nr of questions as defined in Dce is reached\n    setQIndex(qIndex + 1);\n    calcDots(done, setDone, todo, setTodo, qIndex); \n   }\n\n// set the 2 scenario's that are shown on the screen. Either random or grouped.\nconst settingScenarios = (grouped)=>{\n  if(!grouped){\n    const {ScenarioA, ScenarioB}  =  getRandomScenarios(scenarios, prevRandomA, setPrevRandomA);\n    setSc1(ScenarioA);\n    setSc2(ScenarioB);\n   }\n  if (grouped){\n    const {ScenarioA, ScenarioB} = getGroupedScenarios(scenarios, setFinished, prevRandomA, setPrevRandomA);\n    if(!ScenarioB){handleClick(null)}//load next if something is wrong with scenarioB\n    else{\n    setSc1(ScenarioA);\n    setSc2(ScenarioB);\n    }}\n }\n\n//load dce details from database\n//execute at startup and upon change of scenarios\nuseEffect(()=>{\n  if(scenarios&&userId&&dceId){ //only query dB if id's are known\n    setError(\"\");\n    setAnswerList([]);\n    let fValuesArray = scenarios.map(sc=>sc[\"data\"][\"fValues\"]);\n    let containsEmpty = fValuesArray.map(value=>Object.values(value)).find(x=>x[0]===\"\");\n    if(containsEmpty){\n      setError(\"All scenario's must have data entered and saved - please contact the researcher.\")\n      return;                         \n    } else if(!containsEmpty){\n        let response = pemFirestore.collection('users').doc(userId).collection('DceList').doc(dceId);\n        response.get()\n        .then(doc=>{//for grouped scenario's the nr of scenario's must be at least twice the nr of questions. For ungrouped the minimum nr scenario's ==nrQuestions with minimum of 2\n          if((doc.data().grouped&&scenarios.length<2*doc.data().nrQuestions)||(!doc.data().grouped&&(scenarios.length<doc.data().nrQuestions||scenarios.length<2))){\n            setError(\"The scenario's are incomplete - please contact the researcher.\");\n          }else{setError(\"\");\n            let tempGrouped = doc.data().grouped;\n            setDceFeatures(doc.data().features);\n            const tempDetails = {details: {grouped: doc.data().grouped, groupFeature: doc.data().groupFeature, nrQuestions: doc.data().nrQuestions}}\n            setDceDetails(tempDetails);\n            setDceDescr(doc.data().descr.dceDescr);\n            setDceNameEdit(doc.data().name.dceName);\n            setNrQuestions(doc.data().nrQuestions);\n            setIsGrouped(tempGrouped);\n            setTodo(setDots(doc.data().nrQuestions))\n            if (scenarios.length!==0){\n              settingScenarios(tempGrouped);\n            }\n          }\n        }).catch((error) => {\n            console.error(\"Error loading document: \", error);\n          })}\n  }},[scenarios, userId, dceId]);\n\n//save results when finished \n useSaveResult(finished, answerList, userId, dceId, setResultList); \n\n// Show in the browser. Startform before begin, MenuTabs for mobile, PcView for pc, \n// done and todo are progress indicator. Show ParticpantResult when finished.\n  return (\n    <div>\n      <Modals sc1={sc1} sc2={sc2}/>\n      {!finished&&!started&&<StartForm nrQuestions={nrQuestions} setStarted={setStarted} handleAGChoice={handleAGChoice}/>}\n      {!finished &&started&&!error && <MenuTabs handleClick = {handleClick} sc1={sc1} sc2={sc2} dceDescr={dceDescr} ageGender={ageGender}/>} \n      {!finished &&started&&!error && sc1&&sc2&& <PcView handleClick = {handleClick} sc1={sc1} sc2={sc2} dceDescr={dceDescr} ageGender={ageGender}/>}\n      {!finished &&started&&!error&&<Fab />}\n      {!finished &&started&&!error&& <div className=\"footer\">\n         {done}\n         {todo}\n      </div>}\n      {finished &&started&&!error&&userId&&dceId&& <ParticipantResults resultList={resultList} dceDetails={dceDetails} dceNameEdit = {dceNameEdit} dceId={dceId} dceFeatures={dceFeatures} userId={userId}/>}\n      {error&&<div className=\"text-danger mt-5\"><h4>Error: {error}</h4></div>}\n    </div>\n  )\n}\n\nexport default App;\n","import {useRef, useEffect } from 'react'\r\nimport { pemFirestore } from '../../firebase/config';\r\n\r\nexport default function useSaveResult(finished, answerList, userId, dceId, setResultList) {\r\n\r\n    const initialRender = useRef(true);\r\n\r\n//Save results to database when experiment is finished\r\nuseEffect(() => {\r\n    if (initialRender.current) {\r\n      initialRender.current = false;   // ensure this effect does not run on startup\r\n    } else {\r\n            let collRef = pemFirestore.collection('users').doc(userId).collection('DceList').doc(dceId).collection('RawResults')\r\n            let tempResultList = [];\r\n            answerList.forEach((answer,i)=> {collRef.add(answer);   //save each result to firstore db for total result\r\n                tempResultList.push(answer.pref,i);\r\n                });\r\n            setResultList(tempResultList);  //save this dce result as a list for personal result presentation\r\n        }\r\n    }, [finished])\r\n  \r\n\r\n    return \r\n }\r\n","import React, {useState} from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { signInWithGoogle } from \"../../firebase/config\";\r\nimport { pemAuth } from \"../../firebase/config\";\r\n\r\nconst SignIn = () => {//Sign in page\r\n    const [email, setEmail] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [error, setError] = useState(null);\r\n    const signInWithEmailAndPasswordHandler = \r\n            (event,email, password) => {\r\n                event.preventDefault();\r\n                pemAuth.signInWithEmailAndPassword(email, password)\r\n                .catch(error => {\r\n                    setError(\"Error signing in with password and email!\");\r\n                      console.error(\"Error signing in with password and email\", error);\r\n                    });\r\n    };\r\n\r\n      const onChangeHandler = (event) => {\r\n          const {name, value} = event.currentTarget;\r\n\r\n          if(name === 'userEmail') {\r\n              setEmail(value);\r\n          }\r\n          else if(name === 'userPassword'){\r\n            setPassword(value);\r\n          }\r\n      };\r\n\r\n  return (\r\n    <div className=\"row justify-content-center\">\r\n      <h1 className=\"text-3xl mb-2 text-center font-bold\">Sign In</h1>\r\n      <div className=\"col-sm-7\">\r\n        {error !== null && <div className = \"text-danger mb-3\">{error}</div>}\r\n        <form className=\"\">\r\n        <div className=\"form-floating\">\r\n           <input\r\n            type=\"email\"\r\n            className=\"form-control\"\r\n            name=\"userEmail\"\r\n            value = {email}\r\n            placeholder=\"Your email\"\r\n            id=\"userEmail\"\r\n            onChange = {(event) => onChangeHandler(event)}\r\n          />\r\n          <label htmlFor=\"userEmail\" className=\"block\">\r\n            Email:\r\n          </label>\r\n          </div>\r\n\r\n          <div className=\"form-floating \">\r\n          <input\r\n            type=\"password\"\r\n            className=\"form-control\"\r\n            name=\"userPassword\"\r\n            value = {password}\r\n            placeholder=\"Your Password\"\r\n            id=\"userPassword\"\r\n            onChange = {(event) => onChangeHandler(event)}\r\n          />\r\n             <label htmlFor=\"userPassword\" className=\"block\">\r\n            Password:\r\n          </label>\r\n          </div>\r\n          <button className=\"btn btn-outline-info\" onClick = {(event) => {signInWithEmailAndPasswordHandler(event, email, password)}}>\r\n            Sign in\r\n          </button>\r\n        </form>\r\n        <p className=\"my-3\">or</p>\r\n        <button\r\n          className=\"btn btn-outline-info\" onClick={() => {\r\n            signInWithGoogle();\r\n          }}>\r\n          Sign in with Google\r\n        </button>\r\n        <p className=\"my-3\">\r\n          Don't have an account?{\" \"}\r\n          <Link to=\"/signUp\" className=\"text-blue-500 hover:text-blue-600\">\r\n            Sign up here\r\n          </Link>{\" \"}\r\n          <br />{\" \"}\r\n          <Link to = \"passwordReset\" className=\"text-blue-500 hover:text-blue-600\">\r\n            Forgot Password?\r\n          </Link>\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\nexport default SignIn;","import React, { useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { pemAuth, signInWithGoogle, generateUserDocument } from \"../../firebase/config\";\r\n\r\nconst SignUp = () => { //Sign up page. Either via mail address or Google account\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [displayName, setDisplayName] = useState(\"\");\r\n  const [error, setError] = useState(null);\r\n\r\n  const createUserWithEmailAndPasswordHandler =async (event, email, password) => {\r\n    event.preventDefault();\r\n    try{\r\n        const {user} = await pemAuth.createUserWithEmailAndPassword(email, password);\r\n        generateUserDocument(user, {displayName});\r\n      }\r\n      catch(error){\r\n        setError('Error Signing up with email and password');\r\n      }\r\n    setEmail(\"\");\r\n    setPassword(\"\");\r\n    setDisplayName(\"\");\r\n  };\r\n  const onChangeHandler = event => {\r\n    const { name, value } = event.currentTarget;\r\n    if (name === \"userEmail\") {\r\n      setEmail(value);\r\n    } else if (name === \"userPassword\") {\r\n      setPassword(value);\r\n    } else if (name === \"displayName\") {\r\n      setDisplayName(value);\r\n    }\r\n  };\r\n  return (\r\n    <div className=\"row justify-content-center\">\r\n      <h1 className=\"text-3xl mb-2 text-center font-bold\">Sign Up</h1>\r\n      <div className=\"col-sm-7\">\r\n        {error !== null && (\r\n          <div className=\"text-danger mb-3\">\r\n            {error}\r\n          </div>\r\n        )}\r\n        <form className=\"\">\r\n        <div className=\"form-floating\">     \r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control \"\r\n            name=\"displayName\"\r\n            value={displayName}\r\n            placeholder=\"Display name\"\r\n            id=\"displayName\"\r\n            onChange={event => onChangeHandler(event)}\r\n          />\r\n           <label htmlFor=\"displayName\" className=\"block\">\r\n            Display Name:\r\n          </label>\r\n        </div>\r\n        <div className=\"form-floating\">     \r\n           <input\r\n            type=\"email\"\r\n            className=\"form-control\"\r\n            name=\"userEmail\"\r\n            value={email}\r\n            placeholder=\"Your Email\"\r\n            id=\"userEmail\"\r\n            onChange={event => onChangeHandler(event)}\r\n          />\r\n           <label htmlFor=\"userEmail\" className=\"block\">\r\n            Email:\r\n          </label>\r\n          </div>\r\n          <div className=\"form-floating\">     \r\n          <input\r\n            type=\"password\"\r\n            className=\"form-control\"\r\n            name=\"userPassword\"\r\n            value={password}\r\n            placeholder=\"Your Password\"\r\n            id=\"userPassword\"\r\n            onChange={event => onChangeHandler(event)}\r\n          />\r\n          <label htmlFor=\"userPassword\" className=\"block\">\r\n            Password:\r\n          </label>\r\n          </div>\r\n          <button\r\n            className=\"btn btn-outline-info\"\r\n            onClick={event => {\r\n              createUserWithEmailAndPasswordHandler(event, email, password);\r\n            }}\r\n          >\r\n            Sign up\r\n          </button>\r\n        </form>\r\n        <p className=\"my-3\">or</p>\r\n        <button\r\n          className=\"btn btn-outline-info\"\r\n          onClick={() => {\r\n            try {\r\n              signInWithGoogle();\r\n            } catch (error) {\r\n              console.error(\"Error signing in with Google\", error);\r\n            }\r\n        }}\r\n        >\r\n          Sign In with Google\r\n        </button>\r\n        <p className=\"my-3\">\r\n          Already have an account?{\" \"}\r\n          <Link to=\"/\" className=\"text-blue-500 hover:text-blue-600\">\r\n            Sign in here\r\n          </Link>{\" \"}\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\nexport default SignUp;","import React, { useState } from \"react\";\r\nimport { pemAuth } from \"../../firebase/config\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst PasswordReset = () => {//Component for reseting password\r\n  const [email, setEmail] = useState(\"\");\r\n  const [emailHasBeenSent, setEmailHasBeenSent] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  const onChangeHandler = event => {\r\n    const { name, value } = event.currentTarget;\r\n\r\n    if (name === \"userEmail\") {\r\n      setEmail(value);\r\n    }\r\n  };\r\n\r\n  const sendResetEmail = event => {\r\n    event.preventDefault();\r\n    pemAuth\r\n      .sendPasswordResetEmail(email)\r\n      .then(() => {\r\n          setEmailHasBeenSent(true);\r\n        setTimeout(() => {setEmailHasBeenSent(false)}, 3000);\r\n      })\r\n      .catch(() => {\r\n        setError(\"Error resetting password\");\r\n      });\r\n  };\r\n  return (\r\n    <div className=\"row justify-content-center\">\r\n      <h1 className=\"text-xl text-center font-bold mb-3\">\r\n        Reset your Password\r\n      </h1>\r\n      <div className=\"col-sm-7\">\r\n        <form action=\"\">\r\n          {emailHasBeenSent && (\r\n            <div className=\"text-danger mb-3\">\r\n              An email has been sent to you!\r\n            </div>\r\n          )}\r\n          {error !== null && (\r\n            <div className=\"text-danger mb-3\">\r\n              {error}\r\n            </div>\r\n          )}\r\n                  <div class=\"form-floating\">\r\n          \r\n          <input\r\n            type=\"email\"\r\n            name=\"userEmail\"\r\n            id=\"userEmail\"\r\n            value={email}\r\n            placeholder=\"Input your email\"\r\n            onChange={onChangeHandler}\r\n            className=\"form-control\"\r\n          />\r\n          <label htmlFor=\"userEmail\" className=\"block\">\r\n            Email:\r\n          </label>\r\n          </div>\r\n          <button\r\n            className=\"btn btn-outline-info my-3\"\r\n            onClick={event => {\r\n              sendResetEmail(event);\r\n            }}\r\n          >\r\n            Send me a reset link\r\n          </button>\r\n        </form>\r\n\r\n        <Link\r\n          to=\"/\"\r\n          className=\"my-2 text-blue-700 hover:text-blue-800 text-center block\"\r\n        >\r\n          &larr; back to sign in page\r\n        </Link>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PasswordReset;","//Handles dce inputs from form\r\nconst handleInputD = (e,currentList, currentName) => {\r\n    const name = e.target.value;\r\n    const nameList = [...currentList];\r\n    nameList[0][currentName]=name;\r\n    return ( \r\n        nameList\r\n     );\r\n}\r\n \r\nexport default handleInputD;","import React, { useEffect, useState } from 'react'\r\nimport Select from 'react-select'\r\n\r\nconst useNewDceHtml =( inputProps, groupProps, miscProps )=> {\r\n   // creates html for formsfields and buttons for the NewDce component\r\nconst {handleNameInputChange, handleDescrInputChange, handleInputChange, handleRemoveClick, handleNrQuestionsInput, inputList} = inputProps;\r\nconst {setGroupValue, groupChecked, groupValue, handleCheckbox} = groupProps;\r\nconst {handleAddClick,  saveDce,  nrQuestions} = miscProps;\r\nconst [dceHtml, setDceHtml] = useState([]);\r\n\r\n \r\nuseEffect(()=>{\r\nlet tempHtml = [];\r\n\r\n  const options = inputList&&inputList.map((x, i)=>{\r\n    return {label: x.featureName, value: x.featureName}\r\n  })\r\n\r\ntempHtml.push(\r\n        <div>\r\n            <form className=\"form-inline\">\r\n                <div >\r\n                <label htmlFor=\"dceName\" className=\"block\">Name: </label>\r\n                    <input type=\"text\" className=\"form-control mb-2\" name=\"dceName\"  placeholder=\"DCE name\" id=\"dceName\" \r\n                    required onChange={(e)=>handleNameInputChange(e)}></input>\r\n                    </div>\r\n                <div className=\"\">\r\n                <label htmlFor=\"descr\" className=\"block\">Description: </label>\r\n                    <textarea type=\"text\" className=\"form-control mb-2\" name=\"descr\" rows=\"3\"  placeholder=\"This text will be displayed in the DCE\" id=\"descr\" \r\n                    required onChange={(e)=>handleDescrInputChange(e)}></textarea>\r\n                    </div>\r\n                  \r\n                {inputList&&inputList.map((x, i) => {\r\n        return (\r\n          <div className=\" row\">\r\n              <div className=\"\">\r\n              <label htmlFor={i} className=\"\">Feature name: </label>\r\n            <input\r\n            className=\"form-control mb-2\"\r\n              name=\"featureName\"\r\n              required\r\n              id={i}\r\n   placeholder=\"Enter feature name\"\r\n              value={x.featureName}\r\n              onChange={e => handleInputChange(e, i)}\r\n            />             \r\n            </div>\r\n            <div className=\"col col-xs-1\">\r\n            {inputList.length !== 1 && <button\r\n                className=\"btn btn-sm btn-outline-success mb-2\"\r\n                onClick={(e) => handleRemoveClick(e, i)}><i className=\"material-icons mat-icon\">delete_forever</i></button>}\r\n              </div>\r\n\r\n              <div >\r\n              <label htmlFor={i} className=\"\">Feature value 1: </label>\r\n            <input\r\n            className=\"form-control mb-2\"\r\n              name=\"featureValue1\"\r\n              required\r\n              id={i}\r\n              placeholder=\"Enter value\"\r\n              value={x.featureValue1}\r\n              onChange={e => handleInputChange(e, i)}\r\n            />             \r\n            </div>\r\n              <div >\r\n              <label htmlFor={i} className=\"\">Feature value 2: </label>\r\n            <input\r\n            className=\"form-control mb-2\"\r\n              name=\"featureValue2\"\r\n              required\r\n              id={i}\r\n              placeholder=\"Enter value\"\r\n              value={x.featureValue2}\r\n              onChange={e => handleInputChange(e, i)}\r\n            />             \r\n            </div>\r\n              <div>\r\n              {inputList.length - 1 === i && <button className=\"btn btn-sm btn-outline-info mb-2\" onClick={(e)=>handleAddClick(e)}>Add another feature</button>}</div>\r\n           </div>\r\n        );\r\n      })}\r\n      <div>\r\n        <label htmlFor=\"nrChoices\">Nr of questions in DCE</label>\r\n        <input type=\"number\" className=\"col col-xs-1 form-control mb-2\" id=\"nrChoices\" required onChange={(e)=>handleNrQuestionsInput(e)} />\r\n      </div>\r\n      <div>\r\n        <input type=\"checkbox\" name=\"group\" id=\"chkGrp\" onClick={(e)=>handleCheckbox(e)}></input>\r\n        <label htmlFor=\"group\" className=\"\">Group by feature </label>\r\n      </div>\r\n      \r\n      <div>\r\n        {groupChecked&&\r\n        <><label className=\"col-xs-6 col-form-label pb-0\" id=\"gr-label\" htmlFor=\"GrFeat\">\r\n            Group feature\r\n          </label>\r\n          <Select className=\"form form-select-sm col-xs-6 mb-2\" id=\"GrFeat\" value={options.label} options={options} onChange={(option) => setGroupValue(option.value)} /></>\r\n          \r\n             }\r\n      {/* {console.log('options are: '+JSON.stringify(options))}       */}\r\n      </div>\r\n      <button className=\"btn btn-sm btn-outline-success\" onClick={(e)=>saveDce(e)} >Save DCE</button>\r\n          </form>\r\n\r\n        </div>\r\n)\r\n// console.log('tempHtml van newDce: '+JSON.stringify(tempHtml))\r\nsetDceHtml(tempHtml);\r\n return       \r\n},[inputList, groupValue, nrQuestions, groupChecked])\r\n\r\nreturn {dceHtml}\r\n    \r\n}\r\nexport default useNewDceHtml;","import React, { useContext, useState } from \"react\";\r\nimport { UserContext } from \"../../providers/UserProvider\";\r\nimport { pemFirestore } from \"../../firebase/config\";\r\nimport handleInputD from \"./handleDInputs\";\r\nimport useNewDceHtml from \"./useNewDceHtml\";\r\n\r\nexport default function NewDce({showNewDceForm, dceNameList, setDceListChanged}) {\r\n  //component for creating a new dce including features and general details\r\n\r\n    const [inputList, setInputList] = useState([{ featureName: null, featureValue1: null, featureValue2: null }]);\r\n    const [dceName, setDceName] = useState([{ dceName: \"\"}]);\r\n    const [dceDescr, setDceDescr] = useState([{dceDescr: \"\"}]);\r\n    const [groupChecked, setGroupChecked] = useState(false);//set to false when allowing ungrouped dce's\r\n    const [groupValue, setGroupValue] = useState(null);\r\n    const [nrQuestions, setNrQuestions] = useState(0);\r\n    const user = useContext(UserContext);\r\n    const uid = user.uid;\r\n\r\n    //Check if feature names and values are all filled in before save\r\n  const featuresNotNull = (item)=>{\r\nif(item.featureName==null||item.featureName===\"\"){\r\nalert(\"Please fill in all feature names\");\r\nreturn false;\r\n}\r\nif(item.featureValue1==null||item.featureValue1===\"\"||item.featureValue2==null||item.featureValue2===\"\"){\r\n  alert(\"Please fill in all feature values\");\r\n  return false;\r\n}\r\nreturn true;\r\n  }\r\n\r\n//helper for dceNotNull check\r\n  const existsName = (name => dceName[0].dceName===name);\r\n\r\n//Check if dce name and number of questions are all filled in before save. Also check if dce name is unique\r\n  const dceNotNull = ()=>{\r\n    if(dceName[0].dceName===\"\" || dceNameList.some(existsName)){\r\n      alert(\"Fill in a unique DCE name\");\r\n      return false;\r\n    }\r\n    if(nrQuestions<=0){\r\n      alert(\"Fill in the number of questions (higher than 0) the participant has to answer in the DCE\");\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  //Check if groupValue is not null \r\n  const groupValueNotNull = ()=>{\r\n    if (groupChecked&&groupValue===null){\r\n      alert(\"Please select a value for the group feature\");\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  //Save dce if all fields are filled in\r\n    const saveDce = (e)=>{\r\n        e.preventDefault();\r\n        if(inputList.every(featuresNotNull)&&dceNotNull()&&groupValueNotNull()){\r\n          let dceColl = pemFirestore.collection('users').doc(uid).collection('DceList');\r\n          dceColl.add({name: dceName[0], descr: dceDescr[0], features: inputList, nrFeatures: inputList.length, grouped: groupChecked, groupFeature: groupValue, nrQuestions: nrQuestions})\r\n          .then((docRef)=>{\r\n                console.log(\"Document written with ID: \", docRef.id);\r\n                setDceListChanged(docRef.id);\r\n          })\r\n          .catch((error) => {\r\n              console.error(\"Error adding document: \", error);\r\n          });\r\n          showNewDceForm();\r\n        }\r\n    }\r\n\r\n    // handle name input change\r\n    const handleNameInputChange = (e) => {\r\n      e.preventDefault();\r\n      const nameList = handleInputD(e, dceName, \"dceName\")\r\n      setDceName(nameList);\r\n    }\r\n\r\n    // handle descr input change\r\n    const handleDescrInputChange = (e) => {\r\n      e.preventDefault();\r\n      const descrList = handleInputD(e, dceDescr, \"dceDescr\");\r\n      setDceDescr(descrList);\r\n    }\r\n\r\n    // handle nr questions input change\r\n    const handleNrQuestionsInput = (e) =>{\r\n      e.preventDefault();\r\n      const nrString = e.target.value;\r\n      let nrQ = 0;\r\n      nrQ = Number(nrString);\r\n      setNrQuestions(nrQ);\r\n    }\r\n\r\n     // handle feature input change\r\n  const handleInputChange = (e, index) => {\r\n    e.preventDefault();\r\n    const { name, value } = e.target;\r\n    const list = [...inputList];\r\n    list[index][name] = value;\r\n    setInputList(list);\r\n  };\r\n \r\n  // deletes feature in the new dce form\r\n  const handleRemoveClick = (e, index) => {\r\n    e.preventDefault();\r\n    const list = [...inputList];\r\n    list.splice(index, 1);\r\n    setInputList(list);\r\n  };\r\n \r\n  // Adds another feature in the form\r\n  const handleAddClick = (e) => {\r\n    e.preventDefault();\r\n    setInputList([...inputList, { featureName: null , featureValue1: null, featureValue2: null}]);\r\n  }\r\n\r\n  // checkbox for group feature \r\n  const handleCheckbox = (e)=>{\r\n    e.preventDefault();\r\n    const { checked} = e.target;\r\n    setGroupChecked(checked);\r\n  }\r\n\r\n  const inputProps =  {handleNameInputChange, handleDescrInputChange, handleInputChange, handleRemoveClick, handleNrQuestionsInput, inputList};\r\n  const groupProps = {setGroupValue, groupChecked, groupValue, handleCheckbox};\r\n  const miscProps = {handleAddClick,  saveDce,  nrQuestions};\r\n\r\n  //gets html for this page\r\nconst {dceHtml} = useNewDceHtml(inputProps, groupProps, miscProps);\r\n\r\n  //html to show in browser\r\n  return (\r\n        <div>\r\n          {dceHtml}\r\n        </div>\r\n    )\r\n}\r\n","import { useState, useEffect } from 'react';\r\nimport { pemStorage } from './config';\r\n\r\n\r\nconst useStorage = (file ) => {//Connect to firebase storage for storing images\r\n  const [progress, setProgress] = useState(0);\r\n  const [error, setError] = useState(null);\r\n  const [url, setUrl] = useState(null);\r\n\r\n\r\n  useEffect(() => {\r\n    // references\r\n    const storageRef = pemStorage.ref(file.name);\r\n    \r\n    storageRef.put(file).on('state_changed', (snap) => {\r\n      let percentage = (snap.bytesTransferred / snap.totalBytes) * 100;\r\n      setProgress(percentage);\r\n    }, (err) => {\r\n      setError(err);\r\n    }, async () => {\r\n      const url = await storageRef.getDownloadURL();\r\n      setUrl(url);\r\n    });\r\n  }, [file]);\r\n\r\n  return { progress, url, error };\r\n}\r\n\r\nexport default useStorage;","import React, { useCallback, useEffect } from 'react';\r\nimport useStorage from '../../firebase/useStorage';\r\n\r\n//Component for showing progressbar when uploading images in a scenario\r\nconst ProgressBar = ({ file, setFile, dceId, scNr, setUrl }) => {\r\n  const { progress, url } = useStorage(file, dceId, scNr);\r\n\r\n// useCallback to enable use of proper dependencies\r\nconst creatUrl = \r\nuseCallback ((url)=>{\r\n  setUrl(url);\r\n},[setUrl])\r\n\r\n\r\n  //set file and url when url (from storage) changes \r\n  useEffect(() => {\r\n    if (url) {\r\n      setFile(null);\r\n      creatUrl(url);\r\n    }\r\n  }, [url, setFile, creatUrl]);\r\n\r\n\r\n    //Html to show in browser\r\n  return (\r\n    <div className=\"progress-bar\"\r\n      style={{ width: progress + '%' }}\r\n    ></div>\r\n  );\r\n} \r\n\r\nexport default ProgressBar;","import React, { useState } from 'react';\r\nimport ProgressBar from './ProgressBar';\r\n\r\nconst UploadForm = ({ dceId, scNr, setUrl }) => { //Component for uploading image\r\n  const [file, setFile] = useState(null);\r\n  const [error, setError] = useState(null);\r\n\r\n  const types = ['image/png', 'image/jpeg'];\r\n\r\n  //handle selected file\r\n  const handleChange = (e) => {\r\n    let selected = e.target.files[0];\r\n    if (selected && types.includes(selected.type)) {\r\n      setFile(selected);\r\n      setError('');\r\n    } else {\r\n      setFile(null);\r\n      setError('Please select an image file (png or jpg)');\r\n    }\r\n  };\r\n\r\n  //Html to show in browser\r\n  return (\r\n    <div>\r\n      <label>\r\n        <input type=\"file\" style={{height: 0, width: 0}} onChange={handleChange} />\r\n        <span className=\"btn btn-sm btn-outline-info mb-3\">Upload image</span>\r\n      </label>\r\n      <div className=\"output\">\r\n        { error && <div className=\"error\">{ error }</div>}\r\n        { file && <div>{ file.name }</div> }\r\n        { file && <ProgressBar file={file} setFile={setFile} dceId={dceId} scNr={scNr} setUrl={setUrl}/> }\r\n      </div>\r\n    </div>\r\n      );\r\n}\r\n\r\nexport default UploadForm;","import Select from \"react-select\";\r\nimport { useEffect, useState } from \"react\";\r\nimport UploadForm from \"./UploadForm\";\r\n\r\n\r\nconst useNewScenarioHtml = (dceProps, scProps, handleProps, dceDetails, chosen) => {\r\n   // creates html for formsfields and buttons for the NewScenario component\r\n\r\nconst {dceId, dceFeatures} = dceProps;\r\nconst {scNr, setChosen, setIsSaved, isSaved} = scProps;\r\nconst {handleChosen, handleSave, handleEntry, handleCreateAlt} = handleProps;\r\nconst [scenarioHtml, setScenarioHtml] = useState([]);\r\n\r\n// set url for the image and save to chosenList\r\nconst setUrl = (url)=>{\r\n    const chosenList = [...chosen];\r\n    chosenList[0][\"data\"][\"scImg\"]= url;\r\n    setChosen(chosenList);\r\n    setIsSaved(false)\r\n}\r\n\r\nuseEffect(()=>{\r\n\r\n    let tempHtml = [];\r\n    tempHtml.push(\r\n        <div>\r\n        {dceDetails.details&&dceDetails.details.grouped&&chosen[0][\"data\"]&&<h5>Paired with scenario nr: {chosen[0][\"data\"][\"altnr\"]}</h5>}\r\n        <div key=\"form-row\" className=\"form-row\" > \r\n        <h6>Features</h6>\r\n        <div className=\"row\">\r\n  {chosen[0][\"data\"]&& dceFeatures.map((feature,i) =>{\r\n      let options =[{label: feature.featureValue1, value: feature.featureValue1},\r\n        {label: feature.featureValue2, value: feature.featureValue2}];\r\n            return (\r\n           <div key={i} className=\"col-md-4  mb-3\"> <label htmlFor={i} className=\"col-form-label\">{feature.featureName}</label>\r\n            <Select options={options} key={i} placeholder={chosen[0][\"data\"][\"fValues\"][feature.featureName]} defaultValue={chosen[0][\"data\"][\"fValues\"][feature.featureName]} isDisabled={chosen[0][\"data\"][\"altSc\"]} \r\n             onChange={(option)=>handleChosen(option.value, feature.featureName)} id={i}/>\r\n            </div>\r\n            )\r\n        })}\r\n        </div>\r\n        </div>\r\n        {chosen[0][\"data\"]&&<form id=\"textForm\">\r\n        <div>\r\n        <h6>Scenario text</h6>\r\n        <textarea className=\"form-control form-control-sm mb-3\" name=\"scText\" value={chosen[0][\"data\"][\"scText\"]} placeholder=\"Enter scenario text\" id=\"scText\" onChange={e=>handleEntry(e)}></textarea>\r\n         </div>\r\n                               \r\n         <div>\r\n             <h6>Scenario explanation</h6>\r\n             <textarea className=\"form-control form-control-sm mb-3\" type=\"text\" name=\"scExpl\" value={chosen[0][\"data\"][\"scExpl\"]} placeholder=\"Enter additional explanatory text\" id=\"scExpl\" onChange={e=>handleEntry(e)}></textarea>\r\n\r\n         </div>\r\n         <h6>Scenario image link</h6>\r\n               <UploadForm dceId={dceId} scNr={scNr} setUrl={setUrl} />\r\n               {chosen[0][\"data\"][\"scImg\"]&&<img src={chosen[0][\"data\"][\"scImg\"]} className='scImage' alt=\"scenario\"/>}\r\n               {dceDetails.details&&dceDetails.details.grouped&&!chosen[0][\"data\"][\"altnr\"]&&<input className=\"btn  btn-outline-success mb-3\" type=\"button\" onClick={e=>handleCreateAlt(e)} value=\"Save & Create pair\"></input>}\r\n               {(chosen[0][\"data\"][\"altnr\"]||!dceDetails.details.grouped)&&<input className=\"btn  btn-outline-success mb-3\" onClick={(e)=>handleSave(e)} value=\"Save\"></input>}\r\n               </form>}\r\n               {isSaved&&<div className={isSaved}>Scenario has been saved</div>}\r\n         </div>\r\n        )\r\n        setScenarioHtml(tempHtml);\r\n         return       \r\n        },[dceDetails, chosen, isSaved])\r\n        \r\n        return {scenarioHtml}\r\n            \r\n        }\r\n        \r\n\r\n \r\nexport default useNewScenarioHtml;","import React, { useContext } from \"react\";\r\nimport { UserContext } from \"../../providers/UserProvider\";\r\nimport { pemFirestore } from \"../../firebase/config\";\r\nimport useNewScenarioHtml from \"./useNewScenarioHtml\";\r\n\r\nexport default function NewScenario({dceProps, scProps}) {\r\n//Component for adding a new scenario\r\n\r\n    const {dceId, dceFeatures, dceDetails} = dceProps;\r\n    const {scNr, setScNr, chosen, setChosen, handleAddScenario, setIsSaved, isSaved} = scProps;\r\n    const user = useContext(UserContext);\r\n    const uid = user.uid;\r\n\r\n\r\n    //Handles choices from dropdown fValues\r\n    const handleChosen = (value, name)=>{\r\n        const chosenList = [...chosen];\r\n        chosenList[0][\"data\"][\"fValues\"][name]= value;\r\n        setChosen(chosenList);\r\n        setIsSaved(false);\r\n    }\r\n\r\n    //Handles entries from input fields\r\n    const handleEntry = (e)=>{\r\n        e.preventDefault();\r\n        const {name, value} = e.target;\r\n        const chosenList = [...chosen];\r\n        chosenList[0][\"data\"][name]= value;\r\n        setChosen(chosenList);\r\n        setIsSaved(false);\r\n    }\r\n\r\n//Gets features for the other scenario in a pair\r\nconst getAltFValues = (fValueList) =>{\r\n    const groupFeat = dceDetails.details.groupFeature;\r\n    const groupFeatValue = fValueList[groupFeat];\r\n    let newFeatValue;\r\n    dceFeatures.forEach((feature) =>{\r\n        if (feature.featureName===groupFeat){\r\n            if(feature.featureValue1===groupFeatValue){\r\n                newFeatValue = feature.featureValue2;}\r\n            if(feature.featureValue2===groupFeatValue){\r\n                newFeatValue = feature.featureValue1;}\r\n        }\r\n    })\r\n    let altFValueList = {...fValueList};\r\n    altFValueList[groupFeat] = newFeatValue;\r\n    return {altFValueList, newFeatValue }\r\n}\r\n\r\n\r\n//Saves via handleSave and creates the alternative scenario in case of grouped features\r\nconst handleCreateAlt = (e)=>{\r\n    if(fieldsComplete()){\r\n    let seqNr;\r\n    handleAddScenario(scNr)\r\n    .then((nr)=>{seqNr=nr;\r\n        //here handleSave\r\n        const chosenList = [...chosen];\r\n        const fValueList = chosen[0][\"data\"][\"fValues\"];\r\n        const {altFValueList} = getAltFValues(fValueList);\r\n        chosenList[0][\"data\"][\"altnr\"]= seqNr;\r\n        setChosen(chosenList);\r\n        // setNewScNr(seqNr);\r\n        setScNr(seqNr);\r\n        handleSave(e)\r\n        .then(()=>{\r\n        //load data in forms\r\n        setChosen([{}]);\r\n        pemFirestore.collection('users').doc(uid).collection('DceList').doc(dceId).collection('Scenarios').doc(seqNr.toString()).get()\r\n    .then((doc)=>{\r\n        let data = doc.data();\r\n        let newChosenList = [data]\r\n        newChosenList[0][\"data\"][\"fValues\"]=altFValueList;\r\n        setChosen(newChosenList);\r\n        let response = pemFirestore.collection('users').doc(uid).collection('DceList').doc(dceId).collection('Scenarios');\r\n        response.doc(seqNr.toString()).set(newChosenList[0]);\r\n     })\r\n    })\r\n    }).catch((err)=>{\r\n        console.log('Error with saving scenario'+err);\r\n    })\r\n}\r\n}\r\n\r\n//Checks if all required field have an entry\r\nconst fieldsComplete = ()=>{\r\n    let textOrImageComplete = false;\r\n    let featuresComplete = false;\r\n    if (chosen[0][\"data\"][\"scText\"].length!==0 || chosen[0][\"data\"][\"scImg\"].length!==0){\r\n        textOrImageComplete=true}\r\n    else{\r\n    alert(\"Fill in the Scenario Text or upload a Scenario Image, or do both\") \r\n    }\r\n    featuresComplete= !dceFeatures.some(feature=>{\r\n        if(chosen[0][\"data\"][\"fValues\"][feature.featureName].length===0){\r\n            alert(\"Select a value for every feature in the scenario\");\r\n             \r\n        } return (chosen[0][\"data\"][\"fValues\"][feature.featureName].length===0);\r\n    })\r\nreturn textOrImageComplete&&featuresComplete;    \r\n}\r\n\r\n //Checks if all required field have an entry and saves to Firestore if ok.\r\n //Else alert with error message\r\nconst handleSave = async (e)=>{\r\ne.preventDefault();\r\n\r\nif(fieldsComplete()){\r\nlet response = pemFirestore.collection('users').doc(uid).collection('DceList').doc(dceId).collection('Scenarios');\r\nresponse.doc(scNr.toString()).set(chosen[0]);\r\nconst fValues = chosen[0][\"data\"][\"fValues\"];\r\nconst altnr = chosen[0][\"data\"][\"altnr\"];\r\nconst {altFValueList} = getAltFValues(fValues);\r\nif (altnr){\r\n    let response = pemFirestore.collection('users').doc(uid).collection('DceList').doc(dceId).collection('Scenarios');\r\n        response.doc(altnr.toString()).update({\r\n            \"data.fValues\": altFValueList\r\n        });\r\n}\r\nsetIsSaved(true);\r\n}\r\n}\r\n\r\n//gets html for this page\r\n// const dceOutProps = {dceId, dceFeatures, dceDetails};\r\n// const scOutProps = {scNr, setScNr, chosen, setChosen, handleAddScenario, setIsSaved, isSaved};\r\nconst handleProps = {handleChosen, handleSave, handleEntry, handleCreateAlt};\r\nconst {scenarioHtml} = useNewScenarioHtml(  handleProps, dceProps, scProps, dceDetails, chosen );\r\n\r\n//Html to show in browser\r\n    return (\r\n        <div key=\"1\">\r\n         {scenarioHtml}\r\n        </div>\r\n    )\r\n}\r\n","import { pemFirestore } from \"../../firebase/config\";\r\nimport  { useState, useEffect } from \"react\";\r\n\r\n\r\nconst useShowScList = (uid, dceId, scListChanged) =>{ //loads list of scenario's from dB and returns them\r\n    const [scList, setScList] = useState([]);\r\n\r\nuseEffect(() => {\r\n    if(dceId){\r\n        pemFirestore.collection('users').doc(uid).collection('DceList').doc(dceId).collection('Scenarios').orderBy('data.nr')\r\n        .get()\r\n        .then((data)=>{\r\n        let tempDocs = [];\r\n            data.docs.forEach(doc => {\r\n            tempDocs.push({...doc.data(), id: doc.id});\r\n            });\r\n        setScList(tempDocs) ;\r\n        })\r\n        }\r\n  \r\n}, [dceId, uid, scListChanged])\r\n\r\nreturn {scList}\r\n}\r\nexport default useShowScList","import React, { useContext, useState, useEffect } from \"react\";\r\nimport { UserContext } from \"../../providers/UserProvider\";\r\nimport { pemFirestore } from \"../../firebase/config\";\r\nimport NewScenario from \"./NewScenario\";\r\nimport { Link } from \"react-router-dom\";\r\nimport useShowScList from \"./useShowScList\";\r\n\r\n\r\nexport default function ScenarioList({dceNameEdit, dceId, dceFeatures, dceDetails}) {//Creates list of scenario's incl frame for details\r\n\r\n    const user = useContext(UserContext);\r\n    const uid = user.uid;\r\n    const [chosen, setChosen] = useState([{nr: 0}]);\r\n    const [scListChanged, setScListChanged] = useState(''); // requires unique content each time list needs refresh\r\n    const [scNr, setScNr] = useState(\"\");\r\n    const [isSaved, setIsSaved] = useState(false);\r\n    const {scList} = useShowScList(uid, dceId, scListChanged)\r\n\r\n\r\n    //show scenario list when dceId is changed\r\n    useEffect(() => {\r\n            setChosen([{}]);\r\n            setScNr(null);\r\n            setIsSaved(false)\r\n      }, [dceId])\r\n\r\n// Adds scenario with id which is first available unique number \r\n// Features are taken from dce\r\n    const handleAddScenario = async(altnr) =>{\r\n        if(dceId){\r\n            const fValues ={};\r\n            dceFeatures.forEach(feature=>{\r\n                fValues[feature.featureName]=\"\";\r\n            })\r\n            let response = pemFirestore.collection('users').doc(uid).collection('DceList').doc(dceId).collection('Scenarios').orderBy('data.nr');\r\n        let data =  await response.get();\r\n        let seqNr=1; // set seqNr to 1 and check if it is available, otherwise raise by 1 and repeat\r\n        data.docs.forEach(doc => {\r\n            if(doc.data().data.nr!==seqNr){\r\n                return;\r\n            }\r\n            else {\r\n                seqNr +=1;\r\n            }\r\n            });\r\n            let altSc = false;\r\n            if (altnr){altSc = true} // if altnr was specified, the new sc will be the pair of this alt sc\r\n            setChosen([{}]);\r\n            const detailData = {data: {nr: seqNr, altnr: altnr, altSc: altSc, fValues, scText: \"\", scImg: \"\", scExpl: \"\"}};\r\n            let response2 = pemFirestore.collection('users').doc(uid).collection('DceList').doc(dceId).collection('Scenarios');\r\n            response2.doc(seqNr.toString()).set(detailData);\r\n            setChosen([detailData]);\r\n            setScNr(seqNr);\r\n            setIsSaved(false);\r\n            setScListChanged(seqNr.toString()+'created');\r\n      return seqNr;\r\n    }\r\n}\r\n\r\n//delete scenario from database and refresh list\r\nconst deleteSc = (e) => {\r\n    let sc;\r\n    if(e.target.parentElement.parentElement.getAttribute('data-id')){\r\n    sc = e.target.parentElement.parentElement.getAttribute('data-id');\r\n    } else{\r\n        sc = e.target.parentElement.getAttribute('data-id');\r\n    }\r\n    let altSc = scList.find(scx=>scx.id===sc).data.altnr;\r\n    pemFirestore.collection('users').doc(uid).collection('DceList').doc(dceId).collection('Scenarios').doc(sc).delete()\r\n    .then(() => {\r\n        console.log(\"Scenario with ID \"+sc+ \"  successfully deleted!\");\r\n        if (sc===scNr){ //if deleted sc was shown on screen, clear it\r\n            setScNr(\"\");\r\n            setChosen([{}]);\r\n        }\r\n        setScListChanged(sc+'deleted'); //set trigger to refresh list of scenario's\r\n        setIsSaved(false);\r\n    }).catch((error) => {\r\n        console.error(\"Error removing document: \", error);\r\n    });\r\n    if (altSc){ // if there is a pair scenario coupled to this scenario (altSc), delete that too\r\n    pemFirestore.collection('users').doc(uid).collection('DceList').doc(dceId).collection('Scenarios').doc(altSc.toString()).delete().then(() => {\r\n        console.log(\"Alt scenario with ID \"+altSc.toString()+ \"  successfully deleted!\");\r\n        setScListChanged(altSc+'deleted');\r\n    }).catch((error) => {\r\n        console.error(\"Error removing document: \", error);\r\n    });}\r\n}\r\n\r\n//select scenario to show and edit details \r\nconst editSc = (e) => {\r\n    setChosen([{}]);\r\n    let sc;\r\n    if(e.target.parentElement.parentElement.getAttribute('data-id')){\r\n    sc = e.target.parentElement.parentElement.getAttribute('data-id');\r\n    } else{\r\n        sc = e.target.parentElement.getAttribute('data-id');\r\n    }\r\n    setScNr(sc);\r\n    pemFirestore.collection('users').doc(uid).collection('DceList').doc(dceId).collection('Scenarios').doc(sc).get()\r\n.then((doc)=>{\r\n    let data = doc.data();\r\n    setChosen([data]);\r\n    setIsSaved(false);\r\n }).catch((err)=>{\r\n    console.log('Error with loading scenario'+err);\r\n})\r\n}\r\n\r\nconst dceProps = {dceId, dceFeatures, dceDetails};\r\nconst scProps = {scNr, setScNr, chosen, setChosen, handleAddScenario, setIsSaved, isSaved}\r\n\r\n\r\n    //html to show in browser\r\n    return (\r\n        <div>\r\n            <h4><u>Details</u> for <b> {dceNameEdit}</b>{scNr&&<span> - Scenario nr. {scNr}</span>}{!scNr&&<span> - Select a scenario nr.</span>}</h4>\r\n            <div className=\"\">\r\n            <h6>{dceDetails&&dceId&&<span> <Link to={{pathname:\"/app/\"+uid+\"/\"+ dceId}}>\r\n                    <button className=\"btn btn-sm btn-outline-info mx-1\" ><i className=\"material-icons mat-icon mt-1\">play_circle_outline</i></button>\r\n                    </Link></span>}\r\n                    {dceDetails&&dceId&&<span> Play this DCE</span>} {dceDetails&&dceId&& <span> <hr className=\"ruler detailsRuler\"/> <button className=\"btn btn-sm btn-outline-info\" onClick={() => {let clipText = window.location.href+\"app/\"+uid+\"/\"+ dceId; navigator.clipboard.writeText(clipText)}}>Copy DCE link </button></span>} </h6></div>\r\n           <div className=\"pb-4\"><h6> {dceDetails.details&&dceDetails.details.grouped&&<span>Group feature: {dceDetails.details.groupFeature}</span>} {dceDetails.details&& <span> <hr className=\"ruler detailsRuler\"/> Questions in DCE: {dceDetails.details.nrQuestions}</span>}</h6>\r\n           </div>\r\n            <div className=\"row\">\r\n   <div className=\"scenarioList col col-6 col-md-3 col-sm-5\">\r\n    <h5>Scenario's</h5>\r\n    <ul>\r\n    <li key=\"header\" className=\"listRuler mb-1\">Nr.  <hr className=\"ruler\"/> Edit <hr className=\"rulerSm\"/>&nbsp;Delete </li>\r\n                {scList && scList.map((sc,i)=>{\r\n                return(\r\n                    <div  key={i} className=\"\">\r\n                    <h5 className=\"mt-3\"><li className=\"listRuler mb-1\" data-id={sc.id}><button className=\"btn btn-sm btn-outline-info\" onClick={editSc}>{sc.data.nr}</button>\r\n                    <hr className=\"ruler\"/> \r\n                    <button className=\"btn  btn-outline-warning btn-sm mx-2\" onClick={editSc} > <i className=\"material-icons mat-icon\">edit</i></button>\r\n                    <hr className=\"rulerSm\"/>\r\n                    <button className=\"btn  btn-outline-success btn-sm mx-2\" onClick={(e) => { if (window.confirm('Are you sure you wish to delete this scenario?')) deleteSc(e) }} > <i className=\"material-icons mat-icon\">delete_forever</i></button></li></h5>\r\n                    </div>\r\n                )\r\n                })\r\n            }\r\n           {dceId&&<li className=\"mb-2\"><button className=\"btn btn-sm btn-outline-info\" onClick={()=>handleAddScenario(null)}>Add scenario</button></li>}\r\n    </ul>\r\n    </div>\r\n    \r\n    <div className=\"col\">\r\n        <NewScenario dceProps={dceProps} scProps={scProps}/>\r\n    </div>\r\n    </div>\r\n        </div>\r\n    )\r\n}\r\n","import { useState, useEffect } from 'react'\r\nimport { pemFirestore } from \"../../firebase/config\";\r\n\r\n\r\nconst useShowDceList = (uid, dceListChanged) => {//loads the list of dce's from dB and returns them\r\n    const [dceHtml, setDceHtml] = useState([]);\r\n    const [dceNameList, setDceNameList] = useState([]);\r\n\r\n        useEffect(()=>{\r\n        pemFirestore.collection('users').doc(uid).collection('DceList').get()\r\n            .then((data)=>{\r\n            let tempDocs = [];\r\n            let tempNameList = [];\r\n            data.docs.forEach(doc => {\r\n                tempDocs.push({...doc.data(), id: doc.id});\r\n                tempNameList.push(doc.data().name.dceName);\r\n              });\r\n            setDceHtml(tempDocs) ;\r\n            setDceNameList(tempNameList);\r\n        })\r\n    },[uid, dceListChanged])\r\n\r\n\r\n    return {dceHtml, dceNameList}\r\n}\r\n \r\nexport default useShowDceList;","import  {  useEffect, useState } from \"react\";\r\nimport { pemFirestore } from \"../../firebase/config\";\r\n\r\n\r\nconst useGetDceDetails = (e, uid)=>{// Gets dce details from database after it has been selected\r\n\r\n    const [dceNameEdit, setDceNameEdit] = useState('(Click on ICON in DCE list)');\r\n    const [dceFeatures, setDceFeatures] = useState([]);\r\n    const [dceId, setDceId] = useState('');\r\n    const [dceDetails, setDceDetails] = useState([]);\r\n\r\n    useEffect(() => {\r\n        if(e){\r\n        let dce;\r\n        //get parent element as well as parent of parent to avoid misclick on icon\r\n            if(e.target.parentElement.parentElement.getAttribute('data-id')){\r\n                dce = e.target.parentElement.parentElement.getAttribute('data-id');\r\n            } else{\r\n                dce = e.target.parentElement.getAttribute('data-id');\r\n            }\r\n            pemFirestore.collection('users').doc(uid).collection('DceList').doc(dce).get()\r\n            .then((doc)=>{\r\n                const dceName = doc.data().name.dceName;\r\n                const tempDetails = {details: {grouped: doc.data().grouped, groupFeature: doc.data().groupFeature, nrQuestions: doc.data().nrQuestions}}\r\n                setDceNameEdit(dceName);\r\n                setDceFeatures(doc.data().features)\r\n                setDceId(dce);\r\n                setDceDetails(tempDetails);\r\n            })\r\n            .catch((error)=>{\r\n                console.error(\"Error loading document: \", error);\r\n        })\r\n    }\r\n    }, [e, uid])\r\n    return {dceNameEdit, dceFeatures, dceId, dceDetails}\r\n}\r\n\r\nexport default useGetDceDetails;","import React, { useContext, useState } from \"react\";\r\nimport { UserContext } from \"../../providers/UserProvider\";\r\nimport { pemFirestore } from \"../../firebase/config\";\r\nimport NewDce from \"./NewDce\";\r\nimport ScenarioList from \"./ScenarioList\";\r\nimport { Link } from \"react-router-dom\";\r\nimport useShowDceList from \"./useShowDceList\";\r\nimport useGetDceDetails from \"./useGetDceDetails\";\r\n\r\n\r\nexport default function DceList() { //Shows list of dce's with icons for editing, configuring aspects and delete.\r\n\r\n    const [showNew, setShowNew] = useState(false);\r\n    const [dceListChanged, setDceListChanged] = useState('');\r\n    const [dceSelectEvent, setDceSelectEvent] = useState(null);\r\n    const user = useContext(UserContext);\r\n    const uid = user.uid;\r\n    const {dceHtml, dceNameList} = useShowDceList(uid, dceListChanged); \r\n    const {dceNameEdit, dceFeatures, dceId, dceDetails} = useGetDceDetails(dceSelectEvent, uid);\r\n\r\n\r\n//delete a dce from database and refresh list\r\nconst deleteDce = (e) => {\r\n    let dce;\r\n    if(e.target.parentElement.parentElement.getAttribute('data-id')){\r\n        dce = e.target.parentElement.parentElement.getAttribute('data-id');\r\n    } else{\r\n        dce = e.target.parentElement.getAttribute('data-id');\r\n    }    \r\n    pemFirestore.collection('users').doc(uid).collection('DceList').doc(dce).delete()\r\n    .then(() => { console.log(\"Document with ID\"+dce+ \"  successfully deleted!\");\r\n                setDceListChanged(dce); })\r\n    .catch((error) => { console.error(\"Error removing document: \", error); });\r\n}\r\n\r\n// shows or hide form for new DCE\r\nconst showNewDceForm = ()=>{\r\n    if(showNew){\r\n        setShowNew(false)\r\n    }\r\n    else if(!showNew){\r\n        setShowNew(true)\r\n    }\r\n}\r\n\r\n  //html to show in browser\r\n    return (\r\n    <div>\r\n        <div className=\"row my-4\">\r\n            <div className=\"listContainer col col-12 col-sm-3\">\r\n             <div className=\" col-auto \">\r\n             <h4><u>DCE list</u></h4>\r\n             <ul>\r\n                {dceHtml && dceHtml.map((dce, i)=>{\r\n                    return(\r\n                        <div key={i} className=\"\">\r\n                            <h5 className=\"mt-3\"><li  className=\"listRuler mb-1\"  data-id={dce.id}> <b>{dce.name.dceName}</b>\r\n                            <hr className=\"ruler\"/> \r\n                            <button className=\"btn btn-sm btn-outline-warning mx-1\" onClick={e=>{setDceSelectEvent(e)}}><i className=\"material-icons mat-icon mt-1\">edit</i></button>\r\n                            <hr className=\"rulerSm\"/>\r\n                             {dce.grouped&&<Link to={{pathname:\"/aspectList/\"+uid+\"/\"+ dce.id, dceFeatures: dce.features, groupFeature: dce.groupFeature, dceNameEdit: dceNameEdit}}>\r\n                                <button className=\"btn btn-sm btn-outline-danger mx-1\" ><i className=\"material-icons mat-icon mt-1\">settings</i></button>\r\n                              </Link>}\r\n                            <hr className=\"rulerSm\"/>\r\n                            <button className=\"btn  btn-outline-success btn-sm mx-1\" onClick={(e) => { if (window.confirm('Are you sure you wish to delete this DCE?')) deleteDce(e) } }><i className=\"material-icons mat-icon mt-1\">delete_forever</i></button>\r\n                            </li></h5>\r\n                        </div>\r\n                )\r\n                })\r\n                }\r\n            </ul>\r\n            </div>\r\n                <div className=\"row my-4\">\r\n                    <div className=\"col-auto  \">\r\n                        <h4><u>Create new DCE</u></h4>\r\n                        <div> <button className=\"btn btn-sm btn-outline-info\" onClick={showNewDceForm}> new DCE</button>\r\n                        </div>\r\n                    {showNew&&<NewDce showNewDceForm={showNewDceForm} setDceListChanged={setDceListChanged} dceNameList={dceNameList} />}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n                <div className=\"col scenarioContainer\">\r\n                    <ScenarioList dceNameEdit = {dceNameEdit} dceId={dceId} dceFeatures={dceFeatures}  dceDetails={dceDetails}/>\r\n                </div>\r\n        </div>\r\n\r\n    </div>\r\n    )\r\n}\r\n","import React, { useContext, useState } from \"react\";\r\nimport { UserContext } from \"../../providers/UserProvider\";\r\nimport { Link } from \"react-router-dom\";\r\nimport ResultDce from \"../result/ResultDce\";\r\nimport useShowDceList from \"./useShowDceList\";\r\nimport useGetDceDetails from \"./useGetDceDetails\";\r\n\r\n export default function Dces() { // Shows list of dce's with icons for running them or see results (for grouped dce's)\r\n      \r\n    const [dceSelectEvent, setDceSelectEvent] = useState(null);\r\n    const user = useContext(UserContext);\r\n    const uid = user.uid;\r\n    const {dceHtml} = useShowDceList(uid); \r\n    const {dceFeatures, dceId, dceDetails} = useGetDceDetails(dceSelectEvent, uid);\r\n\r\n\r\n\r\n  //html to show in browser\r\n    return (\r\n             <div>\r\n        <div className=\"row my-4\">\r\n            <div className=\"listContainer col col-12 col-sm-3\">\r\n           <div className=\" col-auto \">\r\n            <h4><u>DCE list</u></h4>\r\n            <ul>\r\n            {dceHtml && dceHtml.map((dce, i)=>{\r\n                return(\r\n                    <div key={i} className=\"\">\r\n                        <h5 className=\"mt-3\"><li className=\"listRuler mb-1\"  data-id={dce.id}> <b>{dce.name.dceName}</b>\r\n                            <hr className=\"ruler\"/> \r\n                            <Link to={{pathname:\"/app/\"+uid+\"/\"+ dce.id}}>\r\n                            <button className=\"btn btn-sm btn-outline-info mx-1\" ><i className=\"material-icons mat-icon mt-1\">play_circle_outline</i></button>\r\n                            </Link>\r\n                            {dce.grouped&&<button className=\"btn btn-sm btn-outline-danger mx-1\" onClick={e=>{setDceSelectEvent(e)}}><i className=\"material-icons mat-icon mt-1\">poll</i></button>} \r\n                        </li></h5>\r\n                    </div>\r\n                )\r\n                })\r\n            }\r\n        </ul>\r\n</div>\r\n                    <div className=\"row my-4\">\r\n                        <div className=\"col-auto  \">\r\n                            <div> \r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n</div>\r\n\r\n<div className=\"col scenarioContainer\">\r\n    <ResultDce  dceDetails={dceDetails} dceId={dceId} dceFeatures={dceFeatures} userId={uid} />\r\n</div>\r\n</div>\r\n\r\n</div>\r\n    )\r\n}\r\n","//Handles input for aspects\r\nconst handleInputA = (e, currentName) => {\r\n    const name = e.target.value;\r\n    const nameList = [...currentName];\r\n    nameList[0]=name;\r\n    return ( \r\n        nameList\r\n     );\r\n}\r\n \r\nexport default handleInputA;","import React, { useState } from \"react\";\r\nimport { pemFirestore } from \"../../firebase/config\";\r\nimport { useParams} from \"react-router-dom\";\r\nimport handleInputA from \"./handleAInputs\";\r\n\r\n\r\nexport default function NewAspect({ setShowAspectsFlag, showNewAspectForm}) {\r\n  //Form for creating a new aspect\r\n\r\n    const [aspectName, setAspectName] = useState(['name']);\r\n    const [aspectDescr, setAspectDescr] = useState(['descr']);\r\n    const {userId, dceId } = useParams();\r\n\r\n \r\n  //Save aspect if all fields are filled in\r\n    const saveAspect = (e)=>{\r\n        e.preventDefault();\r\n        let aspectColl = pemFirestore.collection('users').doc(userId).collection('DceList').doc(dceId).collection('AspectList');\r\n        aspectColl.add( {aspectName: aspectName[0], aspectDescr: aspectDescr[0]})\r\n        .then((docRef)=>{\r\n              console.log(\"Document written with ID: \", docRef.id);\r\n              aspectColl.doc(docRef.id).collection('Combis').doc('0').set({nr: 0, groupValue: \"\", filters: []})\r\n              setShowAspectsFlag(\"new aspect saved id \"+docRef.id);\r\n        })\r\n        .catch((error) => {\r\n            console.error(\"Error adding document: \", error);\r\n        });\r\n        showNewAspectForm();\r\n    \r\n  }\r\n\r\n    // handle name input change\r\n    const handleNameInputChange = (e) => {\r\n      const nameList = handleInputA(e, aspectName)\r\n        setAspectName(nameList);\r\n    }\r\n\r\n    // handle descr input change\r\n    const handleDescrInputChange = (e) => {\r\n      const descrList = handleInputA(e, aspectDescr);\r\n      setAspectDescr(descrList);\r\n  }\r\n\r\n \r\n  //html to show in browser\r\n  return (\r\n        <div>\r\n            <form className=\"form-inline\">\r\n                <div className=\"form-floating\">\r\n                    <input type=\"text\" className=\"form-control\" name=\"aspectName\"  placeholder=\"Aspect name\" id=\"aspectName\" \r\n                    required onChange={handleNameInputChange}></input>\r\n                    <label htmlFor=\"aspectName\" className=\"block\">Name: </label>\r\n                    </div>\r\n                    <div className=\"form-floating\">\r\n                    <textarea type=\"text\" rows=\"7\" className=\"form-control\" name=\"aspectDescr\"  placeholder=\"Description\" id=\"aspectDescr\" \r\n                    required onChange={handleDescrInputChange}></textarea>\r\n                    <label htmlFor=\"aspectDescr\" className=\"block\">Description: </label>\r\n                    </div>\r\n      <button className=\"btn btn-sm btn-outline-success\" onClick={saveAspect} >Save aspect</button>\r\n          </form>\r\n        </div>\r\n    )\r\n}\r\n","import React, {useState} from 'react';\r\nimport { useLocation, useHistory} from \"react-router-dom\";\r\nimport useAspectEditHtml from './useAspectEditHtml';\r\n\r\nexport default function AspectEdit({aspectProps, editFunctions, editProps}) {\r\n//Component for editing an aspect\r\n\r\n    const [filterSaved, setFilterSaved] = useState([false])\r\n    const location = useLocation();\r\n    const dceFeatures = location.dceFeatures;\r\n    const groupFeature = location.groupFeature;\r\n    const history = useHistory();\r\n    const {saveFilters, setAgeGenderValues, setGroupValues, setChosenFeatures, handleAddCombi, handleDeleteCombi} = editFunctions\r\n    const {aspectId, aspectNameEdit, aspectDescr, aspectFilters} = aspectProps;\r\n    const {groupValues, chosenFeatures, ageGenderValues } = editProps;\r\n\r\n    if(groupFeature===undefined){//if groupfeature is undefined, go to main page\r\n        history.push('/');\r\n    }\r\n   \r\n    //Handles feature name from form\r\n    const handleFName = (fName, cIndex)=>{\r\n        const chosenList = [...chosenFeatures];\r\n        chosenList[cIndex][0]={fName: fName};\r\n        const tempSavedList = [...filterSaved];\r\n        tempSavedList[cIndex]=false;\r\n        setChosenFeatures(chosenList);\r\n        setFilterSaved(tempSavedList);\r\n    }\r\n\r\n    //Handles feature value from form\r\n    const handleFValue = (fValue, cIndex) =>{\r\n        const chosenList = [...chosenFeatures];\r\n        chosenList[cIndex][0]['fValue'] = fValue;\r\n        const tempSavedList = [...filterSaved];\r\n        tempSavedList[cIndex]=false;\r\n        setChosenFeatures(chosenList);\r\n        setFilterSaved(tempSavedList);\r\n    }\r\n    \r\n    //Handles value for group feature selected in form\r\n    const handleGroupValue = (value, cIndex)=>{\r\n        let tempGValues = [...groupValues]\r\n        tempGValues[cIndex]=value;\r\n        const tempSavedList = [...filterSaved];\r\n        tempSavedList[cIndex]=false;\r\n        setGroupValues(tempGValues);\r\n        setFilterSaved(tempSavedList);\r\n        }\r\n \r\n        //handles age and gender values as selected\r\n        const handleAgeGenderValue = (name, value, cIndex) =>{\r\n            let tempAgeGenderValues = [...ageGenderValues];\r\n            tempAgeGenderValues[cIndex][name] = value;\r\n            const tempSavedList = [...filterSaved];\r\n            tempSavedList[cIndex]=false;\r\n            setAgeGenderValues(tempAgeGenderValues);\r\n            setFilterSaved(tempSavedList);\r\n        }\r\n\r\n    //Checks if all required fields are filled in and then saves to database.\r\n    const handleSave = (e)=>{\r\n        e.preventDefault();\r\n        const cIndex = e.target.dataset.id;\r\n        let tempList = [...aspectFilters[cIndex],...chosenFeatures[cIndex]];\r\n        let tempChosen = [...chosenFeatures];\r\n        if(tempChosen[cIndex][0]&&tempChosen[cIndex][0]['fName'].length>0&&!tempChosen[cIndex][0]['fValue']){\r\n            alert(\"Select a value for the filter feature before saving\")\r\n        }else{\r\n        tempChosen[cIndex] = [];\r\n        if (groupValues[cIndex].length===0){\r\n            alert(\"Select a value for the Group feature before saving\")\r\n            } else{\r\n            saveFilters(cIndex, tempList, tempChosen, groupValues, ageGenderValues);\r\n            const tempSavedList = [...filterSaved];\r\n            tempSavedList[cIndex]=true;\r\n            setFilterSaved(tempSavedList);\r\n            }\r\n        }\r\n    }\r\n//Deletes a filter\r\n    const handleDelete = (e, index, cIndex)=>{\r\n        e.preventDefault();\r\n        let tempCIndex = cIndex.toString();\r\n        let tempFilters = [...aspectFilters[tempCIndex]];\r\n        let emptyChosen = [];\r\n        aspectFilters.forEach(()=>{emptyChosen.push([])});\r\n        tempFilters.splice(index, 1);\r\n        saveFilters(tempCIndex, tempFilters, emptyChosen, groupValues, ageGenderValues);\r\n    }\r\n\r\n    //Loads html for displaying aspects and edit forms\r\n    const handleProps = {handleDelete, handleGroupValue, handleFName, handleFValue, handleSave, handleAgeGenderValue, handleDeleteCombi};\r\n    const valueProps = {aspectId, chosenFeatures, groupValues, groupFeature, aspectFilters,  dceFeatures, ageGenderValues, filterSaved};\r\n    const {fromDb} = useAspectEditHtml(handleProps, valueProps);  \r\n\r\n//Button for adding a combination filter button\r\nlet addCombiButton = [];\r\n   if(aspectNameEdit!=='(Click on ICON in Aspect list)'){\r\n       addCombiButton.push(\r\n        <button className=\"btn btn-sm btn-outline-info my-4\" onClick={handleAddCombi}>add combination feature</button>\r\n        )\r\n}\r\n\r\n//returns html to the browser\r\n    return (\r\n        <div>\r\n            <h4 className=\"mb-1\">Define aspect for <b>{aspectNameEdit}</b></h4>\r\n            <h6 className=\"text-secondary pb-3\">Description: {aspectDescr}</h6>     \r\n              {fromDb}\r\n              {addCombiButton}\r\n        </div>\r\n    )\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Select from \"react-select\";\r\n\r\n\r\nexport default function useAspectEditHtml(aspectId, chosenFeatures, groupValues, aspectFilters, handleDeleteCombi, dceFeatures, handleDelete, handleGroupValue, groupFeature, handleFName, handleFValue, handleSave, handleAgeGenderValue, ageGenderValues, filterSaved) {\r\n//create html for aspect edit screen\r\n\r\n    const [fromDb, setFromDb] = useState([]);\r\n    const helperArray = [{}];\r\n    const ageOptions = [{label: \"younger than 25 years\", value: \"young\"},{label: \"25 years or older\", value: \"old\"}];\r\n    const genderOptions = [{label: \"female\", value: \"female\"},{label: \"male\", value: \"male\"}]\r\n   \r\nuseEffect(() => {\r\n    let tempFromDB =[];\r\n    aspectFilters.forEach((combi, cIndex)=>{\r\n        tempFromDB.push( //add following html for each combi\r\n           <div id={cIndex}> {(cIndex!==0)&&(<h5 className=\"my-5\">\r\n           <button onClick={(e)=>handleDeleteCombi(e,cIndex)} className=\"btn  btn-outline-success btn-sm mx-2\"  > <i className=\"material-icons mat-icon\">delete_forever</i></button>\r\n           combined with: \r\n           </h5>\r\n           )}\r\n           <h5>Select value for group feature - {groupFeature}</h5>\r\n\r\n           <label htmlFor=\"groupVal\">Group value</label>\r\n<div className=\"selectInputs\">\r\n           {dceFeatures&&helperArray.map((c,i)=>{return (<Select key={`${aspectId}-grValue- ${cIndex}`} options={[{label: dceFeatures.find(x=>x.featureName===groupFeature).featureValue1, value: dceFeatures.find(x=>x.featureName===groupFeature).featureValue1},\r\n{label: dceFeatures.find(x=>x.featureName===groupFeature).featureValue2, value: dceFeatures.find(x=>x.featureName===groupFeature).featureValue2}]} placeholder={groupValues[cIndex]|| \"Select...\"} onChange={(option) => handleGroupValue(option.value, cIndex)} />\r\n)})}   \r\n</div>\r\n          <h5>Saved features and values</h5>\r\n\r\n           </div>\r\n        )\r\n        combi.forEach((filter, index)=>{\r\n        tempFromDB.push(\r\n        <div id={index} className=\"my-3\"><div className=\"savedFeatures my-2 mx-3 px-5 py-1 p-3 border rounded\">{filter.fName}</div><span className=\"savedFeatures mx-3 px-5 py-1 border rounded\">{filter.fValue}</span>\r\n            <span>\r\n               <button onClick={(e)=>handleDelete(e,index, cIndex)} className=\"btn  btn-outline-success btn-sm mx-2\"  > <i className=\"material-icons mat-icon\">delete_forever</i></button>\r\n               </span>\r\n          </div>\r\n    ) // end of fromDb pt1\r\n}) // end of combi \r\n\r\ntempFromDB.push( //html for adding filter form\r\n    <div>\r\n          <span>\r\n            <form>\r\n              <label htmlFor='fNames' className=\"col-md-3 col-form-label\">Add filter feature </label>\r\n                  <div className=\"selectInputs\">\r\n                  <Select key={`${aspectId}-fName- ${cIndex}`} options={dceFeatures&&dceFeatures.map((feature,ind) =>{\r\n                          let optionHtml = feature.featureName;\r\n                          let isDisabled = false;\r\n                          if (feature.featureName===groupFeature){\r\n                              isDisabled = true\r\n                          }\r\n                          return (\r\n                              {label: optionHtml, value: optionHtml, isDisabled: isDisabled}\r\n                          )\r\n                      })}\r\n                      id=\"fNames\"\r\n                      onChange={(option) => handleFName(option.value, cIndex)}  />\r\n                    </div>\r\n              </form>\r\n              {dceFeatures&&<form>\r\n            \r\n                    <div className=\"selectInputs pb-3\">\r\n                        {chosenFeatures[cIndex][0]&&chosenFeatures[cIndex].map((c,i)=>{return (<Select key={`${aspectId}-fValue- ${cIndex}`} id=\"fValues\" \r\n                        options={[{label: dceFeatures.find(x=>x.featureName===chosenFeatures[cIndex][0][\"fName\"]).featureValue1, value: dceFeatures.find(x=>x.featureName===chosenFeatures[cIndex][0][\"fName\"]).featureValue1},\r\n                        {label: dceFeatures.find(x=>x.featureName===chosenFeatures[cIndex][0][\"fName\"]).featureValue2, value: dceFeatures.find(x=>x.featureName===chosenFeatures[cIndex][0][\"fName\"]).featureValue2}]} \r\n                        placeholder=\"Enter filter value\" onChange={(option) => handleFValue(option.value, cIndex)} />\r\n                        )})}\r\n                    </div>\r\n                    <div className=\"selectInputs pb-3\">\r\n                        <label htmlFor='ageFilter' className=\"\">Optional filters for age and gender of participants </label>\r\n                        {ageGenderValues[cIndex]&&<Select options={ageOptions} isClearable id=\"ageFilter\" name=\"age\" placeholder={ageGenderValues[cIndex][\"age\"]|| \"Select age filter ...\"} onChange={(option, name)=>{let value; if(option==null){value=\"\"}else{value=option.value};handleAgeGenderValue(name.name, value, cIndex)}}/>}\r\n                        {ageGenderValues[cIndex]&&<Select options={genderOptions} isClearable id=\"genderFilter\" name=\"gender\" placeholder={ageGenderValues[cIndex][\"gender\"]|| \"Select gender filter ...\"} onChange={(option, name)=>{let value; if(option==null){value=\"\"}else{value=option.value};handleAgeGenderValue(name.name, value, cIndex)}}/>}\r\n                    </div>\r\n            </form>}\r\n        </span>\r\n        <button data-id={cIndex} className=\"btn btn-sm btn-outline-info mb-3\" onClick={handleSave}>save filter feature and group value</button>\r\n        {filterSaved[cIndex]&&<h6>Filter saved</h6>}\r\n    </div>\r\n    ) // end of fromDb pt2\r\n}) // end of aspect\r\n\r\n    setFromDb(tempFromDB);\r\n    return\r\n    \r\n}, [chosenFeatures, groupValues, ageGenderValues])\r\n   \r\n\r\n    return {fromDb}\r\n    \r\n}\r\n","import { useState, useEffect } from \"react\";\r\nimport { pemFirestore } from \"../../firebase/config\";\r\n\r\n\r\nconst useGetAspectList = (userId, dceId, showAspectsFlag)=>{//get list of aspects from dB\r\nconst [aspects, setAspects] = useState([]);\r\n\r\n    useEffect(() => {\r\n        if(userId&&dceId){\r\n        let response = pemFirestore.collection('users').doc(userId).collection('DceList').doc(dceId).collection('AspectList');\r\n        response.get()\r\n        .then((data)=>{\r\n            let tempDocs = [];\r\n            data.docs.forEach(doc => {\r\n                tempDocs.push({...doc.data(), id: doc.id});\r\n            });\r\n            setAspects(tempDocs) ;\r\n        }).catch((err)=>{\r\n            console.log('Error with loading document'+err);\r\n        })\r\n    }\r\n    }, [userId, dceId, showAspectsFlag]);\r\n    return {aspects}\r\n}\r\n\r\nexport default useGetAspectList;","import React from 'react'\r\n\r\nexport default function List({aspects, editAspect, deleteAspect}) {\r\n    //Component for displaying aspect list\r\n    return (\r\n        <div>\r\n            <div className=\" col-auto \">\r\n                <h4><u>Aspect list</u></h4>\r\n                <ul>\r\n                    {aspects && aspects.map((aspect, i)=>{\r\n                        return(\r\n                        <div className=\"\">\r\n                            <h5 className=\"mt-3\">\r\n                                <li  key={i} className=\"listRuler mb-1\"  data-id={aspect.id}> <b>{aspect.aspectName}</b>\r\n                                    <hr className=\"ruler\"/> \r\n                                    <button className=\"btn btn-sm btn-outline-warning\" onClick={editAspect}><i className=\"material-icons mat-icon\">edit</i></button>\r\n                                    <button className=\"btn  btn-outline-success btn-sm mx-2\" onClick={deleteAspect}><i className=\"material-icons mat-icon\">delete_forever</i></button>\r\n                                </li>\r\n                            </h5>\r\n                        </div>\r\n                        )\r\n                        })\r\n                    }\r\n                </ul>\r\n            </div>\r\n\r\n        </div>\r\n    )\r\n}\r\n","\r\nimport { pemFirestore } from \"../../firebase/config\";\r\n\r\n\r\n\r\nexport const  handleAddCombiS = async(userId, dceId, aspectId)=>{\r\n    //Finds free sequence number for combi\r\n    let response = pemFirestore.collection('users').doc(userId).collection('DceList').doc(dceId).collection('AspectList').doc(aspectId).collection('Combis').orderBy('nr', 'asc');\r\n    response.get()\r\n    .then((data)=>{\r\n        let seqNr=0;\r\n        for(let i=0; i<data.docs.length; i++){\r\n            if(data.docs[i].data().nr!==seqNr){//if seqNr is free, use it\r\n                setCombi(seqNr, userId, dceId, aspectId);\r\n                return;\r\n            }\r\n            else  {\r\n                seqNr +=1;//try next nr\r\n                if(i===data.docs.length-1){//if there were no combi's, use seqNr=1\r\n                    setCombi(seqNr, userId, dceId, aspectId);\r\n                }\r\n            }\r\n        }\r\n    })\r\n    .catch((error)=>{\r\n        console.log('Error adding combi', error);\r\n    })\r\n    return aspectId;\r\n}\r\n\r\n//Saves combi to database with basic values\r\nconst setCombi = (seqNr, userId, dceId, aspectId)=>{ \r\n    pemFirestore.collection('users').doc(userId).collection('DceList').doc(dceId).collection('AspectList').doc(aspectId).collection('Combis').doc(seqNr.toString())\r\n    .set({nr: seqNr, groupValue: \"\", filters: []})\r\n    .then(()=>{\r\n        // console.log('combi added');\r\n        return(aspectId);\r\n    })\r\n    .catch((error)=>{\r\n        console.log('Error adding combi', error);\r\n    })\r\n}\r\n\r\n","import React, { useState } from \"react\";\r\nimport { pemFirestore } from \"../../firebase/config\";\r\nimport NewAspect from \"./NewAspect\";\r\nimport AspectEdit from \"./AspectEdit\";\r\nimport { useParams} from \"react-router-dom\";\r\nimport useGetAspectList from \"./useGetAspectList\";\r\nimport List from \"./List\";\r\nimport {handleAddCombiS} from \"./HandleAddDelete\";\r\n\r\nexport default function AspectList() {\r\n    const [showAspectsFlag, setShowAspectsFlag] = useState('');\r\n    const [chosenFeatures, setChosenFeatures] = useState([]);\r\n    const [aspectFilters, setAspectFilters] = useState([]);\r\n    const [groupValues, setGroupValues] = useState([]);\r\n    const [ageGenderValues, setAgeGenderValues] = useState([{age: \"\", gender: \"\"}]);\r\n    const [showNew, setShowNew] = useState(false);\r\n    const [aspectNameEdit, setAspectNameEdit] = useState('(Click on ICON in Aspect list)');\r\n    const [aspectDescr, setAspectDescr] = useState('');\r\n    const [aspectId, setAspectId] = useState('');\r\n    const {userId, dceId } = useParams();\r\n    const {aspects} = useGetAspectList(userId, dceId, showAspectsFlag);\r\n\r\n// collect aspect id from clicked button and get data from database so aspect can be edited.\r\nconst editAspect = (e) => {\r\n    let aspect;\r\n    if(e.target.parentElement.parentElement.getAttribute('data-id')){\r\n    aspect = e.target.parentElement.parentElement.getAttribute('data-id');\r\n    } else{\r\n        aspect = e.target.parentElement.getAttribute('data-id');\r\n    }\r\n    loadAspectData(aspect);\r\n}\r\n\r\n//Loads aspectdata from the database into states\r\nconst loadAspectData = (aspect)=>{\r\n    let emptyChosen = [];\r\n    const aspectData = pemFirestore.collection('users').doc(userId).collection('DceList').doc(dceId).collection('AspectList').doc(aspect);\r\n    aspectData.get()\r\n    .then((doc)=>{\r\n        const aspectName = doc.data().aspectName;\r\n        let combis = [];\r\n        let tempGValues = [];\r\n        let tempAgeGenderValues = [];\r\n         aspectData.collection('Combis').get()\r\n        .then((snapshot)=>{\r\n            snapshot.docs.forEach(snap=>{\r\n             combis.push(snap.data().filters);\r\n             emptyChosen.push([]);\r\n             tempGValues.push(snap.data().groupValue);\r\n             if(snap.data().ageGender){\r\n             tempAgeGenderValues.push(snap.data().ageGender);}\r\n             if(!snap.data().ageGender){\r\n                 tempAgeGenderValues.push({age: \"\", gender: \"\"})\r\n             }\r\n            })\r\n            setGroupValues(tempGValues);\r\n            setAgeGenderValues(tempAgeGenderValues);\r\n            setAspectDescr(doc.data().aspectDescr);\r\n            setAspectFilters(combis);\r\n            setChosenFeatures(emptyChosen);\r\n        })\r\n        .catch((error)=>{\r\n            console.log('Error loading aspect data', error);\r\n        });    \r\n        setAspectNameEdit(aspectName);\r\n        setAspectId(aspect);\r\n    })\r\n    .catch((error)=>{\r\n        console.log('Error loading aspect data', error);\r\n    });    \r\n}\r\n\r\n//Saves the filters to the aspect in scope\r\nconst saveFilters = (cIndex, filters, emptyChosen, groupValues, ageGenderValues)=>{\r\n    const aspectRef = pemFirestore.collection('users').doc(userId).collection('DceList').doc(dceId).collection('AspectList').doc(aspectId).collection('Combis').doc(cIndex);\r\n    aspectRef.update({filters: filters, groupValue: groupValues[cIndex], ageGender: ageGenderValues[cIndex]})\r\n    .then(() => {\r\n        let tempFilters = [...aspectFilters];\r\n        tempFilters[cIndex] = filters;\r\n        setAspectFilters(tempFilters);//reload filters\r\n        setChosenFeatures(emptyChosen);//reset chosen values\r\n        console.log(\"Document successfully updated!\");\r\n    })\r\n    .catch((error) => {\r\n        // The document probably doesn't exist.\r\n        console.error(\"Error updating document: \", error);\r\n    });\r\n}\r\n\r\n//Adds a filter combination\r\nconst handleAddCombi = async()=>{\r\n    handleAddCombiS(userId, dceId, aspectId)//find first unused sequence number and save combi to it\r\n    .then((aspectId)=>{\r\n        loadAspectData(aspectId);//reload aspect data from database\r\n    }).catch((err)=>{\r\n        console.log('Error with adding document'+err);\r\n    })\r\n}\r\n\r\n//Deletes a filter combination\r\nconst handleDeleteCombi = (e, cIndex)=>{\r\n    pemFirestore.collection('users').doc(userId).collection('DceList').doc(dceId).collection('AspectList').doc(aspectId).collection('Combis').doc(cIndex.toString())\r\n    .delete().then(() => {\r\n        console.log(\"Combination successfully deleted!\");\r\n        loadAspectData(aspectId);\r\n    }).catch((error) => {\r\n        console.error(\"Error removing document: \", error);\r\n    });        \r\n}\r\n\r\n//delete a aspect from database and refresh list\r\nconst deleteAspect = async(e) => {\r\n    let aspect;\r\n    if(e.target.parentElement.parentElement.getAttribute('data-id')){\r\n      aspect = e.target.parentElement.parentElement.getAttribute('data-id');\r\n    } else{aspect = e.target.parentElement.getAttribute('data-id')}    \r\n    let aspectRef = pemFirestore.collection('users').doc(userId).collection('DceList').doc(dceId).collection('AspectList').doc(aspect);\r\n    aspectRef.collection('Combis').get()\r\n    .then((docs)=>{\r\n        docs.forEach(doc=>{\r\n            aspectRef.collection('Combis').doc(doc.id).delete()\r\n            .then(()=>{console.log('Combi with ID '+doc.id+ ' deleted')})\r\n        })\r\n    })\r\n    .then(()=>{\r\n        aspectRef.delete()\r\n    .then(() => {\r\n        console.log(\"Document with ID\"+aspect+ \"  successfully deleted!\");\r\n    }).catch((error) => {\r\n        console.error(\"Error removing document: \", error);\r\n    });\r\n    if(aspect===aspectId){ //if aspectdetails of deleted aspect were shown on screen,  clear them\r\n        setAspectId('');\r\n        setAspectDescr('');\r\n        setAspectNameEdit('(Click on ICON in Aspect list)');\r\n        setAspectFilters([]);\r\n        setChosenFeatures([]);    \r\n    }\r\n    setShowAspectsFlag(\"set flag \"+aspect);\r\n    })\r\n}\r\n\r\n//toggle to show or hide form for new aspect\r\n  const showNewAspectForm = ()=>{\r\n      if(showNew){setShowNew(false)}\r\n      else if(!showNew){setShowNew(true)}\r\n  }\r\n\r\n  const editFunctions = {saveFilters, setGroupValues, setAgeGenderValues, setChosenFeatures, handleAddCombi, handleDeleteCombi}\r\n  const editProps = {ageGenderValues, groupValues, chosenFeatures}\r\n  const aspectProps = {aspectId, aspectNameEdit, aspectDescr, aspectFilters}\r\n\r\n  //html to show in browser\r\n    return (\r\n    <div>\r\n        <div className=\"row my-4\">\r\n            <div className=\"listContainer col col-12 col-sm-3\">\r\n                <List aspects={aspects} editAspect={editAspect} deleteAspect={deleteAspect}/>\r\n                <div className=\"row my-4\">\r\n                     <div className=\"col-auto  \">\r\n                        <h4><u>Create new Aspect</u></h4>\r\n                        <div> <button className=\"btn btn-sm btn-outline-info\" onClick={showNewAspectForm}> new Aspect</button>\r\n                        </div>\r\n                        {showNew&&<NewAspect dceId={dceId} setShowAspectsFlag={setShowAspectsFlag} showNewAspectForm={showNewAspectForm} />}\r\n                     </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"col scenarioContainer\">\r\n                <AspectEdit aspectProps={aspectProps} editFunctions={editFunctions} editProps={editProps} />\r\n            </div>\r\n        </div>\r\n    </div>  \r\n  )\r\n}\r\n","import React, { useContext } from \"react\";\r\nimport { HashRouter as Router, Route, Switch } from \"react-router-dom\";\r\nimport App from \"../app/App\";\r\nimport SignIn from \"./SignIn\";\r\nimport SignUp from \"./SignUp\";\r\nimport { UserContext } from \"../../providers/UserProvider\";\r\nimport PasswordReset from \"./PasswordReset\";\r\nimport DceList from \"../dce/DceList\";\r\nimport Dces from \"../dce/Dces\";\r\nimport AspectList from \"../result/AspectList\";\r\n\r\nfunction Application() {//loads user and routes to pages depending on user, or to signIn pages when not logged in\r\n  const user = useContext(UserContext);\r\n  return (\r\n        user ?\r\n        <Switch>\r\n          <Router>\r\n            <Route exact path=\"/\" ><DceList /></Route>\r\n            <Route exact path=\"/dces\" ><Dces /></Route>\r\n            <Route path=\"/aspectList/:userId/:dceId\" exact component={()=> <AspectList/>} />\r\n            <Route path=\"/app/:userId/:dceId\" exact component={()=> <App/>} />\r\n        </Router>\r\n      </Switch>\r\n      :\r\n      <Switch>\r\n        <Router>\r\n          <Route exact path=\"/signUp\" > <SignUp/></Route>\r\n          <Route exact path=\"/\" > <SignIn  /></Route>\r\n          <Route exact path=\"/passwordReset\" > <PasswordReset /> </Route>\r\n          <Route exact path=\"/dces\" ><SignIn /></Route>\r\n          <Route path=\"/app/:userId/:dceId\" exact component={()=> <App/>} />\r\n\r\n        </Router>\r\n      </Switch>\r\n  );\r\n}\r\nexport default Application;","import React  from \"react\";\r\nimport { HashRouter as Router } from \"react-router-dom\";\r\nimport Nav from \"./Nav\";\r\nimport UserProvider from \"../../providers/UserProvider\";\r\nimport Application from \"./Application\";\r\n\r\n\r\n\r\nfunction MainApp() {//Main module with Nav header and application wrapped in UserProvider component\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <Router>\r\n        <UserProvider>\r\n          <Nav />\r\n          <Application/>\r\n        </UserProvider>\r\n      </Router>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default MainApp;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './css/bootstrap.css';\nimport './css/materialize.css';\nimport './index.css';\nimport MainApp from './comps/main/MainApp';\n\nReactDOM.render(\n  <React.StrictMode>\n    <MainApp />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}