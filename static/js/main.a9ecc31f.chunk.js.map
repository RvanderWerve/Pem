{"version":3,"sources":["firebase/config.js","providers/UserProvider.jsx","comps/main/Nav.js","img/pem50.png","comps/app/Fab.js","comps/app/Option.js","comps/app/MenuTabs.js","comps/app/Modals.js","comps/app/PcView.js","comps/app/StartForm.js","firebase/useFirestoreScenarios.js","comps/result/useSetAspectObjs.js","comps/result/useGetResultHtml.js","firebase/useFirestoreLoadResults.js","comps/result/ResultDce.js","comps/app/ParticipantResults.js","comps/app/App.js","comps/main/SignIn.js","comps/main/SignUp.js","comps/main/PasswordReset.js","comps/dce/handleDInputs.js","comps/dce/useNewDceHtml.js","comps/dce/NewDce.js","firebase/useStorage.js","comps/dce/ProgressBar.js","comps/dce/UploadForm.js","comps/dce/useNewScenarioHtml.js","comps/dce/NewScenario.js","comps/dce/ScenarioList.js","comps/dce/DceList.js","comps/dce/Dces.js","comps/result/handleAInputs.js","comps/result/NewAspect.js","comps/result/AspectEdit.js","comps/result/useGetFromDb.js","comps/result/useGetAspectList.js","comps/result/List.js","comps/result/HandleAddDelete.js","comps/result/AspectList.js","comps/main/Application.js","comps/main/MainApp.js","index.js"],"names":["firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","pemStorage","storage","pemFirestore","firestore","pemAuth","FieldValue","serverTimestamp","FieldPath","documentId","auth","provider","GoogleAuthProvider","signInWithGoogle","signInWithPopup","generateUserDocument","user","additionalData","a","userRef","doc","uid","get","exists","email","displayName","photoURL","set","console","error","getUserDocument","userDocument","data","UserContext","createContext","UserProvider","state","componentDidMount","onAuthStateChanged","userAuth","setState","log","JSON","stringify","this","Provider","value","props","children","Component","withRouter","CUser","useContext","useState","setUser","useEffect","currentUser","className","class","to","src","width","height","location","pathname","onClick","signOut","Fab","href","style","fontSize","Option","handleClick","sc1","sc2","shownSc","ageGender","choiceValue","setChoiceValue","fValues1","fValues","fValues2","cValue","pref","nonPref","scText","scImg","alt","MenuTabs","dceDescr","index","setIndex","setValue","styles","tabs","background","label","AppBar","position","color","Tabs","indicatorColor","textColor","variant","onChange","event","newValue","Tab","enableMouseEvents","onChangeIndex","Modals","nrQuestions","id","margin","data-id","scExpl","length","PcView","StartForm","setStarted","handleAGChoice","htmlFor","options","name","option","useFirestoreScenarios","dceId","scenarios","setScenarios","unsub","collection","onSnapshot","snap","documents","forEach","push","useSetAspectObjs","userId","details","dceFeatures","aspectObjs","setAspectObjs","tempAspectObjs","then","querySnapshot","aspectName","aspectDescr","snapshot","tempFilters","tempFilter","favorFilters","againstFilters","filters","newFavorFilter","fName","groupFeature","fValue","groupValue","gender","age","ageFilter","genderFilter","newAgainstValue","map","feature","i","featureName","featureValue1","featureValue2","newAgainstFilter","newTempObjs","findIndex","obj","catch","err","useGetResultHtml","results","resultHtml","setResultHtml","tempResult","aspectObj","oddsFavor","oddsAgainst","combis","combi","nr","filter","result","passesAllFilters","favFilter","hasOwnProperty","favor","indexOf","againstFilter","against","prob","graphProb","Math","abs","clNames","graphReverse","barClasses","getBarClasses","role","aria-valuenow","aria-valuemin","aria-valuemax","toFixed","tempClNames","useFirestoreLoadResult","setResults","ResultDce","dceDetails","dceNameEdit","setFinalHtml","useLocation","ParticipantResults","resultList","grouped","App","answerList","setAnswerList","setResultList","setAgeGender","qIndex","setQIndex","done","setDone","todo","setTodo","setSc1","setSc2","prevRandomA","setPrevRandomA","prevRandomB","setPrevRandomB","setNrQuestions","isGrouped","setIsGrouped","setDceDescr","setDceFeatures","setDceDetails","setDceNameEdit","finished","setFinished","started","setError","useParams","initialRender","useRef","M","AutoInit","tempListA","settingScenarios","calcDots","dones","todos","pop","getRandomScenarios","ScenarioA","ScenarioB","getGroupedScenarios","maxNr","randNrA","getRandomANr","scenarioA","altnr","find","sc","getUnusedRndNrs","RandomNrA","RandomNrB","usedNrsA","tempRandNrA","floor","random","includes","usedNrsB","randNrB","tempRandNrB","fValuesArray","containsEmpty","Object","values","x","features","tempGrouped","tempDetails","descr","dceName","dot","setDots","current","collRef","tempResultList","answer","add","tempAgeGender","SignIn","setEmail","password","setPassword","onChangeHandler","currentTarget","type","placeholder","preventDefault","signInWithEmailAndPassword","signInWithEmailAndPasswordHandler","SignUp","setDisplayName","createUserWithEmailAndPasswordHandler","createUserWithEmailAndPassword","PasswordReset","emailHasBeenSent","setEmailHasBeenSent","action","sendPasswordResetEmail","setTimeout","sendResetEmail","handleInputD","e","currentList","currentName","target","nameList","useNewDceHtml","handleNameInputChange","handleDescrInputChange","inputList","handleInputChange","handleRemoveClick","handleNrQuestionsInput","setGroupValue","handleAddClick","groupChecked","saveDce","handleCheckbox","dceHtml","setDceHtml","tempHtml","required","rows","NewDce","showDceList","showNewDceForm","dceNameList","setInputList","setDceName","setGroupChecked","featuresNotNull","item","alert","existsName","descrList","list","splice","nrQ","nrString","Number","every","some","nrFeatures","docRef","checked","useStorage","file","progress","setProgress","url","setUrl","storageRef","ref","put","on","percentage","bytesTransferred","totalBytes","getDownloadURL","ProgressBar","setFile","scNr","UploadForm","types","selected","files","useNewScenarioHtml","chosen","handleChosen","handleSave","handleEntry","handleCreateAlt","setChosen","setIsSaved","isSaved","scenarioHtml","setScenarioHtml","chosenList","defaultValue","isDisabled","onSubmit","NewScenario","setScNr","handleAddScenario","setNewScNr","getAltFValues","fValueList","newFeatValue","groupFeat","groupFeatValue","altFValueList","fieldsComplete","featuresComplete","textOrImageComplete","toString","update","seqNr","newChosenList","ScenarioList","scList","setScList","showScList","response","orderBy","tempDocs","docs","altSc","detailData","editSc","parentElement","getAttribute","clipText","window","navigator","clipboard","writeText","confirm","scx","delete","deleteSc","DceList","showNew","setShowNew","setDceId","setDceNameList","tempNameList","editDce","dce","deleteDce","Dces","resultDce","handleInputA","NewAspect","setShowAspectsFlag","showNewAspectForm","setAspectName","setAspectDescr","aspectColl","AspectEdit","aspectProps","editFunctions","editProps","filterSaved","setFilterSaved","history","useHistory","saveFilters","setAgeGenderValues","setGroupValues","setChosenFeatures","handleAddCombi","handleDeleteCombi","aspectId","aspectNameEdit","aspectFilters","groupValues","chosenFeatures","ageGenderValues","undefined","fromDb","handleDelete","handleGroupValue","handleFName","handleFValue","handleAgeGenderValue","setFromDb","helperArray","ageOptions","genderOptions","tempFromDB","cIndex","c","ind","optionHtml","isClearable","useGetFromDb","tempCIndex","emptyChosen","tempGValues","tempSavedList","dataset","tempList","tempChosen","tempAgeGenderValues","addCombiButton","useGetAspectList","showAspectsFlag","aspects","setAspects","List","editAspect","deleteAspect","aspect","handleAddCombiS","setCombi","AspectList","setAspectFilters","setAspectNameEdit","setAspectId","loadAspectData","aspectData","aspectRef","Application","exact","path","component","MainApp","Nav","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.a9ecc31f.chunk.js","sourcesContent":["import firebase from 'firebase/app';\r\nimport 'firebase/storage';\r\nimport 'firebase/firestore';\r\nimport 'firebase/auth';\r\n\r\n \r\n // Your web app's Firebase configuration\r\n var firebaseConfig = {\r\n    apiKey: \"AIzaSyDkuqUfQCo8w_7OWogV44gsGLzaE-yEvX4\",\r\n    authDomain: \"pem-firestore.firebaseapp.com\",\r\n    projectId: \"pem-firestore\",\r\n    storageBucket: \"pem-firestore.appspot.com\",\r\n    messagingSenderId: \"528017814946\",\r\n    appId: \"1:528017814946:web:f8fab7864531498a146efb\"\r\n  };\r\n  // Initialize Firebase\r\n  firebase.initializeApp(firebaseConfig);\r\n\r\n \r\nconst pemStorage = firebase.storage();\r\nconst pemFirestore = firebase.firestore();\r\nconst timestamp = firebase.firestore.FieldValue.serverTimestamp;\r\nconst pemId = firebase.firestore.FieldPath.documentId;\r\nconst pemAuth = firebase.auth();\r\nconst provider = new firebase.auth.GoogleAuthProvider();\r\n\r\nexport const signInWithGoogle = () => {\r\n  pemAuth.signInWithPopup(provider);\r\n};\r\nexport const generateUserDocument = async (user, additionalData) => {\r\n  if (!user) return;\r\n\r\n  const userRef = pemFirestore.doc(`users/${user.uid}`);\r\n  const snapshot = await userRef.get();\r\n\r\n  if (!snapshot.exists) {\r\n    const { email, displayName, photoURL } = user;\r\n    try {\r\n      await userRef.set({\r\n        displayName,\r\n        email,\r\n        photoURL,\r\n        ...additionalData\r\n      });\r\n    } catch (error) {\r\n      console.error(\"Error creating user document\", error);\r\n    }\r\n  }\r\n  return getUserDocument(user.uid);\r\n};\r\n\r\nconst getUserDocument = async uid => {\r\n  if (!uid) return null;\r\n  try {\r\n    const userDocument = await pemFirestore.doc(`users/${uid}`).get();\r\n\r\n    return {\r\n      uid,\r\n      ...userDocument.data()\r\n    };\r\n  } catch (error) {\r\n    console.error(\"Error fetching user\", error);\r\n  }\r\n};\r\n\r\nexport { pemStorage, pemFirestore, timestamp, pemAuth, pemId };","import React, { Component, createContext } from \"react\";\r\nimport { pemAuth, generateUserDocument } from '../firebase/config';\r\n\r\nexport const UserContext = createContext({ user: null });\r\n\r\nclass UserProvider extends Component {\r\n    state = {\r\n      user: null\r\n    };\r\n  \r\n    \r\n    \r\n    componentDidMount = async () => {\r\n      pemAuth.onAuthStateChanged(async userAuth => {\r\n        const user = await generateUserDocument(userAuth);\r\n        this.setState({ user });\r\n        console.log(\"Logged in, user: \" + JSON.stringify(user));\r\n      });\r\n  \r\n  \r\n    };\r\n  \r\n    render() {\r\n      const { user } = this.state;\r\n  \r\n      return (\r\n        <UserContext.Provider value={user}>\r\n          {this.props.children}\r\n        </UserContext.Provider>\r\n      );\r\n    }\r\n  }\r\n  \r\n  export default UserProvider;","import  React, { useEffect, useState, useContext } from \"react\";\r\nimport { Link, withRouter } from \"react-router-dom\";\r\nimport {pemAuth} from \"../../firebase/config\";\r\nimport { UserContext } from \"../../providers/UserProvider\";\r\nimport logo from \"../../img/pem50.png\"\r\n\r\n\r\n\r\nfunction Navigation(props) {\r\n    const CUser = useContext(UserContext);\r\n\r\n    const [user, setUser] = useState(CUser);\r\n\r\n\r\n    useEffect(() => {\r\n        setUser(pemAuth.currentUser);\r\n        })\r\n\r\n    \r\n \r\n\r\n  return (\r\n    <div className=\"navigation\">\r\n      <nav class=\"navbar navbar-expand navbar-dark bg-dark\">\r\n        <div class=\"container\">\r\n          <Link class=\"navbar-brand\" to=\"/\">\r\n            <img src={logo} width='35px' height='30px' />\r\n                 </Link>\r\n\r\n          <div>\r\n            <ul class=\"navbar-nav ml-auto\">\r\n              <li\r\n                class={`nav-item  ${\r\n                  props.location.pathname === \"/\" ? \"active\" : \"\"\r\n                }`}\r\n              >\r\n                <Link class=\"nav-link\" to=\"/\">\r\n                  Develop\r\n                </Link>\r\n              </li>\r\n              <li\r\n                class={`nav-item  ${\r\n                  props.location.pathname === \"/dces\" ? \"active\" : \"\"\r\n                }`}\r\n              >\r\n                <Link class=\"nav-link\" to=\"/dces\">\r\n\r\n                 Run/Results\r\n                </Link>\r\n              </li>\r\n              <li className=\"nav-item\">\r\n          <Link to=\"/\" className=\"nav-link\" onClick = {() => {pemAuth.signOut()}}>Sign out</Link>\r\n        </li>\r\n            </ul>\r\n          </div>\r\n        </div>\r\n      </nav>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default withRouter(Navigation);","export default \"data:image/png;base64,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\"","const Fab = () => {\r\n\t//Fixed action button for additional explanation\r\n    return ( \r\n        <div className=\"outtro\">\r\n\t\t\t<div className=\"fixed-action-btn\">\r\n\t\t\t\t<a href=\"#modal1\" className=\" modal-trigger btn-floating red darken-2\"><i className=\"material-icons mat-icon\" style={{fontSize: '140%'}} >help_outline</i></a>\r\n\t\t\t</div>\r\n\t\t</div>\r\n     );\r\n}\r\n \r\nexport default Fab;","\r\nimport { useState, useEffect } from \"react\";\r\n\r\nconst Option = ({handleClick, sc1, sc2, value, shownSc, ageGender}) => {\r\n//Component that contains option details and feeds back result of choice\r\n\r\nconst [choiceValue, setChoiceValue] = useState({})\r\n//sets choicevalue depending on choice made during experiment\r\n    useEffect(() => {\r\n      if(sc1&&sc2){\r\n      let fValues1 = sc1.data.fValues;\r\n      let fValues2 = sc2.data.fValues;\r\n      let cValue = null;\r\n      if(value==='A'){\r\n      cValue = {pref: {...fValues1, ...ageGender}, nonPref: {...fValues2, ...ageGender}}\r\n      }\r\n      if(value==='B'){\r\n        cValue = {pref: {...fValues2, ...ageGender}, nonPref: {...fValues1, ...ageGender}}\r\n      }\r\n      setChoiceValue(cValue);\r\n      }\r\n    }, [sc1, sc2])\r\n    \r\n    //Shows text and images on the screen\r\n    return ( \r\n        <div className=\"swiper-slide choose-btn\">\r\n\t\t\t\t  <div className=\"s10 \">\r\n            {shownSc&&<div className=\"choice-container\">\r\n            <p>{shownSc.data.scText}</p>\r\n            <img className = \"swipe-img choice-container\" src={shownSc.data.scImg} alt=\"\"/>\r\n                  </div>}\r\n           </div>\r\n\t\t\t\t\t{shownSc&&<button value={value} onClick={()=>{handleClick(choiceValue)}} className=\"btn blue darken-2 waves-effect waves-light z-depth-2\">Choose</button>}\r\n        </div>\r\n     );\r\n}\r\n \r\nexport default Option;","import React, {useState} from 'react';\r\nimport Tabs from '@material-ui/core/Tabs';\r\nimport Tab from '@material-ui/core/Tab';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport SwipeableViews from 'react-swipeable-views';\r\nimport '../../index.css';\r\nimport Option from './Option';\r\n\r\n\r\n\r\n  const MenuTabs = ({handleClick, sc1, sc2, dceDescr, ageGender})=>{\r\n//Component for displaying choices in swipable tabs for smartphones\r\n\r\n    const [index, setIndex] = useState(0);\r\n    const [value, setValue] = useState(0);\r\n    \r\n\r\n  const handleChange = (event, newValue) => {\r\n    setValue(newValue)\r\n    setIndex(\r\n      newValue,\r\n    );\r\n    };\r\n\r\n  const handleChangeIndex = (index) => {\r\n    setIndex(\r\n      index,\r\n    );\r\n    setValue (index);\r\n  };\r\n\r\n  const styles = {\r\n    tabs: {\r\n       background: '#fff',\r\n     },\r\n     label: {\r\n       fontSize: '100%',\r\n     }}\r\n\r\n    return (\r\n      <div className=\"swiper-container\">\r\n          <AppBar position=\"static\" color=\"default\">\r\n        <Tabs indicatorColor=\"primary\" textColor=\"primary\" background=\"primary\"\r\n        variant=\"fullWidth\" value={value} onChange={handleChange} style={styles.tabs}>\r\n         <Tab style={styles.label} label=\"option n°1\" />\r\n          <Tab style={styles.label} label=\"option n°2\" />\r\n       </Tabs>\r\n       </AppBar>\r\n       <h5 class=\"text-secondary mt-1 mb-0 text-center\">{dceDescr}</h5>\r\n\r\n        <SwipeableViews enableMouseEvents index={index} onChangeIndex={handleChangeIndex}>\r\n          <div className=\"slide\">\r\n            {/* Displays first option  */}\r\n             <div className=\"innerslide\" >\r\n             <Option handleClick={handleClick} sc1={sc1} sc2={sc2} value='A' shownSc={sc1} ageGender={ageGender}/>\r\n             </div> \r\n              </div>\r\n          <div className=\"slide\">\r\n            {/* Displays second option */}\r\n          <div className=\"innerslide\" >\r\n              <Option handleClick={handleClick} sc1={sc1} sc2={sc2} value='B' shownSc={sc2} ageGender={ageGender}/>\r\n             </div> \r\n                      </div>\r\n        </SwipeableViews>\r\n      </div>\r\n    );\r\n  }\r\n\r\n\r\nexport default MenuTabs;","\r\nconst Modals = ({nrQuestions, sc1, sc2}) => {\r\n//Component for displaying modals\r\n\r\n    return ( \r\n        <div>\r\n            {/* //Modal for displaying intro */}\r\n            <div id=\"introModal\" className=\"modal\">\r\n                <div className=\"modal-content black-text modal-close center\">\r\n                    <h4>Intro</h4>\r\n                    <p className=\"flow-text\">There are {nrQuestions} choices to make during this experiment.\r\n                    In each dilemma, choose one from the two options.</p>\r\n                    <p className=\"flow-text\"><i className=\"material-icons danger red darken-2 btn-floating btn-sm\" style={{color: '#ffff', fontSize: '140%', margin: '15px'}} >help_outline</i> \r\n                    shows additional explanation of each dilemma.</p>\r\n                </div>\r\n            </div>\r\n\r\n        {/* //Modal for additional explanation */}\r\n            <div id=\"modal1\" data-id=\"modal1\" className=\"modal\">\r\n                <div className=\"modal-content black-text modal-close center\">\r\n                    <div className=\"flow-text\"  >\r\n                        <h4 className=\"mb-3\">Additional explanation:</h4>\r\n                        <h6><u>Scenario 1:</u></h6>\r\n                        {sc1&&<p className=\"flow-text\">{sc1.data.scExpl}</p>}\r\n                        {sc1&&sc1.data.scExpl.length===0&&<h5 className=\"\">No additional explanation available</h5>}\r\n                        <h6><u>Scenario 2:</u></h6>\r\n                        {sc2&&<p className=\"flow-text\">{sc2.data.scExpl}</p>}\r\n                        {sc2&&sc2.data.scExpl.length===0&&<h5 className=\"\">No additional explanation available</h5>}\r\n\r\n                        <button className=\"btn btn-sm blue darken-2 waves-effect waves-light z-depth-2\">Close</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n     );\r\n}\r\n \r\nexport default Modals;","import Option from './Option';\r\n\r\nconst PcView = ({handleClick, sc1, sc2, dceDescr, ageGender }) => {\r\n    //Component for displaying choices on larger screen like pc, options are next to eachother\r\n\r\n    return ( \r\n        <div className=\"pc-view\">\r\n            <h5 class=\"text-secondary mt-1 mb-1\">{dceDescr}</h5>\r\n            <div className=\"pc-container\">\r\n                {/* Displays first option  */}\r\n                <div className=\"option-container\">\r\n                    <Option handleClick={handleClick} sc1={sc1} sc2={sc2} value='A' shownSc={sc1} ageGender={ageGender}/>\r\n                </div>\r\n                {/* Displays second option */}\r\n                <div className=\"option-container\">\r\n                    <Option handleClick={handleClick} sc2={sc2} sc1={sc1} value='B' shownSc={sc2} ageGender={ageGender}/>\r\n                </div>\r\n             </div>\r\n        </div>\r\n     );\r\n}\r\n \r\nexport default PcView;","import Select from \"react-select\";\r\n\r\nconst StartForm = ({nrQuestions, setStarted, handleAGChoice}) => {\r\n//Page component that is shown to the participant at the start of the experiment.\r\n//\r\n\r\n\r\n\r\nconst ageOptions = [{label: \"younger than 25 years\", value: \"young\"},{label: \"25 years or older\", value: \"old\"}];\r\nconst genderOptions = [{label: \"female\", value: \"female\"},{label: \"male\", value: \"male\"}]\r\n    return ( \r\n       <div className=\"my-5\"> \r\n       <div className=\"col resultsContainer mx-3\">\r\n         <h5>Thank you for particpating in this experiment. You will be asked {nrQuestions} questions about your preference.</h5>\r\n         <h5 className=\"text-secondary mb-5\">Please select your gender and age and then start by clicking the button below. </h5>\r\n         \r\n         <div className=\"col-md-4   mx-auto\"> <label htmlFor=\"gender\" className=\"col-form-label\">Gender</label>\r\n         <Select className=\"mb-2\" options={genderOptions} id=\"gender\" name=\"gender\" onChange={(option, name)=>handleAGChoice(option.value, name.name)}/>\r\n         </div>\r\n         <div className=\"col-md-4   mx-auto\"> <label htmlFor=\"age\" className=\"col-form-label\">Age</label>\r\n         <Select className=\"mb-4\" options={ageOptions} id=\"age\" name=\"age\" onChange={(option, name)=>handleAGChoice(option.value,  name.name)}/>\r\n         </div>\r\n         <button className=\"btn blue darken-2 \" onClick={setStarted}>Start</button>\r\n</div>\r\n     </div>\r\n     );\r\n}\r\n \r\nexport default StartForm;","import {  useState, useEffect } from 'react';\r\nimport { pemFirestore } from './config';\r\n\r\n\r\nconst useFirestoreScenarios = (user, dceId) => {\r\n  const [scenarios, setScenarios] = useState([]);\r\n\r\n\r\n  useEffect(() => {\r\n    const unsub = pemFirestore.collection('users').doc(user).collection('DceList').doc(dceId).collection('Scenarios')\r\n      .onSnapshot(snap => {\r\n        let documents = [];\r\n        snap.forEach(doc => {\r\n          documents.push({...doc.data(), id: doc.id});\r\n        });\r\n        setScenarios(documents);\r\n      });\r\n\r\n    return () => unsub();\r\n    // this is a cleanup function that react will run when\r\n    // a component using the hook unmounts\r\n  }, []);\r\n\r\n  return { scenarios };\r\n}\r\n\r\nexport default useFirestoreScenarios;","import React, { useState, useEffect} from 'react';\r\nimport { pemFirestore } from \"../../firebase/config\";\r\n\r\n\r\nexport default function useSetAspectObjs(userId, dceId, details, dceFeatures) {\r\n    const [aspectObjs, setAspectObjs] = useState([]);\r\n\r\n\r\n    useEffect(() => {\r\n        if(dceId&&details){\r\n            console.log('DceId in useEffect: '+dceId)\r\n        let tempDocs = [];\r\n        let tempAspectObjs = [];\r\n        setAspectObjs(tempAspectObjs);\r\n        let response = pemFirestore.collection('users').doc(userId).collection('DceList').doc(dceId).collection('AspectList');\r\n        response.get()\r\n        .then((querySnapshot)=>{\r\n            // console.log('Aspects just loaded: '+JSON.stringify(querySnapshot))\r\n            querySnapshot.forEach((doc)=>{\r\n                // setInd(indx);\r\n                console.log('Aspects just loaded, in docs.forEach, doc: '+JSON.stringify(doc.data()))\r\n                tempAspectObjs.push({aspectName: doc.data().aspectName, aspectDescr: doc.data().aspectDescr, id: doc.id});\r\n                pemFirestore.collection('users').doc(userId).collection('DceList').doc(dceId).collection('AspectList').doc(doc.id).collection('Combis')\r\n                .get()\r\n                .then((snapshot)=>{\r\n                    console.log('tempAspectObjs at start: '+JSON.stringify(tempAspectObjs))\r\n                    let tempFilters = [];\r\n                     let tempAltFilters = [];\r\n                    snapshot.forEach((snap)=>{\r\n                        console.log('doc.is is: '+ doc.id)\r\n                        let tempFilter = snap.data();\r\n                        let favorFilters = [];\r\n                        let againstFilters = [];\r\n                        favorFilters.push(...tempFilter.filters);\r\n                        againstFilters.push(...tempFilter.filters);\r\n                        // console.log('favorFilters is: '+JSON.stringify(favorFilters.filters.find(obj=>obj.fName===details.groupFeature).fValue))\r\n                        // const altObj = favorFilters.filters.find(obj=>obj.fName===details.groupFeature);\r\n                        // let altValue = altObj.fValue;\r\n                        console.log('favorFilters is : '+JSON.stringify(favorFilters))\r\n                        let newFavorFilter = {fName: details.groupFeature, fValue: snap.data().groupValue};\r\n                        if(snap.data().ageGender){\r\n                            console.log(\"agegender in snap: \"+JSON.stringify(snap.data().ageGender.gender))\r\n                            if(snap.data().ageGender.age!==\"\"){\r\n                        let ageFilter = {fName: \"age\", fValue: snap.data().ageGender.age};\r\n                        favorFilters.push(ageFilter);\r\n                        againstFilters.push(ageFilter);\r\n                    }\r\n                    if(snap.data().ageGender.gender!==\"\"){\r\n                        let genderFilter = {fName: \"gender\", fValue: snap.data().ageGender.gender};\r\n                        favorFilters.push(genderFilter);\r\n                        againstFilters.push(genderFilter);\r\n                        }}\r\n                        favorFilters.push(newFavorFilter);\r\n                        let newAgainstValue = \"\";\r\n                        dceFeatures.map((feature,i) =>{\r\n                        console.log(\"Feature: \"+ JSON.stringify(feature.featureName));\r\n                        if (feature.featureName===details.groupFeature){\r\n                            console.log(\"Group feat ===featureName\")\r\n                            if(feature.featureValue1===snap.data().groupValue){\r\n                                newAgainstValue = feature.featureValue2;}\r\n                            if(feature.featureValue2===snap.data().groupValue){\r\n                                newAgainstValue = feature.featureValue1;}\r\n                        }\r\n                        })\r\n                        let newAgainstFilter = {fName: details.groupFeature, fValue: newAgainstValue};\r\n                        againstFilters.push(newAgainstFilter);\r\n                        console.log('tempFilter: '+JSON.stringify(tempFilter))\r\n                        tempFilter['favorFilters'] = favorFilters;\r\n                        tempFilter['againstFilters'] = againstFilters\r\n                        console.log('tempFilter: '+JSON.stringify(tempFilter))\r\n                        console.log('groupFeature: '+ details.groupFeature+ ' favorFilters: '+JSON.stringify(favorFilters)+ '  againstFilters: '+JSON.stringify(againstFilters))\r\n                        tempFilters.push(tempFilter);;\r\n                        console.log('Combis in snap: '+JSON.stringify(tempFilters)+JSON.stringify(doc.id))\r\n                        // tempDocs.push({aspectName: doc.data().aspectName,id: doc.id, combi: snap.data()})\r\n                    })\r\n                    console.log('doc.is is: '+ doc.id)\r\n                    let newTempObjs = [...tempAspectObjs]\r\n                        let index = tempAspectObjs.findIndex(obj=>obj.id===doc.id);\r\n                        console.log('index2: '+JSON.stringify(index))\r\n                        newTempObjs[index]['combis'] = tempFilters;\r\n                        // console.log('ind: '+ind)\r\n                        console.log('newtempObjs before setting: '+JSON.stringify(newTempObjs))\r\n                        setAspectObjs(newTempObjs);\r\n                        })\r\n            })\r\n         }).catch((err)=>{\r\n            console.log('Error with loading document'+err);\r\n        })\r\n        return\r\n    }},[dceId])\r\n\r\n\r\n\r\n\r\n    return {aspectObjs};\r\n}\r\n","import React, { useState, useEffect} from 'react';\r\n\r\nexport default function useGetResultHtml(aspectObjs, results, dceId) {\r\n    const [resultHtml, setResultHtml] = useState([]);\r\n\r\n    useEffect(() => {\r\n        console.log(\"useGetResultHtml triggered\")\r\n        let tempResult = [];\r\n        tempResult.push(\r\n            <div>\r\n           <div className=\"mb-3\"> &Delta; P shows the difference in probability that the aspect is true and the \r\n               probability that the aspect is not true\r\n           </div>\r\n           </div>\r\n        )\r\n        console.log('all aspectObj is: '+JSON.stringify(aspectObjs))\r\n        aspectObjs.forEach((aspectObj)=>{\r\n            let aspectName = aspectObj.aspectName;\r\n            let aspectDescr = aspectObj.aspectDescr;\r\n            let oddsFavor = [];\r\n            let oddsAgainst = [];\r\n            console.log('aspectObj is: '+JSON.stringify(aspectObj));\r\n            if(aspectObj.combis){\r\n                console.log('combi if entered')\r\n            aspectObj.combis.forEach(combi=>{\r\n                console.log('combi: '+JSON.stringify(combi));\r\n\r\n                let nr = combi.nr;\r\n\r\n                    const checkFValue = (result=>{\r\n                        let passesAllFilters = true;\r\n                        combi.favorFilters.forEach(favFilter=>{\r\n                            console.log('forEach favFilter: '+ JSON.stringify(favFilter))\r\n                    console.log('result in forEach: '+ JSON.stringify(result));\r\n                    console.log('Result[favFilter.fName: '+result[favFilter.fName])\r\n                    if(!(favFilter.fValue===result[favFilter.fName]&&result.hasOwnProperty(favFilter.fName))){\r\n                        console.log(\"set passesAllFilters favors to false\")\r\n                        passesAllFilters = false;\r\n                    }\r\n                })\r\n                    return(passesAllFilters)\r\n                    })\r\n                    let tempFavors = results.filter(checkFValue);\r\n                    tempFavors.forEach(favor=>{\r\n                        console.log(' forEach favor '+JSON.stringify(favor) )\r\n                        if(oddsFavor.indexOf(favor)===-1){\r\n                            oddsFavor.push(favor);\r\n                        }\r\n                    })\r\n                    console.log(\"oddsFavor list length: \"+JSON.stringify(oddsFavor.length))\r\n\r\n                               \r\n                    const checkAValue = (result=>{\r\n                        let passesAllFilters = true;\r\n                        combi.againstFilters.forEach(againstFilter=>{\r\n                        console.log('forEach againstFilter: '+ JSON.stringify(againstFilter))\r\n                        console.log('result in forEach: '+ JSON.stringify(result))\r\n                        if(!(againstFilter.fValue===result[againstFilter.fName]&&result.hasOwnProperty(againstFilter.fName))){\r\n                            passesAllFilters=false;\r\n                        }\r\n                    })\r\n                        return(passesAllFilters)\r\n                    })\r\n                    let tempAgainst = results.filter(checkAValue);\r\n                    tempAgainst.forEach(against=>{\r\n                        console.log(' forEach against '+JSON.stringify(against) )\r\n                        if (oddsAgainst.indexOf(against)===-1){\r\n                            oddsAgainst.push(against);\r\n                        }\r\n                    })\r\n                    console.log(\"oddsAgainst list length: \"+JSON.stringify(oddsAgainst.length))\r\n                })\r\n        }\r\n        // let aspectOdds = 1;\r\n        let prob = 0;\r\n        if (oddsAgainst.length>0||oddsFavor.length>0){\r\n        // aspectOdds = oddsFavor.length/oddsAgainst.length\r\n        \r\n        prob = 2*(oddsFavor.length/(oddsFavor.length+oddsAgainst.length))-1;\r\n        }\r\n       let graphProb = Math.abs(prob*50);\r\n       let clNames = graphReverse(prob);\r\n       let barClasses = getBarClasses(prob)\r\n\r\n                tempResult.push(\r\n                <div className=\"pb-2\">\r\n                    {/* Aspect: {aspectName} <br/> */}\r\n                    <span className=\"text-secondary\">{aspectDescr}</span><br/>\r\n                    <div className={clNames}>\r\n                        { console.log('oddsAgainst.length: '+JSON.stringify(oddsAgainst.length))}\r\n                            {console.log('oddsFavor.length: '+JSON.stringify(oddsFavor.length))}\r\n                    <div className=\"progress-bar bg-light-grey\" role=\"progressbar\" style={{width: 50+\"%\"}} aria-valuenow=\"25\" aria-valuemin=\"0\" aria-valuemax=\"100\"></div>\r\n                    {prob===0&&<div class=\"progress-bar bg-teal\" role=\"progressbar\" style={{width: 2 +\"px\"}} aria-valuenow=\"30\" aria-valuemin=\"0\" aria-valuemax=\"100\"></div>}\r\n<div className={barClasses} role=\"progressbar\" aria-valuenow={prob} aria-valuemin=\"0\" aria-valuemax=\"100\" style={{width:graphProb+\"%\"}}>\r\n    {(prob>=0.2||prob<=-0.2)&&<span className=\"sr-only\">&Delta; P = {prob.toFixed(2)}</span>}\r\n    </div>\r\n  </div>\r\n  {(prob<0.2&&prob>-0.2)&&<div>&Delta; P = {prob.toFixed(2)}</div>}\r\n  <span>(Chosen {(100*prob).toFixed(0)}% {prob<0 ? \"less\": \"more\"} than the opposite.)</span>\r\n\r\n               </div>)\r\n                // console.log('resultHtml: '+JSON.stringify(tempResult))\r\n                setResultHtml(tempResult);\r\n            })\r\n            if(aspectObjs.length===0){\r\n                setResultHtml([<div><h5>No aspects defined.</h5></div>])\r\n            }\r\n              return \r\n    }, [aspectObjs])\r\n\r\n\r\n   const graphReverse = (prob)=>{\r\n        let tempClNames = \"progress w-80 mx-auto\"\r\n        if (prob<0){\r\n            tempClNames=\"progress w-80 mx-auto flex-row-reverse\"\r\n        }\r\n        console.log(\"clNames: \"+tempClNames);\r\n        return  (tempClNames);\r\n    }\r\n\r\n    const getBarClasses = (prob)=>{\r\n        let barClasses = \"progress-bar bg-teal progress-bar-striped\";\r\n        if (prob<0){\r\n            barClasses = \"progress-bar bg-purple progress-bar-striped\"\r\n        }\r\n        return barClasses;\r\n    }\r\n\r\n\r\n    return {resultHtml};\r\n}\r\n","import {  useState, useEffect } from 'react';\r\nimport { pemFirestore } from './config';\r\n\r\n\r\nconst useFirestoreLoadResult = (user, dceId) => {\r\nconst [results, setResults] = useState([]);\r\n\r\n\r\n  useEffect(() => {\r\n      if(dceId){\r\n      console.log('user en dce id in loadResults: '+ user +' '+dceId)\r\n    let unsub = pemFirestore.collection('users').doc(user).collection('DceList').doc(dceId).collection('RawResults')\r\n    .onSnapshot(snap => {\r\n        let documents = [];\r\n        snap.forEach(doc => {\r\n          documents.push({...doc.data().pref, id: doc.id});\r\n        });\r\n        setResults(documents);\r\n      });\r\n     \r\n    return () => unsub();\r\n    // this is a cleanup function that react will run when\r\n    // a component using the hook unmounts\r\n  }}, [dceId]);\r\n\r\n  return {results} ;\r\n}\r\n\r\nexport default useFirestoreLoadResult;","import React, { useEffect, useState} from 'react';\r\nimport { useLocation} from \"react-router-dom\";\r\nimport useFirestoreLoadResult from '../../firebase/useFirestoreLoadResults';\r\nimport useSetAspectObjs from './useSetAspectObjs';\r\nimport useGetResultHtml from './useGetResultHtml';\r\n\r\n\r\nexport default function ResultDce({dceId, dceNameEdit, dceDetails, dceFeatures, userId}) {\r\n    // const {userId, dceId } = useParams();\r\n    const [finalHtml, setFinalHtml] = useState([]);\r\n    // const [resultHtml, setResultHtml] = useState([]);\r\n    const [aspects, setAspects] = useState([]);\r\n    // const [aspectObjs, setAspectObjs] = useState([]);\r\n    const location = useLocation();\r\n    // const user = useContext(UserContext);\r\n    console.log('user and dce id in ResultDce: '+JSON.stringify(userId) +' '+dceId)\r\n    console.log('dceDetails in ResultDce start: '+JSON.stringify(dceDetails))\r\n    const {results} = useFirestoreLoadResult(userId ,dceId);\r\n    const [ind, setInd] = useState(null);\r\n    const {details} = dceDetails;\r\n\r\n\r\n\r\nconst {aspectObjs} = useSetAspectObjs(userId, dceId, details, dceFeatures);\r\nconst {resultHtml} = useGetResultHtml(aspectObjs, results);\r\n\r\nuseEffect(() => {\r\n    if(aspectObjs.length===0){\r\n        setFinalHtml([<div><h5>No aspects defined.</h5></div>])\r\n    }else \r\nsetFinalHtml(resultHtml)\r\n    return \r\n\r\n}, [aspectObjs,results])\r\n\r\n\r\n    return (\r\n        <div>\r\n           <div className=\"mb-5\"><h3>Total results from all particpants: </h3>\r\n            {resultHtml}</div>\r\n           \r\n        </div>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport useSetAspectObjs from '../result/useSetAspectObjs';\r\nimport useGetResultHtml from '../result/useGetResultHtml';\r\nimport ResultDce from \"../result/ResultDce\";\r\n\r\n\r\nexport default function ParticipantResults({resultList, dceDetails, dceNameEdit, dceId, dceFeatures, userId}) {\r\n    const {details} = dceDetails;\r\n    const {grouped} = details;\r\n    const {aspectObjs} = useSetAspectObjs(userId, dceId, details, dceFeatures);\r\n    const {resultHtml} = useGetResultHtml(aspectObjs, resultList);\r\n\r\n    return (\r\n        <div className=\"my-5\"> \r\n         <p>Thank you for completing this experiment!</p>\r\n         {grouped&&<div className=\"col resultsContainer mx-3\">\r\n            <div className=\"mb-5\"><h3>Your results: </h3>\r\n            {resultHtml}</div>\r\n    <ResultDce  dceDetails={dceDetails} dceNameEdit = {dceNameEdit} dceId={dceId} dceFeatures={dceFeatures} userId={userId} />\r\n</div>}\r\n     </div>\r\n    )\r\n}\r\n","import './App.css';\nimport Fab from './Fab';\nimport MenuTabs from './MenuTabs';\nimport Modals from './Modals';\nimport M from 'materialize-css/dist/js/materialize.min.js';\nimport PcView from './PcView';\nimport { useState, useEffect, useRef } from \"react\";\nimport {  HashRouter as Router, Switch, useLocation, useParams} from \"react-router-dom\";\nimport StartForm from './StartForm';\nimport { pemFirestore } from '../../firebase/config';\nimport useFirestoreScenarios from '../../firebase/useFirestoreScenarios';\nimport { red } from '@material-ui/core/colors';\nimport ParticipantResults from './ParticipantResults';\n\n\nfunction App() {\n\n\n  const [answerList, setAnswerList] =useState([]);\n  const [resultList, setResultList] = useState([]);\n  const [ageGender, setAgeGender] = useState({age: \"\", gender: \"\"})\n  const [qIndex, setQIndex] = useState(1);\n  const [done,setDone] = useState([<span class='dot blue darken-2'></span>]);\n  const [todo, setTodo] = useState([]);\n  const [sc1, setSc1] = useState(null);\n  const [sc2, setSc2] = useState(null);\n  const [prevRandomA, setPrevRandomA] = useState(null);\n  const [prevRandomB, setPrevRandomB] = useState(null);\n  const [nrQuestions, setNrQuestions] = useState(0);\n  const [isGrouped, setIsGrouped] = useState(false);\n  const [dceDescr, setDceDescr] = useState(null);\n  const [dceFeatures, setDceFeatures] = useState([]);\n  const [dceDetails, setDceDetails] = useState(null)\n  const [dceNameEdit, setDceNameEdit] = useState('');\n  const [finished, setFinished] = useState(false);\n  const [started, setStarted] = useState(false);\n  const [error, setError] = useState(\"\");\n  const {userId, dceId } = useParams();\n  const {scenarios} = useFirestoreScenarios(userId, dceId);\n  const initialRender = useRef(true);\n\nuseEffect(() => {\n  //initialize materialize - css library\n  M.AutoInit();\n});\n\n//Handle click from age and gender select in startform\nconst handleAGChoice = (value, id) =>{\n  console.log(\"ageGender: \"+JSON.stringify(ageGender) )\n  let tempAgeGender = ageGender;\n  console.log(\"tempAgeGender: \"+JSON.stringify(tempAgeGender));\n  console.log(\"value in AGChoice: \"+value);\n  console.log(\"id in AGChoice: \"+JSON.stringify(id));\ntempAgeGender[id] = value;\nsetAgeGender(tempAgeGender);\n}\n\n// handle click from choose button\n  const handleClick = (choiceValue) => {\n    let tempListA =[...answerList];\n    tempListA.push(choiceValue);\n    setAnswerList(tempListA);\n    settingScenarios(isGrouped);\n    //finishes if nr of questions as defined in Dce is reached\n    if(qIndex+1>nrQuestions){\n      setFinished(true);\n    }\n    setQIndex(qIndex + 1);\n    calcDots(); \n   }\n\n\n\n   //calculate nr of dots of questions still to answer\n    const calcDots = ()=>{\n        //indicator dots for number of questions\n        let dones = [];\n        dones = [...done];\n        dones.push(<span class=\"dot blue darken-2\"></span>);\n        setDone(dones);\n        //indicator dots for questions still to answer\n        let todos = [];\n        todos = [...todo];\n        todos.pop();\n        setTodo(todos);\n    }\n\n//Sets the dots that indicate the questions that have to be answered\nconst setDots = (length)=>{\n  let dot = [];\n  for(let i=0; i<length-1;i++){\n  dot.push(<span class=\"dot\"></span>)\n  };\n  setTodo(dot);\nreturn;\n};\n\n// set the 2 scenario's that are shown on the screen. Either random or grouped.\nconst settingScenarios = (grouped)=>{\n  if(!grouped){\n    const {ScenarioA, ScenarioB}  =  getRandomScenarios();\n    setSc1(ScenarioA);\n    setSc2(ScenarioB);\n   }\n  if (grouped){\n    const {ScenarioA, ScenarioB} = getGroupedScenarios();\n    setSc1(ScenarioA);\n    setSc2(ScenarioB);\n    }\n }\n\n \n//Get 2 scenarios that are only differing in the group feature. Scenario A is random\n//Scenario B is the pair of A\nconst getGroupedScenarios = ()=>{\n  const maxNr = scenarios.length;\n  let randNrA = getRandomANr(maxNr);\n  const scenarioA = scenarios[randNrA];\n  //if there are not enough scenarios available, finish experiment\n  if (!scenarioA){\n    setFinished(true)\n  }\n  else{\n    const altnr = scenarioA[\"data\"][\"altnr\"];\n    const scenarioB = scenarios.find(sc=>(sc[\"data\"][\"nr\"]===altnr));\n    return({ScenarioA: scenarioA, ScenarioB: scenarioB});  \n  }\n  return({ScenarioA: \"\", ScenarioB: \"\"});\n}\n\n\n//get 2 random scenarios, no repeats and A!=B\nconst getRandomScenarios = ()=>{\nconst {RandomNrA, RandomNrB} = getUnusedRndNrs();\nreturn ({ScenarioA: scenarios[RandomNrA], ScenarioB: scenarios[RandomNrB]});\n}\n\n\n// get random nr for the first scenario and store used nrs to avoid repeats\nconst getRandomANr = (maxNr)=>{\n  let usedNrsA = [];\n  if (prevRandomA!=null){usedNrsA=[...prevRandomA]}\n  let randNrA=-1;\n  for (let i=scenarios.length*5; i>0; i--){\n      const tempRandNrA = Math.floor(Math.random() * maxNr);\n      if (!usedNrsA.includes(tempRandNrA)){\n        randNrA=tempRandNrA;\n        break;\n        }\n    }\n  //store A-nr if it is used\n  if(randNrA!==-1){usedNrsA.push(randNrA); }\n  setPrevRandomA(usedNrsA);\n  return randNrA;\n}\n\n//Gets 2 random nrs that have not been used before in this session where B is different from A\n//Used for Dce's without grouped scenario's\nconst getUnusedRndNrs = ()=>{\n      let usedNrsB = [];\n      if (prevRandomB!=null){usedNrsB=[...prevRandomB]}\n      const maxNr = scenarios.length;\n      let randNrA = getRandomANr(maxNr);\n      let randNrB=-1;\n      for (let i=scenarios.length*10; i>0; i--){\n        const tempRandNrB = Math.floor(Math.random() * maxNr);\n        if (randNrA!==tempRandNrB){\n          randNrB=tempRandNrB;\n          break;\n        }\n      }\n      if(randNrB!==-1){usedNrsB.push(randNrB);}\n      setPrevRandomB(usedNrsB);\n      return {RandomNrA: randNrA, RandomNrB: randNrB};\n}\n\n\n\n//load dce details from database\n//execute at startup and upon change of scenarios\nuseEffect(()=>{\n//get Dce\nif(scenarios){\nsetError(\"\");\nsetAnswerList([]);\nlet fValuesArray = scenarios.map(sc=>sc[\"data\"][\"fValues\"]);\nlet containsEmpty = fValuesArray.map(value=>Object.values(value)).find(x=>x[0]===\"\");\nconsole.log(\"startup scenarios fValues: \"+JSON.stringify(fValuesArray)+JSON.stringify(containsEmpty))\nif(containsEmpty){console.log(\"startup contains empty\")\nsetError(\"All scenario's must have data entered and saved - please contact the researcher.\")\nreturn;\n} else if(!containsEmpty){\nconsole.log(\"startup contains NOT empty\")\n// let check = tempValues.includes(\"h\")\n// console.log(\"startup scenarios fValues: \"+JSON.stringify(check))\nconsole.log(\"startup scenarios: \"+JSON.stringify(scenarios));\n    let response = pemFirestore.collection('users').doc(userId).collection('DceList').doc(dceId);\n    response.get()\n    .then(doc=>{\n      if(scenarios.length<2*doc.data().nrQuestions){\n        console.log(\"startup scenario length too small - set error- length: \"+scenarios.length)\n        setError(\"The scenario's are incomplete - please contact the researcher.\");\n        \n      }else{setError(\"\");\n      console.log(\"startup scenario length long enough - clear error- length: \"+scenarios.length);\n      console.log(\"startup fValues: \"+JSON.stringify(doc.data().features))\n        let tempGrouped = doc.data().grouped;\n        setDceFeatures(doc.data().features);\n        const tempDetails = {details: {grouped: doc.data().grouped, groupFeature: doc.data().groupFeature, nrQuestions: doc.data().nrQuestions}}\n        setDceDetails(tempDetails);\n        setDceDescr(doc.data().descr.dceDescr);\n        setDceNameEdit(doc.data().name.dceName);\n        setNrQuestions(doc.data().nrQuestions);\n        setIsGrouped(tempGrouped);\n        setDots(doc.data().nrQuestions);\n        if (scenarios.length!==0){\n          settingScenarios(tempGrouped);\n         }\n        }\n      }).catch((error) => {\n        console.error(\"Error loading document: \", error);\n    });\n    }\n}},[scenarios]);\n\n//Save results to database when experiment is finished\nuseEffect(() => {\n  // ensure this effect does not run on startup\n  if (initialRender.current) {\n    initialRender.current = false;\n  } else {\n //save result to firstore\n  let collRef = pemFirestore.collection('users').doc(userId).collection('DceList').doc(dceId).collection('RawResults')\n  let tempResultList = [];\n  answerList.map((answer,i)=> {collRef.add(answer);\ntempResultList.push(answer.pref,i);\n  });\nsetResultList(tempResultList);\n}\n}, [finished])\n\n\n  return (\n    <div className=\"App\">\n      <Modals  nrQuestions={nrQuestions} sc1={sc1} sc2={sc2}/>\n      {!finished&&!started&&<StartForm nrQuestions={nrQuestions} setStarted={setStarted} handleAGChoice={handleAGChoice}/>}\n      {!finished &&started&&!error && <MenuTabs handleClick = {handleClick} sc1={sc1} sc2={sc2} dceDescr={dceDescr} ageGender={ageGender}/>} \n      {!finished &&started&&!error && sc1&&sc2&& <PcView  handleClick = {handleClick} sc1={sc1} sc2={sc2} dceDescr={dceDescr} ageGender={ageGender}/>}\n      {finished &&started&&!error&&userId&&dceId&& <ParticipantResults resultList={resultList} dceDetails={dceDetails} dceNameEdit = {dceNameEdit} dceId={dceId} dceFeatures={dceFeatures} userId={userId}/>}\n      {/* {!finished&&<div> {answerList && <p>Choicelist: {JSON.stringify(answerList)}</p>}\n                </div>} */}\n      {!finished &&started&&!error&&<Fab/>}\n      {!finished &&started&&!error&& <div className=\"footer\">\n         {done}\n         {todo}\n      </div>}\n      {error&&<div className=\"text-danger mt-5\"><h4>Error: {error}</h4></div>}\n    </div>\n  )\n}\n\nexport default App;\n","import React, {useState} from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { signInWithGoogle } from \"../../firebase/config\";\r\nimport { pemAuth } from \"../../firebase/config\";\r\n\r\nconst SignIn = () => {\r\n    const [email, setEmail] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [error, setError] = useState(null);\r\n    const signInWithEmailAndPasswordHandler = \r\n            (event,email, password) => {\r\n                event.preventDefault();\r\n                console.log(\"signing in w pw n email \" + JSON.stringify(email));\r\n                pemAuth.signInWithEmailAndPassword(email, password).catch(error => {\r\n                    setError(\"Error signing in with password and email!\");\r\n                      console.error(\"Error signing in with password and email\", error);\r\n                    });\r\n    };\r\n\r\n      const onChangeHandler = (event) => {\r\n          const {name, value} = event.currentTarget;\r\n\r\n          if(name === 'userEmail') {\r\n              setEmail(value);\r\n          }\r\n          else if(name === 'userPassword'){\r\n            setPassword(value);\r\n          }\r\n      };\r\n\r\n  return (\r\n    <div className=\"row justify-content-center\">\r\n      <h1 className=\"text-3xl mb-2 text-center font-bold\">Sign In</h1>\r\n      <div className=\"col-sm-7\">\r\n        {error !== null && <div className = \"text-danger mb-3\">{error}</div>}\r\n        <form className=\"\">\r\n        <div className=\"form-floating\">\r\n           <input\r\n            type=\"email\"\r\n            className=\"form-control\"\r\n            name=\"userEmail\"\r\n            value = {email}\r\n            placeholder=\"Your email\"\r\n            id=\"userEmail\"\r\n            onChange = {(event) => onChangeHandler(event)}\r\n          />\r\n          <label htmlFor=\"userEmail\" className=\"block\">\r\n            Email:\r\n          </label>\r\n          </div>\r\n\r\n          <div className=\"form-floating \">\r\n          <input\r\n            type=\"password\"\r\n            className=\"form-control\"\r\n            name=\"userPassword\"\r\n            value = {password}\r\n            placeholder=\"Your Password\"\r\n            id=\"userPassword\"\r\n            onChange = {(event) => onChangeHandler(event)}\r\n          />\r\n             <label htmlFor=\"userPassword\" className=\"block\">\r\n            Password:\r\n          </label>\r\n          </div>\r\n          <button className=\"btn btn-outline-info\" onClick = {(event) => {signInWithEmailAndPasswordHandler(event, email, password)}}>\r\n            Sign in\r\n          </button>\r\n        </form>\r\n        <p className=\"my-3\">or</p>\r\n        <button\r\n          className=\"btn btn-outline-info\" onClick={() => {\r\n            signInWithGoogle();\r\n          }}>\r\n          Sign in with Google\r\n        </button>\r\n        <p className=\"my-3\">\r\n          Don't have an account?{\" \"}\r\n          <Link to=\"/signUp\" className=\"text-blue-500 hover:text-blue-600\">\r\n            Sign up here\r\n          </Link>{\" \"}\r\n          <br />{\" \"}\r\n          <Link to = \"passwordReset\" className=\"text-blue-500 hover:text-blue-600\">\r\n            Forgot Password?\r\n          </Link>\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\nexport default SignIn;","import React, { useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { pemAuth, signInWithGoogle, generateUserDocument } from \"../../firebase/config\";\r\n\r\nconst SignUp = () => {\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [displayName, setDisplayName] = useState(\"\");\r\n  const [error, setError] = useState(null);\r\n\r\n  const createUserWithEmailAndPasswordHandler =async (event, email, password) => {\r\n    event.preventDefault();\r\n    try{\r\n        const {user} = await pemAuth.createUserWithEmailAndPassword(email, password);\r\n        generateUserDocument(user, {displayName});\r\n      }\r\n      catch(error){\r\n        setError('Error Signing up with email and password');\r\n      }\r\n    setEmail(\"\");\r\n    setPassword(\"\");\r\n    setDisplayName(\"\");\r\n  };\r\n  const onChangeHandler = event => {\r\n    const { name, value } = event.currentTarget;\r\n    if (name === \"userEmail\") {\r\n      setEmail(value);\r\n    } else if (name === \"userPassword\") {\r\n      setPassword(value);\r\n    } else if (name === \"displayName\") {\r\n      setDisplayName(value);\r\n    }\r\n  };\r\n  return (\r\n    <div className=\"row justify-content-center\">\r\n      <h1 className=\"text-3xl mb-2 text-center font-bold\">Sign Up</h1>\r\n      <div className=\"col-sm-7\">\r\n        {error !== null && (\r\n          <div className=\"text-danger mb-3\">\r\n            {error}\r\n          </div>\r\n        )}\r\n        <form className=\"\">\r\n        <div className=\"form-floating\">     \r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control \"\r\n            name=\"displayName\"\r\n            value={displayName}\r\n            placeholder=\"Display name\"\r\n            id=\"displayName\"\r\n            onChange={event => onChangeHandler(event)}\r\n          />\r\n           <label htmlFor=\"displayName\" className=\"block\">\r\n            Display Name:\r\n          </label>\r\n        </div>\r\n        <div className=\"form-floating\">     \r\n           <input\r\n            type=\"email\"\r\n            className=\"form-control\"\r\n            name=\"userEmail\"\r\n            value={email}\r\n            placeholder=\"Your Email\"\r\n            id=\"userEmail\"\r\n            onChange={event => onChangeHandler(event)}\r\n          />\r\n           <label htmlFor=\"userEmail\" className=\"block\">\r\n            Email:\r\n          </label>\r\n          </div>\r\n          <div className=\"form-floating\">     \r\n          <input\r\n            type=\"password\"\r\n            className=\"form-control\"\r\n            name=\"userPassword\"\r\n            value={password}\r\n            placeholder=\"Your Password\"\r\n            id=\"userPassword\"\r\n            onChange={event => onChangeHandler(event)}\r\n          />\r\n          <label htmlFor=\"userPassword\" className=\"block\">\r\n            Password:\r\n          </label>\r\n          </div>\r\n          <button\r\n            className=\"btn btn-outline-info\"\r\n            onClick={event => {\r\n              createUserWithEmailAndPasswordHandler(event, email, password);\r\n            }}\r\n          >\r\n            Sign up\r\n          </button>\r\n        </form>\r\n        <p className=\"my-3\">or</p>\r\n        <button\r\n          className=\"btn btn-outline-info\"\r\n          onClick={() => {\r\n            try {\r\n              signInWithGoogle();\r\n            } catch (error) {\r\n              console.error(\"Error signing in with Google\", error);\r\n            }\r\n        }}\r\n        >\r\n          Sign In with Google\r\n        </button>\r\n        <p className=\"my-3\">\r\n          Already have an account?{\" \"}\r\n          <Link to=\"/\" className=\"text-blue-500 hover:text-blue-600\">\r\n            Sign in here\r\n          </Link>{\" \"}\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\nexport default SignUp;","import React, { useState } from \"react\";\r\nimport { pemAuth } from \"../../firebase/config\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst PasswordReset = () => {\r\n  const [email, setEmail] = useState(\"\");\r\n  const [emailHasBeenSent, setEmailHasBeenSent] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  const onChangeHandler = event => {\r\n    const { name, value } = event.currentTarget;\r\n\r\n    if (name === \"userEmail\") {\r\n      setEmail(value);\r\n    }\r\n  };\r\n\r\n  const sendResetEmail = event => {\r\n    event.preventDefault();\r\n    pemAuth\r\n      .sendPasswordResetEmail(email)\r\n      .then(() => {\r\n          setEmailHasBeenSent(true);\r\n        setTimeout(() => {setEmailHasBeenSent(false)}, 3000);\r\n      })\r\n      .catch(() => {\r\n        setError(\"Error resetting password\");\r\n      });\r\n  };\r\n  return (\r\n    <div className=\"row justify-content-center\">\r\n      <h1 className=\"text-xl text-center font-bold mb-3\">\r\n        Reset your Password\r\n      </h1>\r\n      <div className=\"col-sm-7\">\r\n        <form action=\"\">\r\n          {emailHasBeenSent && (\r\n            <div className=\"text-danger mb-3\">\r\n              An email has been sent to you!\r\n            </div>\r\n          )}\r\n          {error !== null && (\r\n            <div className=\"text-danger mb-3\">\r\n              {error}\r\n            </div>\r\n          )}\r\n                  <div class=\"form-floating\">\r\n          \r\n          <input\r\n            type=\"email\"\r\n            name=\"userEmail\"\r\n            id=\"userEmail\"\r\n            value={email}\r\n            placeholder=\"Input your email\"\r\n            onChange={onChangeHandler}\r\n            className=\"form-control\"\r\n          />\r\n          <label htmlFor=\"userEmail\" className=\"block\">\r\n            Email:\r\n          </label>\r\n          </div>\r\n          <button\r\n            className=\"btn btn-outline-info my-3\"\r\n            onClick={event => {\r\n              sendResetEmail(event);\r\n            }}\r\n          >\r\n            Send me a reset link\r\n          </button>\r\n        </form>\r\n\r\n        <Link\r\n          to=\"/\"\r\n          className=\"my-2 text-blue-700 hover:text-blue-800 text-center block\"\r\n        >\r\n          &larr; back to sign in page\r\n        </Link>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PasswordReset;","const handleInputD = (e,currentList, currentName) => {\r\n    const name = e.target.value;\r\n    const nameList = [...currentList];\r\n    console.log('name ande nameList in handleInputD: '+name + ' '+JSON.stringify(nameList))\r\n    nameList[0][currentName]=name;\r\n    return ( \r\n        nameList\r\n     );\r\n}\r\n \r\nexport default handleInputD;","import React, { useEffect, useState } from 'react'\r\nimport Select from 'react-select'\r\n\r\n\r\nconst useNewDceHtml =(handleNameInputChange, handleDescrInputChange, inputList, handleInputChange, handleRemoveClick, handleNrQuestionsInput, setGroupValue, handleAddClick, groupChecked, saveDce, groupValue, nrQuestions, handleCheckbox)=> {\r\n   \r\nconst [dceHtml, setDceHtml] = useState([]);\r\n\r\n \r\nuseEffect(()=>{\r\nlet tempHtml = [];\r\n   // function to create options in group feature in html\r\n   let featureList;\r\n   if(inputList){ featureList = inputList.map((x, i)=>{\r\n      return(\r\n        <option key={i} value={x.featureName}>{x.featureName}</option>\r\n      )\r\n    })\r\n  }\r\n\r\n  const options = inputList&&inputList.map((x, i)=>{\r\n    return {label: x.featureName, value: x.featureName}\r\n  })\r\n\r\ntempHtml.push(\r\n        <div>\r\n            <form className=\"form-inline\">\r\n                <div >\r\n                <label htmlFor=\"dceName\" className=\"block\">Name: </label>\r\n                    <input type=\"text\" className=\"form-control mb-2\" name=\"dceName\"  placeholder=\"DCE name\" id=\"dceName\" \r\n                    required onChange={(e)=>handleNameInputChange(e)}></input>\r\n                    </div>\r\n                <div className=\"\">\r\n                <label htmlFor=\"descr\" className=\"block\">Description: </label>\r\n                    <textarea type=\"text\" className=\"form-control mb-2\" name=\"descr\" rows=\"3\"  placeholder=\"This text will be displayed in the DCE\" id=\"descr\" \r\n                    required onChange={(e)=>handleDescrInputChange(e)}></textarea>\r\n                    </div>\r\n                  \r\n                {inputList&&inputList.map((x, i) => {\r\n        return (\r\n          <div className=\" row\">\r\n              <div className=\"\">\r\n              <label htmlFor={i} className=\"\">Feature name: </label>\r\n            <input\r\n            className=\"form-control mb-2\"\r\n              name=\"featureName\"\r\n              required\r\n              id={i}\r\n   placeholder=\"Enter feature name\"\r\n              value={x.featureName}\r\n              onChange={e => handleInputChange(e, i)}\r\n            />             \r\n            </div>\r\n            <div className=\"col col-xs-1\">\r\n            {inputList.length !== 1 && <button\r\n                className=\"btn btn-sm btn-outline-success mb-2\"\r\n                onClick={() => handleRemoveClick(i)}><i class=\"material-icons mat-icon\">delete_forever</i></button>}\r\n              </div>\r\n\r\n              <div >\r\n              <label htmlFor={i} className=\"\">Feature value 1: </label>\r\n            <input\r\n            className=\"form-control mb-2\"\r\n              name=\"featureValue1\"\r\n              required\r\n              id={i}\r\n              placeholder=\"Enter value\"\r\n              value={x.featureValue1}\r\n              onChange={e => handleInputChange(e, i)}\r\n            />             \r\n            </div>\r\n              <div >\r\n              <label htmlFor={i} className=\"\">Feature value 2: </label>\r\n            <input\r\n            className=\"form-control mb-2\"\r\n              name=\"featureValue2\"\r\n              required\r\n              id={i}\r\n              placeholder=\"Enter value\"\r\n              value={x.featureValue2}\r\n              onChange={e => handleInputChange(e, i)}\r\n            />             \r\n            </div>\r\n              <div>\r\n              {inputList.length - 1 === i && <button className=\"btn btn-sm btn-outline-info mb-2\" onClick={(e)=>handleAddClick(e)}>Add another feature</button>}</div>\r\n           </div>\r\n        );\r\n      })}\r\n      <div>\r\n        <label htmlFor=\"nrChoices\">Nr of questions in DCE</label>\r\n        <input type=\"number\" className=\"col col-xs-1 form-control mb-2\" id=\"nrChoices\" required onChange={(e)=>handleNrQuestionsInput(e)} />\r\n      </div>\r\n      {/* uncomment the checkbox part when allowing ungrouped dce's */ }\r\n      <div>\r\n        <input type=\"checkbox\" name=\"group\" id=\"chkGrp\" onClick={(e)=>handleCheckbox(e)}></input>\r\n        <label htmlFor=\"group\" className=\"\">Group by feature </label>\r\n      </div>\r\n      \r\n      <div>\r\n        {groupChecked&&\r\n        <><label className=\"col-xs-6 col-form-label pb-0\" id=\"gr-label\" htmlFor=\"GrFeat\">\r\n            Group feature\r\n          </label>\r\n          <Select className=\"form form-select-sm col-xs-6 mb-2\" id=\"GrFeat\" value={options.label} options={options} onChange={(option) => setGroupValue(option.value)} /></>\r\n          \r\n             }\r\n      {console.log('options are: '+JSON.stringify(options))}      </div>\r\n      <button className=\"btn btn-sm btn-outline-success\" onClick={(e)=>saveDce(e)} >Save DCE</button>\r\n          </form>\r\n\r\n        </div>\r\n)\r\nconsole.log('tempHtml van newDce: '+JSON.stringify(tempHtml))\r\nsetDceHtml(tempHtml);\r\n return       \r\n},[inputList, groupValue, nrQuestions, groupChecked])\r\n\r\nreturn {dceHtml}\r\n    \r\n}\r\nexport default useNewDceHtml;","import React, { useContext, useEffect, useState } from \"react\";\r\nimport { UserContext } from \"../../providers/UserProvider\";\r\nimport { pemFirestore } from \"../../firebase/config\";\r\nimport handleInputD from \"./handleDInputs\";\r\nimport useNewDceHtml from \"./useNewDceHtml\";\r\n\r\nexport default function NewDce({showDceList, showNewDceForm, dceNameList}) {\r\n    const [inputList, setInputList] = useState([{ featureName: null, featureValue1: null, featureValue2: null }]);\r\n    const [dceName, setDceName] = useState([{ dceName: \"\"}]);\r\n    const [dceDescr, setDceDescr] = useState([{dceDescr: \"\"}]);\r\n    const [groupChecked, setGroupChecked] = useState(false);//set to false when allowing ungrouped dce's\r\n    const [groupValue, setGroupValue] = useState(null);\r\n    const [nrQuestions, setNrQuestions] = useState(0);\r\n\r\n    const user = useContext(UserContext);\r\n    const uid = user.uid;\r\n\r\nuseEffect(()=>{\r\n  console.log('nrQuestions changed. nr is '+nrQuestions)\r\n},[nrQuestions])\r\n\r\n    //Check if feature names and values are all filled in before save\r\n  const featuresNotNull = (item)=>{\r\nif(item.featureName==null||item.featureName===\"\"){\r\nalert(\"Please fill in all feature names\");\r\nreturn false;\r\n}\r\nif(item.featureValue1==null||item.featureValue1===\"\"||item.featureValue2==null||item.featureValue2===\"\"){\r\n  alert(\"Please fill in all feature values\");\r\n  return false;\r\n}\r\nreturn true;\r\n  }\r\n\r\n//helper for dceNotNull check\r\n  const existsName = (name => dceName[0].dceName===name);\r\n\r\n//Check if dce name and number of questions are all filled in before save. Also check if dce name is unique\r\n  const dceNotNull = ()=>{\r\n    console.log('dceNotNull check - dceName is: '+dceName[0].dceName+ ' nrQuestions is: '+nrQuestions)\r\n    if(dceName[0].dceName===\"\" || dceNameList.some(existsName)){\r\n      alert(\"Fill in a unique DCE name\");\r\n      return false;\r\n    }\r\n    if(nrQuestions<=0){\r\n      alert(\"Fill in the number of questions the participant has to answer in the DCE\");\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  //Check if groupValue is not null \r\n  const groupValueNotNull = ()=>{\r\n    if (groupChecked&&groupValue===null){\r\n      alert(\"Please select a value for the group feature\");\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  //Save dce if all fields are filled in\r\n    const saveDce = (e)=>{\r\n        e.preventDefault();\r\n        if(inputList.every(featuresNotNull)&&dceNotNull()&&groupValueNotNull()){\r\n        let dceColl = pemFirestore.collection('users').doc(uid).collection('DceList');\r\n        dceColl.add({name: dceName[0], descr: dceDescr[0], features: inputList, nrFeatures: inputList.length, grouped: groupChecked, groupFeature: groupValue, nrQuestions: nrQuestions})\r\n        .then((docRef)=>{\r\n              console.log(\"Document written with ID: \", docRef.id);\r\n        })\r\n        .catch((error) => {\r\n            console.error(\"Error adding document: \", error);\r\n        });\r\n        showDceList();\r\n        showNewDceForm();\r\n    }\r\n  }\r\n\r\n    // handle name input change\r\n    const handleNameInputChange = (e) => {\r\n      console.log('start handleNameInput, dceName is: '+JSON.stringify(dceName))\r\n      const nameList = handleInputD(e, dceName, \"dceName\")\r\n      setDceName(nameList);\r\n    }\r\n\r\n    // handle descr input change\r\n    const handleDescrInputChange = (e) => {\r\n      const descrList = handleInputD(e, dceDescr, \"dceDescr\");\r\n      setDceDescr(descrList);\r\n    }\r\n\r\n    // handle nr questions input change\r\n    const handleNrQuestionsInput = (e) =>{\r\n      console.log('handleNrQ started, nrString is: '+e.target.value)\r\n      const nrString = e.target.value;\r\n      let nrQ = 0;\r\n      nrQ = Number(nrString);\r\n      console.log('nrQ is '+nrQ)\r\n      setNrQuestions(nrQ);\r\n    }\r\n\r\n     // handle feature input change\r\n  const handleInputChange = (e, index) => {\r\n    console.log('start handleInput')\r\n    const { name, value } = e.target;\r\n    const list = [...inputList];\r\n    list[index][name] = value;\r\n    setInputList(list);\r\n  };\r\n \r\n  // deletes dce from database and refreshes list\r\n  const handleRemoveClick = index => {\r\n    const list = [...inputList];\r\n    list.splice(index, 1);\r\n    setInputList(list);\r\n    showDceList();\r\n  };\r\n \r\n  // Adds another feature in the form\r\n  const handleAddClick = () => {\r\n    setInputList([...inputList, { featureName: null , featureValue1: null, featureValue2: null}]);\r\n  }\r\n\r\n  // checkbox for group feature - prep for ungrouped dce's\r\n  const handleCheckbox = (e)=>{\r\n    const { checked} = e.target;\r\n    console.log(\"groupchkbox value: \"+checked)\r\n    setGroupChecked(checked);\r\n  }\r\n\r\n  //registers choice for group feature\r\n  const handleGroupChoice = (e) =>{\r\n    const fName = e.value;\r\n    setGroupValue(fName);\r\n  }\r\n\r\n  // function to create options in group feature in html\r\n  let featureList = inputList.map((x, i)=>{\r\n    return(\r\n      <option key={i} value={x.featureName}>{x.featureName}</option>\r\n    )\r\n  })\r\n \r\nconst {dceHtml} = useNewDceHtml(handleNameInputChange, handleDescrInputChange, inputList, handleInputChange, handleRemoveClick, handleNrQuestionsInput, setGroupValue, handleAddClick, groupChecked, saveDce, groupValue, nrQuestions, handleCheckbox);\r\n\r\n  //html to show in browser\r\n  return (\r\n        <div>\r\n          {dceHtml}\r\n          {/* {inputList&&<NewDceHtml handleNameInputChange={handleNameInputChange} handleDescrInputChange={handleDescrInputChange} inputList={inputList} handleInputChange={handleInputChange} handleRemoveClick={handleRemoveClick}\r\n           handleNrQuestionsInput={handleNrQuestionsInput} handleGroupChoice={handleGroupChoice} handleAddClick={handleAddClick} groupChecked={groupChecked} saveDce={saveDce}/>} */}\r\n            {/* <form className=\"form-inline\">\r\n                <div className=\"form-floating\">\r\n                    <input type=\"text\" className=\"form-control\" name=\"dceName\"  placeholder=\"DCE name\" id=\"dceName\" \r\n                    required onChange={handleNameInputChange}></input>\r\n                    <label htmlFor=\"dceName\" className=\"block\">Name: </label>\r\n                    </div>\r\n                <div className=\"form-floating\">\r\n                    <input type=\"text\" className=\"form-control\" name=\"descr\"  placeholder=\"Description - this text will be displayed in the DCE\" id=\"descr\" \r\n                    required onChange={handleDescrInputChange}></input>\r\n                    <label htmlFor=\"descr\" className=\"block\">Description (shown in DCE): </label>\r\n                    </div>\r\n                  \r\n                {inputList.map((x, i) => {\r\n        return (\r\n          <div className=\" row\">\r\n              <div className=\"col-xs-12 col-sm-9 form-floating\">\r\n            <input\r\n            className=\"form-control \"\r\n              name=\"featureName\"\r\n              required\r\n              id={i}\r\n   placeholder=\"Enter feature name\"\r\n              value={x.featureName}\r\n              onChange={e => handleInputChange(e, i)}\r\n            />             \r\n            <label htmlFor={i} className=\"\">Feature name: </label>\r\n            </div>\r\n            <div className=\"col col-xs-1\">\r\n            {inputList.length !== 1 && <button\r\n                className=\"btn btn-sm btn-outline-success\"\r\n                onClick={() => handleRemoveClick(i)}><i class=\"material-icons mat-icon\">delete_forever</i></button>}\r\n              </div>\r\n\r\n              <div className=\"col-xs-12 col-sm-9 form-floating\">\r\n              <input\r\n            className=\"form-control \"\r\n              name=\"featureValue1\"\r\n              required\r\n              id={i}\r\n              placeholder=\"Enter feature value 1\"\r\n              value={x.featureValue1}\r\n              onChange={e => handleInputChange(e, i)}\r\n            />             \r\n            <label htmlFor={i} className=\"\">Feature value 1: </label>\r\n            </div>\r\n              <div className=\"col-xs-12 col-sm-9 form-floating\">\r\n              <input\r\n            className=\"form-control \"\r\n              name=\"featureValue2\"\r\n              required\r\n              id={i}\r\n              placeholder=\"Enter feature value 2\"\r\n              value={x.featureValue2}\r\n              onChange={e => handleInputChange(e, i)}\r\n            />             \r\n            <label htmlFor={i} className=\"\">Feature value 2: </label>\r\n            </div>\r\n              <div>\r\n              {inputList.length - 1 === i && <button className=\"btn btn-sm btn-outline-info\" onClick={handleAddClick}>Add another feature</button>}</div>\r\n           </div>\r\n        );\r\n      })}\r\n      <div>\r\n        <label htmlFor=\"nrChoices\">Nr of questions in DCE</label>\r\n        <input type=\"number\" className=\"col col-xs-1\" id=\"nrChoices\" required onChange={handleNrQuestionsInput} />\r\n      </div> */}\r\n      {/* uncomment the checkbox part when allowing ungrouped dce's */ }\r\n      {/* <div>\r\n        <input type=\"checkbox\" name=\"group\" id=\"chkGrp\" onClick={handleCheckbox}></input>\r\n        <label htmlFor=\"group\" className=\"\">Group by feature </label>\r\n      </div> */}\r\n      {/* <div>\r\n        {groupChecked&&\r\n        <label htmlFor=\"groupFeature\" className=\"col-xs-6 col-form-label\">Group feature\r\n            <select className=\"form-select form-select-sm col-xs-6 \" defaultValue=\"\" name=\"groupFeature\"  id=\"groupFeature\"  onChange={handleGroupChoice}>\r\n            <option value=\"\" disabled></option>\r\n             {featureList}\r\n             </select>\r\n            </label>\r\n        }\r\n      </div>\r\n      <button className=\"btn btn-sm btn-outline-success\" onClick={saveDce} >Save DCE</button>\r\n          </form> */}\r\n        </div>\r\n    )\r\n}\r\n","import { useState, useEffect } from 'react';\r\nimport { pemStorage } from './config';\r\n\r\n\r\nconst useStorage = (file ) => {\r\n  const [progress, setProgress] = useState(0);\r\n  const [error, setError] = useState(null);\r\n  const [url, setUrl] = useState(null);\r\n\r\n\r\n  useEffect(() => {\r\n    // references\r\n    const storageRef = pemStorage.ref(file.name);\r\n    \r\n    storageRef.put(file).on('state_changed', (snap) => {\r\n      let percentage = (snap.bytesTransferred / snap.totalBytes) * 100;\r\n      setProgress(percentage);\r\n    }, (err) => {\r\n      setError(err);\r\n    }, async () => {\r\n      const url = await storageRef.getDownloadURL();\r\n      setUrl(url);\r\n    });\r\n  }, [file]);\r\n\r\n  return { progress, url, error };\r\n}\r\n\r\nexport default useStorage;","import React, { useEffect } from 'react';\r\nimport useStorage from '../../firebase/useStorage';\r\n\r\nconst ProgressBar = ({ file, setFile, dceId, scNr, setUrl }) => {\r\n  const { progress, url } = useStorage(file, dceId, scNr);\r\n\r\n  //set file and url when url (from storage) changes \r\n  useEffect(() => {\r\n    if (url) {\r\n      setFile(null);\r\n      setUrl(url);\r\n    }\r\n  }, [url, setFile]);\r\n\r\n\r\n    //Html to show in browser\r\n  return (\r\n    <div className=\"progress-bar\"\r\n      style={{ width: progress + '%' }}\r\n    ></div>\r\n  );\r\n} \r\n\r\nexport default ProgressBar;","import React, { useState } from 'react';\r\nimport ProgressBar from './ProgressBar';\r\n\r\nconst UploadForm = ({ dceId, scNr, setUrl }) => {\r\n  const [file, setFile] = useState(null);\r\n  const [error, setError] = useState(null);\r\n\r\n  const types = ['image/png', 'image/jpeg'];\r\n\r\n  //handle selected file\r\n  const handleChange = (e) => {\r\n    let selected = e.target.files[0];\r\n    if (selected && types.includes(selected.type)) {\r\n      setFile(selected);\r\n      setError('');\r\n    } else {\r\n      setFile(null);\r\n      setError('Please select an image file (png or jpg)');\r\n    }\r\n  };\r\n\r\n  //Html to show in browser\r\n  return (\r\n    <form>\r\n      <label>\r\n        <input type=\"file\" style={{height: 0, width: 0}} onChange={handleChange} />\r\n        <span className=\"btn btn-sm btn-outline-info mb-3\">Upload image</span>\r\n      </label>\r\n      <div className=\"output\">\r\n        { error && <div className=\"error\">{ error }</div>}\r\n        { file && <div>{ file.name }</div> }\r\n        { file && <ProgressBar file={file} setFile={setFile} dceId={dceId} scNr={scNr} setUrl={setUrl}/> }\r\n      </div>\r\n    </form>\r\n  );\r\n}\r\n\r\nexport default UploadForm;","import Select from \"react-select\";\r\nimport { useEffect, useState } from \"react\";\r\nimport UploadForm from \"./UploadForm\";\r\n\r\n\r\nconst useNewScenarioHtml = (dceDetails, chosen, handleChosen, handleSave, handleEntry, handleCreateAlt, dceFeatures, dceId, scNr, setChosen, setIsSaved, isSaved ) => {\r\n\r\nconst [scenarioHtml, setScenarioHtml] = useState([]);\r\n\r\n// set url for the image and save to chosenList\r\nconst setUrl = (url)=>{\r\n    const chosenList = [...chosen];\r\n    chosenList[0][\"data\"][\"scImg\"]= url;\r\n    setChosen(chosenList);\r\n    setIsSaved(false)\r\n}\r\n\r\nuseEffect(()=>{\r\n\r\n    let tempHtml = [];\r\n    tempHtml.push(\r\n        <div>\r\n        {dceDetails&&dceDetails.details.grouped&&chosen[0][\"data\"]&&<h5>Paired with scenario nr: {chosen[0][\"data\"][\"altnr\"]}</h5>}\r\n        <form className=\"form-row\" > \r\n        <h6>Features</h6>\r\n        <div className=\"row\">\r\n  {chosen[0][\"data\"]&& dceFeatures.map((feature,i) =>{\r\n      let options =[{label: feature.featureValue1, value: feature.featureValue1},\r\n        {label: feature.featureValue2, value: feature.featureValue2}];\r\n            return (\r\n           <div className=\"col-md-4  mb-3\"> <label htmlFor={i} className=\"col-form-label\">{feature.featureName}</label>\r\n            <Select options={options}  placeholder={chosen[0][\"data\"][\"fValues\"][feature.featureName]} defaultValue={chosen[0][\"data\"][\"fValues\"][feature.featureName]} isDisabled={chosen[0][\"data\"][\"altSc\"]} \r\n             onChange={(option)=>handleChosen(option.value, feature.featureName)} id={i}/>\r\n            </div>\r\n            )\r\n        })}\r\n        </div>\r\n        </form>\r\n        {chosen[0][\"data\"]&&<form id=\"textForm\" onSubmit={(e)=>handleSave(e)}>\r\n        <div>\r\n        <h6>Scenario text</h6>\r\n        <textarea className=\"form-control form-control-sm mb-3\" name=\"scText\" value={chosen[0][\"data\"][\"scText\"]} placeholder=\"Enter scenario text\" id=\"scText\" onChange={e=>handleEntry(e)}></textarea>\r\n         </div>\r\n                               \r\n         <div>\r\n             <h6>Scenario explanation</h6>\r\n             <textarea className=\"form-control form-control-sm mb-3\" type=\"text\" name=\"scExpl\" value={chosen[0][\"data\"][\"scExpl\"]} placeholder=\"Enter additional explanatory text\" id=\"scExpl\" onChange={e=>handleEntry(e)}></textarea>\r\n\r\n         </div>\r\n         <h6>Scenario image link</h6>\r\n               <UploadForm dceId={dceId} scNr={scNr} setUrl={setUrl} />\r\n               {chosen[0][\"data\"][\"scImg\"]&&<img src={chosen[0][\"data\"][\"scImg\"]} className='scImage' alt=\"scenario image\"/>}\r\n               {dceDetails&&dceDetails.details.grouped&&!chosen[0][\"data\"][\"altnr\"]&&<input className=\"btn  btn-outline-success mb-3\" type=\"button\" onClick={e=>handleCreateAlt(e)} value=\"Save & Create pair\"></input>}\r\n               {(chosen[0][\"data\"][\"altnr\"]||!dceDetails.details.grouped)&&<input className=\"btn  btn-outline-success mb-3\" type=\"submit\" value=\"Save\"></input>}\r\n               </form>}\r\n               {isSaved&&<div className={isSaved}>Scenario has been saved</div>}\r\n         </div>\r\n        )\r\n        console.log('tempScenario: '+ JSON.stringify(tempHtml))\r\n        setScenarioHtml(tempHtml);\r\n         return       \r\n        },[dceDetails, chosen, isSaved])\r\n        \r\n        return {scenarioHtml}\r\n            \r\n        }\r\n        \r\n\r\n \r\nexport default useNewScenarioHtml;","import React, { useContext, useState } from \"react\";\r\nimport { UserContext } from \"../../providers/UserProvider\";\r\nimport { pemFirestore } from \"../../firebase/config\";\r\nimport UploadForm from \"./UploadForm\";\r\nimport useNewScenarioHtml from \"./useNewScenarioHtml\";\r\n\r\nexport default function NewScenario({ dceId, dceFeatures, dceDetails, scNr, setScNr, chosen, setChosen, handleAddScenario, setIsSaved, isSaved}) {\r\n\r\n    const user = useContext(UserContext);\r\n    const uid = user.uid;\r\n    const [newScNr, setNewScNr] = useState(scNr);\r\n    const disabled = 'true';\r\n\r\n\r\n    //Handles choices from dropdown fValues\r\n    const handleChosen = (value, name)=>{\r\n        console.log('value and name in handleChosen: '+value+name)\r\n        // e.preventDefault();\r\n        // const {name, value} = e.target;\r\n        const chosenList = [...chosen];\r\n        console.log('chosenList in handleChosen: '+JSON.stringify(chosenList))\r\n        chosenList[0][\"data\"][\"fValues\"][name]= value;\r\n        setChosen(chosenList);\r\n        setIsSaved(false);\r\n    }\r\n\r\n    //Handles entries from input fields\r\n    const handleEntry = (e)=>{\r\n        e.preventDefault();\r\n        const {name, value} = e.target;\r\n        const chosenList = [...chosen];\r\n        chosenList[0][\"data\"][name]= value;\r\n        setChosen(chosenList);\r\n        setIsSaved(false);\r\n    }\r\n\r\n//Gets features for the other scenario in a pair\r\nconst getAltFValues = (fValueList) =>{\r\n    const groupFeat = dceDetails.details.groupFeature;\r\n    const groupFeatValue = fValueList[groupFeat];\r\n    let newFeatValue;\r\n    dceFeatures.map((feature,i) =>{\r\n        if (feature.featureName===groupFeat){\r\n            if(feature.featureValue1===groupFeatValue){\r\n                newFeatValue = feature.featureValue2;}\r\n            if(feature.featureValue2===groupFeatValue){\r\n                newFeatValue = feature.featureValue1;}\r\n        }\r\n    })\r\n    let altFValueList = {...fValueList};\r\n    altFValueList[groupFeat] = newFeatValue;\r\n    return {altFValueList, newFeatValue }\r\n}\r\n\r\n\r\n//Saves via handleSave and creates the alternative scenario in case of grouped features\r\nconst handleCreateAlt = (e)=>{\r\n    if(fieldsComplete()){\r\n    let seqNr;\r\n    handleAddScenario(scNr)\r\n    .then((nr)=>{seqNr=nr;\r\n        //here handleSave\r\n        const chosenList = [...chosen];\r\n        const fValueList = chosen[0][\"data\"][\"fValues\"];\r\n        const {altFValueList, newFeatValue} = getAltFValues(fValueList);\r\n        chosenList[0][\"data\"][\"altnr\"]= seqNr;\r\n        setChosen(chosenList);\r\n        setNewScNr(seqNr);\r\n        setScNr(seqNr);\r\n        handleSave(e)\r\n        .then(()=>{\r\n        //load data in forms\r\n        setChosen([{}]);\r\n        pemFirestore.collection('users').doc(uid).collection('DceList').doc(dceId).collection('Scenarios').doc(seqNr.toString()).get()\r\n    .then((doc)=>{\r\n        let data = doc.data();\r\n        let newChosenList = [data]\r\n        newChosenList[0][\"data\"][\"fValues\"]=altFValueList;\r\n        setChosen(newChosenList);\r\n        let response = pemFirestore.collection('users').doc(uid).collection('DceList').doc(dceId).collection('Scenarios');\r\n        response.doc(seqNr.toString()).set(newChosenList[0]);\r\n     })\r\n    })\r\n    }).catch((err)=>{\r\n        console.log('Error with saving scenario'+err);\r\n    })\r\n}\r\n}\r\n\r\n//Checks if all required field have an entry\r\nconst fieldsComplete = ()=>{\r\n    let textOrImageComplete = false;\r\n    let featuresComplete = false;\r\n    if (chosen[0][\"data\"][\"scText\"].length!==0 || chosen[0][\"data\"][\"scImg\"].length!==0){\r\n        textOrImageComplete=true}\r\n    else{\r\n    alert(\"Fill in the Scenario Text or upload a Scenario Image, or do both\") \r\n    }\r\n    \r\n    featuresComplete= !dceFeatures.some(feature=>{\r\n        console.log('check features complete: '+JSON.stringify(chosen[0][\"data\"]))\r\n        console.log('feature: '+JSON.stringify(feature))\r\n        if(chosen[0][\"data\"][\"fValues\"][feature.featureName].length===0){\r\n            alert(\"Select a value for every feature in the scenario\");\r\n             \r\n        } return (chosen[0][\"data\"][\"fValues\"][feature.featureName].length===0);\r\n    })\r\n    console.log('text and feat complete: '+textOrImageComplete+featuresComplete)\r\nreturn textOrImageComplete&&featuresComplete;    \r\n}\r\n\r\n //Checks if all required field have an entry and saves to Firestore if ok.\r\n //Else alert with error message\r\nconst handleSave = async (e)=>{\r\ne.preventDefault();\r\n\r\nif(fieldsComplete()){\r\nlet response = pemFirestore.collection('users').doc(uid).collection('DceList').doc(dceId).collection('Scenarios');\r\nresponse.doc(scNr.toString()).set(chosen[0]);\r\nconst fValues = chosen[0][\"data\"][\"fValues\"];\r\nconst altnr = chosen[0][\"data\"][\"altnr\"];\r\nconst {altFValueList} = getAltFValues(fValues);\r\nif (altnr){\r\n    let response = pemFirestore.collection('users').doc(uid).collection('DceList').doc(dceId).collection('Scenarios');\r\n        response.doc(altnr.toString()).update({\r\n            \"data.fValues\": altFValueList\r\n        });\r\n}\r\nsetIsSaved(true);\r\n}\r\n}\r\n\r\nconst {scenarioHtml} = useNewScenarioHtml(dceDetails, chosen, handleChosen, handleSave, handleEntry, handleCreateAlt, dceFeatures, dceId, scNr, setChosen, setIsSaved, isSaved)\r\n//Html to show in browser\r\n    return (\r\n        <div>\r\n                    {scenarioHtml}\r\n\r\n              {/* {dceDetails&&dceDetails.details.grouped&&chosen[0][\"data\"]&&<h5>Paired with scenario nr: {chosen[0][\"data\"][\"altnr\"]}</h5>}\r\n              <form className=\"form-row\" > \r\n              <h6>Features</h6>\r\n        {chosen[0][\"data\"]&& dceFeatures.map((feature,i) =>{\r\n                  return (\r\n                  <label htmlFor={i} className=\"col-md-3 col-form-label\">{feature.featureName}\r\n                  <select className=\"form-select form-select-sm col-md-3  mb-3\" disabled={chosen[0][\"data\"][\"altSc\"]} name={feature.featureName} defaultValue={chosen[0][\"data\"][\"fValues\"][feature.featureName]} onChange={handleChosen} id={i} required>\r\n                   <option value=\"\" disabled></option>\r\n                   <option value={feature.featureValue1}>{feature.featureValue1}</option>\r\n                   <option value={feature.featureValue2} >{feature.featureValue2}</option>\r\n                   </select>\r\n                   </label>\r\n                  )\r\n              })}\r\n              </form>\r\n              {chosen[0][\"data\"]&&<form id=\"textForm\" onSubmit={handleSave}>\r\n              <div>\r\n              <h6>Scenario text</h6>\r\n              <textarea className=\"form-control form-control-sm mb-3\" name=\"scText\" value={chosen[0][\"data\"][\"scText\"]} placeholder=\"Enter scenario text\" id=\"scText\" onChange={e=>handleEntry(e)}></textarea>\r\n               </div>\r\n                                     \r\n               <div>\r\n                   <h6>Scenario explanation</h6>\r\n                   <textarea className=\"form-control form-control-sm mb-3\" type=\"text\" name=\"scExpl\" value={chosen[0][\"data\"][\"scExpl\"]} placeholder=\"Enter additional explanatory text\" id=\"scExpl\" onChange={e=>handleEntry(e)}></textarea>\r\n\r\n               </div>\r\n              \r\n               <h6>Scenario image link</h6>\r\n               <UploadForm dceId={dceId} scNr={scNr} setUrl={setUrl} />\r\n               {chosen[0][\"data\"][\"scImg\"]&&<img src={chosen[0][\"data\"][\"scImg\"]} className='scImage' alt=\"scenario image\"/>}\r\n               {dceDetails&&dceDetails.details.grouped&&!chosen[0][\"data\"][\"altnr\"]&&<input className=\"btn  btn-outline-success mb-3\" type=\"button\" onClick={handleCreateAlt} value=\"Save & Create pair\"></input>}\r\n               {(chosen[0][\"data\"][\"altnr\"]||!dceDetails.details.grouped)&&<input className=\"btn  btn-outline-success mb-3\" type=\"submit\" value=\"Save\"></input>}\r\n               </form>}\r\n               {isSaved&&<div className={isSaved}>Scenario has been saved</div>} */}\r\n    </div>\r\n    )\r\n}\r\n","import React, { useContext, useState, useEffect } from \"react\";\r\nimport { UserContext } from \"../../providers/UserProvider\";\r\nimport { pemFirestore } from \"../../firebase/config\";\r\nimport NewScenario from \"./NewScenario\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\n\r\nexport default function ScenarioList({dceNameEdit, dceId, dceFeatures, dceDetails}) {\r\n\r\n    const user = useContext(UserContext);\r\n    const uid = user.uid;\r\n    const [chosen, setChosen] = useState([{nr: 0}]);\r\n    const [scList, setScList] = useState([]);\r\n    const [scNr, setScNr] = useState(\"\");\r\n    const [isSaved, setIsSaved] = useState(false);\r\n\r\n    //Show list of scenario's for the selected dce\r\n    const showScList = async() => {\r\n        if(dceId){\r\n        let response = pemFirestore.collection('users').doc(uid).collection('DceList').doc(dceId).collection('Scenarios').orderBy('data.nr');\r\n        let data = await response.get();\r\n        let tempDocs = [];\r\n        data.docs.forEach(doc => {\r\n            tempDocs.push({...doc.data(), id: doc.id});\r\n            });\r\n        setScList(tempDocs) ;\r\n        }\r\n    }\r\n\r\n    //show scenario list when dceId is changed\r\n    useEffect(() => {\r\n        showScList();\r\n        setChosen([{}]);\r\n            setScNr(null);\r\n            setIsSaved(false)\r\n      }, [dceId])\r\n\r\n// Adds scenario with id which is first available unique number \r\n// Features are taken from dce\r\n    const handleAddScenario = async(altnr) =>{\r\n        if(dceId){\r\n            const fValues ={};\r\n            // let featNr = 1;\r\n            dceFeatures.map(feature=>{\r\n                fValues[feature.featureName]=\"\";\r\n                // featNr +=1;\r\n            })\r\n            let response = pemFirestore.collection('users').doc(uid).collection('DceList').doc(dceId).collection('Scenarios').orderBy('data.nr');\r\n        let data =  await response.get();\r\n        let seqNr=1;\r\n        data.docs.forEach(doc => {\r\n            if(doc.data().data.nr!==seqNr){\r\n                console.log(\"doc id !== seqNr, seqNr is: \"+seqNr + \"doc id is: \"+ doc.data().data.nr);\r\n                return;\r\n            }\r\n            else {\r\n                console.log(\"doc id == seqNr, seqNr is: \"+seqNr + \"doc id is: \"+ doc.data().data.nr);\r\n                seqNr +=1;\r\n            }\r\n            });\r\n            let altSc = false;\r\n            if (altnr){altSc = true}\r\n            setChosen([{}]);\r\n            const detailData = {data: {nr: seqNr, altnr: altnr, altSc: altSc, fValues, scText: \"\", scImg: \"\", scExpl: \"\"}};\r\n            let response2 = pemFirestore.collection('users').doc(uid).collection('DceList').doc(dceId).collection('Scenarios');\r\n            response2.doc(seqNr.toString()).set(detailData);\r\n            setChosen([detailData]);\r\n            setScNr(seqNr);\r\n            setIsSaved(false);\r\n        showScList();\r\n      return seqNr;\r\n    }\r\n}\r\n\r\n//delete scenario from database and refresh list\r\nconst deleteSc = (e) => {\r\n    let sc;\r\n    console.log(\"e is: \"+ e.target.parentElement.parentElement.getAttribute('data-id'));\r\n    if(e.target.parentElement.parentElement.getAttribute('data-id')){\r\n    sc = e.target.parentElement.parentElement.getAttribute('data-id');\r\n    } else{\r\n        sc = e.target.parentElement.getAttribute('data-id');\r\n    }\r\n    let altSc = scList.find(scx=>scx.id===sc).data.altnr;\r\nconsole.log(\"Alt sc that should be deleted: \"+JSON.stringify(altSc));\r\n    \r\n    pemFirestore.collection('users').doc(uid).collection('DceList').doc(dceId).collection('Scenarios').doc(sc).delete().then(() => {\r\n        console.log(\"Scenario with ID \"+sc+ \"  successfully deleted!\");\r\n    }).catch((error) => {\r\n        console.error(\"Error removing document: \", error);\r\n    });\r\n    if (altSc){\r\n    pemFirestore.collection('users').doc(uid).collection('DceList').doc(dceId).collection('Scenarios').doc(altSc.toString()).delete().then(() => {\r\n        console.log(\"Alt scenario with ID \"+altSc.toString()+ \"  successfully deleted!\");\r\n    }).catch((error) => {\r\n        console.error(\"Error removing document: \", error);\r\n    });}\r\n    console.log('sc='+sc+'scNr='+scNr)\r\nif (sc==scNr){\r\n    console.log('sc = scNr : '+sc+scNr)\r\n    setScNr(\"\");\r\n    setChosen([{}]);\r\n}\r\nshowScList();\r\nsetIsSaved(false);\r\n}\r\n\r\n//select scenario to show and edit details \r\nconst editSc = (e) => {\r\n    setChosen([{}]);\r\n    let sc;\r\n    console.log(\"e is: \"+ e.target.parentElement.parentElement.getAttribute('data-id'));\r\n    if(e.target.parentElement.parentElement.getAttribute('data-id')){\r\n    sc = e.target.parentElement.parentElement.getAttribute('data-id');\r\n    } else{\r\n        sc = e.target.parentElement.getAttribute('data-id');\r\n    }\r\n    setScNr(sc);\r\n    pemFirestore.collection('users').doc(uid).collection('DceList').doc(dceId).collection('Scenarios').doc(sc).get()\r\n.then((doc)=>{\r\n    let data = doc.data();\r\n    setChosen([data]);\r\n    setIsSaved(false);\r\n }).catch((err)=>{\r\n    console.log('Error with loading scenario'+err);\r\n})\r\n}\r\n\r\n    //html to show in browser\r\n    return (\r\n        <div>\r\n            <h4><u>Details</u> for <b> {dceNameEdit}</b>{scNr&&<span> - Scenario nr. {scNr}</span>}{!scNr&&<span> - Select a scenario nr.</span>}</h4>\r\n            <div className=\"\">\r\n            <h6>{dceDetails&&<span> <Link to={{pathname:\"/app/\"+uid+\"/\"+ dceId}}>\r\n                    <button className=\"btn btn-sm btn-outline-info mx-1\" ><i class=\"material-icons mat-icon mt-1\">play_circle_outline</i></button>\r\n                    </Link></span>}\r\n                    {dceDetails&&<span> Play this DCE</span>} {dceDetails&& <span> <hr className=\"ruler detailsRuler\"/> <button className=\"btn btn-sm btn-outline-info\" onClick={() => {let clipText = window.location.href+\"app/\"+uid+\"/\"+ dceId; navigator.clipboard.writeText(clipText)}}>Copy DCE link </button></span>} </h6></div>\r\n           <div className=\"pb-4\"><h6> {dceDetails&&dceDetails.details.grouped&&<span>Group feature: {dceDetails.details.groupFeature}</span>} {dceDetails&& <span> <hr className=\"ruler detailsRuler\"/> Questions in DCE: {dceDetails.details.nrQuestions}</span>}</h6></div>\r\n            <div className=\"row\">\r\n   <div className=\"scenarioList col col-6 col-md-3 col-sm-5\">\r\n    <h5>Scenario's</h5>\r\n    <ul>\r\n    <li className=\"listRuler mb-1\">Nr.  <hr className=\"ruler\"/> Edit <hr className=\"rulerSm\"/>&nbsp;Delete </li>\r\n                {scList && scList.map((sc,i)=>{\r\n                return(\r\n                    <div key={i} className=\"\">\r\n                    <h5 className=\"mt-3\"><li className=\"listRuler mb-1\" data-id={sc.id}><button className=\"btn btn-sm btn-outline-info\" onClick={editSc}>{sc.data.nr}</button>\r\n                    <hr className=\"ruler\"/> \r\n                    <button className=\"btn  btn-outline-warning btn-sm mx-2\" onClick={editSc} > <i class=\"material-icons mat-icon\">edit</i></button>\r\n                    <hr className=\"rulerSm\"/>\r\n                    <button className=\"btn  btn-outline-success btn-sm mx-2\" onClick={(e) => { if (window.confirm('Are you sure you wish to delete this scenario?')) deleteSc(e) }} > <i class=\"material-icons mat-icon\">delete_forever</i></button></li></h5>\r\n                    </div>\r\n                )\r\n                })\r\n            }\r\n   \r\n           {dceId&&<li className=\"mb-2\"><button className=\"btn btn-sm btn-outline-info\" onClick={()=>handleAddScenario(null)}>Add scenario</button></li>}\r\n    </ul>\r\n    </div>\r\n    \r\n    <div className=\"col\">\r\n        <NewScenario dceId={dceId} dceFeatures={dceFeatures} dceDetails={dceDetails} scNr={scNr} setScNr={setScNr} \r\n        chosen={chosen} setChosen={setChosen} handleAddScenario={handleAddScenario} setIsSaved={setIsSaved} isSaved={isSaved}/>\r\n    </div>\r\n    </div>\r\n        </div>\r\n    )\r\n}\r\n","import React, { useContext, useEffect, useState } from \"react\";\r\nimport { UserContext } from \"../../providers/UserProvider\";\r\nimport { pemFirestore } from \"../../firebase/config\";\r\nimport NewDce from \"./NewDce\";\r\nimport ScenarioList from \"./ScenarioList\";\r\nimport { HashRouter as Router, Route, Link } from \"react-router-dom\";\r\n\r\n\r\nexport default function DceList() {\r\n\r\n    const [dceHtml, setDceHtml] = useState([]);\r\n    const [showNew, setShowNew] = useState(false);\r\n    const [dceNameEdit, setDceNameEdit] = useState('(Click on ICON in DCE list)');\r\n    const [dceFeatures, setDceFeatures] = useState([]);\r\n    const [dceId, setDceId] = useState('');\r\n    const [dceNameList, setDceNameList] = useState([]);\r\n    const [dceDetails, setDceDetails] = useState(null)\r\n    const user = useContext(UserContext);\r\n    const uid = user.uid;\r\n\r\n    console.log(\"user uid in dcelist is: \" +JSON.stringify(user.uid));\r\n\r\n//Get list of dce's from database and show on screen\r\nconst showDceList = async() => {\r\n    let response = pemFirestore.collection('users').doc(uid).collection('DceList');\r\n    let data = await response.get();\r\n    let tempDocs = [];\r\n    let tempNameList = [];\r\n    data.docs.forEach(doc => {\r\n        tempDocs.push({...doc.data(), id: doc.id});\r\n        tempNameList.push(doc.data().name.dceName);\r\n      });\r\n    setDceHtml(tempDocs) ;\r\n    setDceNameList(tempNameList);\r\n}\r\n\r\n//auto trigger showDceList upon first render only\r\nuseEffect(() => {\r\n    showDceList();\r\n  }, [])\r\n\r\n\r\n// collect dce id from clicked button and get data from database so dce can be edited.\r\nconst editDce = (e) => {\r\n    let dce;\r\nconsole.log(\"e is: \"+ e.target.parentElement.parentElement.getAttribute('data-id'));\r\n//get parent element as well as parent of parent to avoid misclick on icon\r\nif(e.target.parentElement.parentElement.getAttribute('data-id')){\r\ndce = e.target.parentElement.parentElement.getAttribute('data-id');\r\n} else{\r\n    dce = e.target.parentElement.getAttribute('data-id');\r\n}\r\nconst dceData = pemFirestore.collection('users').doc(uid).collection('DceList').doc(dce).get()\r\n.then((doc)=>{\r\n    const dceName = doc.data().name.dceName;\r\n    const tempDetails = {details: {grouped: doc.data().grouped, groupFeature: doc.data().groupFeature, nrQuestions: doc.data().nrQuestions}}\r\n    setDceNameEdit(dceName);\r\n    setDceFeatures(doc.data().features)\r\n    setDceId(dce);\r\n    setDceDetails(tempDetails);\r\n})\r\n.catch((error)=>{\r\n    console.error(\"Error loading document: \", error);\r\n})\r\n}\r\n\r\n//delete a dce from database and refresh list\r\nconst deleteDce = (e) => {\r\n    let dce;\r\n    if(e.target.parentElement.parentElement.getAttribute('data-id')){\r\n    dce = e.target.parentElement.parentElement.getAttribute('data-id');\r\n    } else{\r\n        dce = e.target.parentElement.getAttribute('data-id');\r\n    }    pemFirestore.collection('users').doc(uid).collection('DceList').doc(dce).delete().then(() => {\r\n        console.log(\"Document with ID\"+dce.id+ \"  successfully deleted!\");\r\n    }).catch((error) => {\r\n        console.error(\"Error removing document: \", error);\r\n    });\r\nshowDceList();\r\n}\r\n\r\n//toggle to show or hide form for new dce\r\n  const showNewDceForm = ()=>{\r\n      if(showNew){\r\n          setShowNew(false)\r\n      }\r\n      else if(!showNew){\r\n          setShowNew(true)\r\n      }\r\n  }\r\n\r\n  //html to show in browser\r\n    return (\r\n             <div>\r\n           {/* <Header/>  */}\r\n        <div className=\"row my-4\">\r\n            <div className=\"listContainer col col-12 col-sm-3\">\r\n           <div className=\" col-auto \">\r\n            <h4><u>DCE list</u></h4>\r\n            <ul>\r\n            {dceHtml&&console.log('dceHtml: '+JSON.stringify(dceHtml))}\r\n\r\n            {dceHtml && dceHtml.map((dce, i)=>{\r\n                return(\r\n                    <div key={i} className=\"\">\r\n                    <h5 className=\"mt-3\"><li className=\"listRuler mb-1\"  data-id={dce.id}> <b>{dce.name.dceName}</b>\r\n                    <hr className=\"ruler\"/> \r\n                    <button className=\"btn btn-sm btn-outline-warning mx-1\" onClick={editDce}><i class=\"material-icons mat-icon mt-1\">edit</i></button>\r\n                    {dce.grouped&&<Link to={{pathname:\"/aspectList/\"+uid+\"/\"+ dce.id, dceFeatures: dce.features, groupFeature: dce.groupFeature, dceNameEdit: dceNameEdit}}>\r\n                    <button className=\"btn btn-sm btn-outline-danger mx-1\" ><i class=\"material-icons mat-icon mt-1\">settings</i></button>\r\n                    </Link>}\r\n                    <button className=\"btn  btn-outline-success btn-sm mx-1\" onClick={(e) => { if (window.confirm('Are you sure you wish to delete this DCE?')) deleteDce(e) } }><i class=\"material-icons mat-icon mt-1\">delete_forever</i></button>\r\n                    </li></h5>\r\n                    </div>\r\n                )\r\n                })\r\n            }\r\n        </ul>\r\n</div>\r\n<div className=\"row my-4\">\r\n<div className=\"col-auto  \">\r\n    <h4><u>Create new DCE</u></h4>\r\n    <div> <button className=\"btn btn-sm btn-outline-info\" onClick={showNewDceForm}> new DCE</button>\r\n</div>\r\n{showNew&&<NewDce showDceList={showDceList} showNewDceForm={showNewDceForm} dceNameList={dceNameList} />}\r\n</div>\r\n</div>\r\n</div>\r\n\r\n<div className=\"col scenarioContainer\">\r\n    <ScenarioList dceNameEdit = {dceNameEdit} dceId={dceId} dceFeatures={dceFeatures}  dceDetails={dceDetails}/>\r\n</div>\r\n</div>\r\n\r\n</div>\r\n    )\r\n}\r\n","import React, { useContext, useEffect, useState } from \"react\";\r\nimport { UserContext } from \"../../providers/UserProvider\";\r\nimport { pemFirestore } from \"../../firebase/config\";\r\nimport { useParams, HashRouter as Router, Route, Link } from \"react-router-dom\";\r\nimport ResultDce from \"../result/ResultDce\";\r\n\r\n export default function Dces() {\r\n      \r\n    \r\n    const [dceHtml, setDceHtml] = useState([]);\r\n    const [showNew, setShowNew] = useState(false);\r\n    const [dceNameEdit, setDceNameEdit] = useState('(Click on ICON in DCE list)');\r\n    const [dceFeatures, setDceFeatures] = useState([]);\r\n    const [dceId, setDceId] = useState('');\r\n    const [dceNameList, setDceNameList] = useState([]);\r\n    const [dceDetails, setDceDetails] = useState([])\r\n    const user = useContext(UserContext);\r\n    const uid = user.uid;\r\n\r\n//Get list of dce's from database and show on screen\r\nconst showDceList = async() => {\r\n    let response = pemFirestore.collection('users').doc(uid).collection('DceList');\r\n    let data = await response.get();\r\n    let tempDocs = [];\r\n    let tempNameList = [];\r\n    data.docs.forEach(doc => {\r\n        tempDocs.push({...doc.data(), id: doc.id});\r\n        tempNameList.push(doc.data().name.dceName);\r\n      });\r\n    setDceHtml(tempDocs) ;\r\n    setDceNameList(tempNameList);\r\n}\r\n\r\n//auto trigger showDceList upon first render and when user changes\r\nuseEffect(() => {\r\n    showDceList();\r\n  }, [user])\r\n\r\n\r\n// collect dce id from clicked button and get data from database so dce can be edited.\r\nconst resultDce = (e) => {\r\n    let dce;\r\nconsole.log(\"e is: \"+ e.target.parentElement.parentElement.getAttribute('data-id'));\r\nif(e.target.parentElement.parentElement.getAttribute('data-id')){\r\ndce = e.target.parentElement.parentElement.getAttribute('data-id');\r\n} else{\r\n    dce = e.target.parentElement.getAttribute('data-id');\r\n}\r\nconst dceData = pemFirestore.collection('users').doc(uid).collection('DceList').doc(dce).get()\r\n.then((doc)=>{\r\n    const dceName = doc.data().name.dceName;\r\n    const tempDetails = {details: {grouped: doc.data().grouped, groupFeature: doc.data().groupFeature, nrQuestions: doc.data().nrQuestions}}\r\n    setDceNameEdit(dceName);\r\n    setDceDetails(tempDetails);\r\n    setDceFeatures(doc.data().features)\r\n    setDceId(dce);\r\n    console.log('dceDetails onCreate: '+JSON.stringify(tempDetails))\r\n}).catch((error) => {\r\n    console.error(\"Error loading document: \", error);\r\n});\r\n}\r\n\r\n\r\n  //html to show in browser\r\n    return (\r\n             <div>\r\n        <div className=\"row my-4\">\r\n            <div className=\"listContainer col col-12 col-sm-3\">\r\n           <div className=\" col-auto \">\r\n            <h4><u>DCE list</u></h4>\r\n            <ul>\r\n            {dceHtml && dceHtml.map((dce, i)=>{\r\n                return(\r\n                    <div key={i} className=\"\">\r\n                    <h5 className=\"mt-3\"><li className=\"listRuler mb-1\"  data-id={dce.id}> <b>{dce.name.dceName}</b>\r\n                    <hr className=\"ruler\"/> \r\n                    <Link to={{pathname:\"/app/\"+uid+\"/\"+ dce.id}}>\r\n                    <button className=\"btn btn-sm btn-outline-info mx-1\" ><i class=\"material-icons mat-icon mt-1\">play_circle_outline</i></button>\r\n                    </Link>\r\n                    {dce.grouped&&<button className=\"btn btn-sm btn-outline-danger mx-1\" onClick={resultDce}><i class=\"material-icons mat-icon mt-1\">poll</i></button>}                    </li></h5>\r\n                    </div>\r\n                )\r\n                })\r\n            }\r\n        </ul>\r\n</div>\r\n                    <div className=\"row my-4\">\r\n                        <div className=\"col-auto  \">\r\n                            <div> \r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n</div>\r\n\r\n<div className=\"col scenarioContainer\">\r\n    <ResultDce  dceDetails={dceDetails} dceNameEdit = {dceNameEdit} dceId={dceId} dceFeatures={dceFeatures} userId={uid} />\r\n</div>\r\n</div>\r\n\r\n</div>\r\n    )\r\n}\r\n","const handleInputA = (e, currentName) => {\r\n    const name = e.target.value;\r\n    const nameList = [...currentName];\r\n    nameList[0]=name;\r\n    return ( \r\n        nameList\r\n     );\r\n}\r\n \r\nexport default handleInputA;","import React, { useContext, useState } from \"react\";\r\nimport { UserContext } from \"../../providers/UserProvider\";\r\nimport { pemFirestore } from \"../../firebase/config\";\r\nimport { useParams} from \"react-router-dom\";\r\nimport handleInputA from \"./handleAInputs\";\r\n\r\n\r\nexport default function NewAspect({ setShowAspectsFlag, showNewAspectForm}) {\r\n\r\n    const [aspectName, setAspectName] = useState(['name']);\r\n    const [aspectDescr, setAspectDescr] = useState(['descr']);\r\n    const {userId, dceId } = useParams();\r\n\r\n    const user = useContext(UserContext);\r\n    const uid = user.uid;\r\n\r\n \r\n  //Save aspect if all fields are filled in\r\n    const saveAspect = (e)=>{\r\n        e.preventDefault();\r\n        let aspectColl = pemFirestore.collection('users').doc(userId).collection('DceList').doc(dceId).collection('AspectList');\r\n        aspectColl.add( {aspectName: aspectName[0], aspectDescr: aspectDescr[0]})\r\n        .then((docRef)=>{\r\n              console.log(\"Document written with ID: \", docRef.id);\r\n              aspectColl.doc(docRef.id).collection('Combis').doc('0').set({nr: 0, groupValue: \"\", filters: []})\r\n              setShowAspectsFlag(\"new aspect saved id \"+docRef.id);\r\n        })\r\n        .catch((error) => {\r\n            console.error(\"Error adding document: \", error);\r\n        });\r\n        // showAspectList();\r\n        showNewAspectForm();\r\n    \r\n  }\r\n\r\n    // handle name input change\r\n    const handleNameInputChange = (e) => {\r\n      const nameList = handleInputA(e, aspectName)\r\n        setAspectName(nameList);\r\n    }\r\n\r\n    // handle descr input change\r\n    const handleDescrInputChange = (e) => {\r\n      const descrList = handleInputA(e, aspectDescr);\r\n      setAspectDescr(descrList);\r\n  }\r\n\r\n \r\n\r\n  //html to show in browser\r\n  return (\r\n        <div>\r\n            <form className=\"form-inline\">\r\n                <div className=\"form-floating\">\r\n                    <input type=\"text\" className=\"form-control\" name=\"aspectName\"  placeholder=\"Aspect name\" id=\"aspectName\" \r\n                    required onChange={handleNameInputChange}></input>\r\n                    <label htmlFor=\"aspectName\" className=\"block\">Name: </label>\r\n                    </div>\r\n                    <div className=\"form-floating\">\r\n                    <textarea type=\"text\" rows=\"7\" className=\"form-control\" name=\"aspectDescr\"  placeholder=\"Description\" id=\"aspectDescr\" \r\n                    required onChange={handleDescrInputChange}></textarea>\r\n                    <label htmlFor=\"aspectDescr\" className=\"block\">Description: </label>\r\n                    </div>\r\n      <button className=\"btn btn-sm btn-outline-success\" onClick={saveAspect} >Save aspect</button>\r\n          </form>\r\n        </div>\r\n    )\r\n}\r\n","import React, {useState} from 'react';\r\nimport { useLocation, useHistory} from \"react-router-dom\";\r\nimport useGetFromDb from './useGetFromDb';\r\n// import useGetHtml from '../../hooks/useGetHtml_Bak';\r\n\r\n// export default function AspectEdit({aspectId, aspectNameEdit, aspectDescr, aspectFilters, saveFilters, chosenFeatures, setChosenFeatures, handleAddCombi, handleDeleteCombi, groupValues, setGroupValues, editFunctions}) {\r\nexport default function AspectEdit({aspectProps, editFunctions, editProps}) {\r\n\r\n    // const [formValue1, setFormValue1] = useState(null)\r\n    // const [formValue2, setFormValue2] = useState(null)\r\n    const [filterSaved, setFilterSaved] = useState([false])\r\n    const location = useLocation();\r\n    const dceFeatures = location.dceFeatures;\r\n    const groupFeature = location.groupFeature;\r\n    const history = useHistory();\r\n    const {saveFilters, setAgeGenderValues, setGroupValues, setChosenFeatures, handleAddCombi, handleDeleteCombi} = editFunctions\r\n    const {aspectId, aspectNameEdit, aspectDescr, aspectFilters} = aspectProps;\r\n    const {groupValues, chosenFeatures, ageGenderValues } = editProps;\r\n\r\n    if(groupFeature===undefined){\r\n        history.push('/');\r\n    }\r\n   \r\n    const handleFName = (fName, cIndex)=>{\r\n        // e.preventDefault();\r\n        // setFormValue1(null);\r\n        // console.log(\"SetFormValue null\");\r\n        // const { value, id} = e.target;\r\n        // const cIndex = e.target.dataset.id;\r\n        // console.log(\"handleChosen triggered, target:\"+JSON.stringify(e.target.dataset));\r\n        // console.log(\"value is: \"+JSON.stringify(value));\r\n        // console.log(\"chosenFeatures before copy: \"+JSON.stringify(chosenFeatures));\r\n        // console.log(\"aspectFilter before copy: \"+JSON.stringify(aspectFilters));\r\n        const chosenList = [...chosenFeatures];\r\n        // chosenList[0]['fName'] = value;\r\n        chosenList[cIndex][0]={fName: fName};\r\n        const tempSavedList = [...filterSaved];\r\n        tempSavedList[cIndex]=false;\r\n        // chosenList.push({fName: value});\r\n        setChosenFeatures(chosenList);\r\n        setFilterSaved(tempSavedList);\r\n    }\r\n\r\n    const handleFValue = (fValue, cIndex) =>{\r\n        // e.preventDefault();\r\n        // setFormValue1(null);\r\n        // setFormValue2(null);\r\n        // const {value, id } = e.target;\r\n        // const cIndex = e.target.dataset.id;\r\n        const chosenList = [...chosenFeatures];\r\n        chosenList[cIndex][0]['fValue'] = fValue;\r\n        const tempSavedList = [...filterSaved];\r\n        tempSavedList[cIndex]=false;\r\n        setChosenFeatures(chosenList);\r\n        setFilterSaved(tempSavedList);\r\n    }\r\n    \r\n    const handleGroupValue = (value, cIndex)=>{\r\n        console.log(\" value, cIndex: \"+value+cIndex);\r\n            console.log(\"groupValues: \"+JSON.stringify(groupValues));\r\n        // e.preventDefault();\r\n        // const {value, id } = e.target;\r\n        // const cIndex = e.target.dataset.id;\r\n        let tempGValues = [...groupValues]\r\n        tempGValues[cIndex]=value;\r\n        const tempSavedList = [...filterSaved];\r\n        tempSavedList[cIndex]=false;\r\n        console.log(\"tempGValues: \"+JSON.stringify(tempGValues));\r\n        setGroupValues(tempGValues);\r\n        setFilterSaved(tempSavedList);\r\n        }\r\n \r\n        const handleAgeGenderValue = (name, value, cIndex) =>{\r\n            console.log(\"name, value, cIndex: \"+name+value+cIndex);\r\n            console.log(\"ageGenderValues: \"+JSON.stringify(ageGenderValues));\r\n            let tempAgeGenderValues = [...ageGenderValues];\r\n            tempAgeGenderValues[cIndex][name] = value;\r\n            const tempSavedList = [...filterSaved];\r\n            tempSavedList[cIndex]=false;\r\n            setAgeGenderValues(tempAgeGenderValues);\r\n            setFilterSaved(tempSavedList);\r\n        }\r\n\r\n    const handleSave = (e)=>{\r\n        e.preventDefault();\r\n        const cIndex = e.target.dataset.id;\r\n        let tempList = [...aspectFilters[cIndex],...chosenFeatures[cIndex]];\r\n        let tempChosen = [...chosenFeatures];\r\n        if(tempChosen[cIndex][0]&&tempChosen[cIndex][0]['fName'].length>0&&!tempChosen[cIndex][0]['fValue']){\r\n            alert(\"Select a value for the filter feature before saving\")\r\n        }else{\r\n        tempChosen[cIndex] = [];\r\n        console.log('group values: '+JSON.stringify(groupValues))\r\n        if (groupValues[cIndex].length===0){\r\n            alert(\"Select a value for the Group feature before saving\")\r\n            } else{\r\n            saveFilters(cIndex, tempList, tempChosen, groupValues, ageGenderValues);\r\n            console.log(\"tempList in save: \"+JSON.stringify(tempList))\r\n            console.log(\"tempChosen in save: \"+JSON.stringify(tempChosen))\r\n            // setChosenFeatures(tempChosen);\r\n            // setFormValue1(\"\");\r\n            console.log(\"SetFormValue blanc\");\r\n            // setFormValue2(\"\");\r\n            const tempSavedList = [...filterSaved];\r\n            tempSavedList[cIndex]=true;\r\n            setFilterSaved(tempSavedList);\r\n            }\r\n        }\r\n    }\r\n\r\n    const handleDelete = (e, index, cIndex)=>{\r\n        e.preventDefault();\r\n        let tempCIndex = cIndex.toString();\r\n        let tempFilters = [...aspectFilters[tempCIndex]];\r\n        let emptyChosen = [];\r\n        aspectFilters.map(()=>{emptyChosen.push([])});\r\n        tempFilters.splice(index, 1);\r\n        saveFilters(tempCIndex, tempFilters, emptyChosen, groupValues, ageGenderValues);\r\n    }\r\n\r\n    const {fromDb} = useGetFromDb(aspectId, chosenFeatures, groupValues, aspectFilters, handleDeleteCombi, dceFeatures, handleDelete, handleGroupValue, groupFeature, handleFName, handleFValue, handleSave, handleAgeGenderValue, ageGenderValues, filterSaved);  \r\n    // const html = useGetHtml(chosenFeatures, aspectNameEdit, formValue1, dceFeatures, formValue2, handleFValue, handleSave, handleFName )\r\n\r\n\r\nlet addCombiButton = [];\r\n   if(aspectNameEdit!=='(Click on ICON in Aspect list)'){\r\n       addCombiButton.push(\r\n        <button className=\"btn btn-sm btn-outline-info my-4\" onClick={handleAddCombi}>add combination feature</button>\r\n        )\r\n}\r\n\r\n    return (\r\n        <div>\r\n            <h4 className=\"mb-1\">Define aspect for <b>{aspectNameEdit}</b></h4>\r\n            <h6 className=\"text-secondary pb-3\">Description: {aspectDescr}</h6>\r\n             \r\n              {fromDb}\r\n              {/* {fromDb.length===0&&html}\r\n              {html} */}\r\n              {addCombiButton}\r\n        </div>\r\n    )\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Select from \"react-select\";\r\n\r\n\r\nexport default function useGetFromDb(aspectId, chosenFeatures, groupValues, aspectFilters, handleDeleteCombi, dceFeatures, handleDelete, handleGroupValue, groupFeature, handleFName, handleFValue, handleSave, handleAgeGenderValue, ageGenderValues, filterSaved) {\r\n\r\n    const [fromDb, setFromDb] = useState([]);\r\n    const [values, setValues] = useState([])\r\n    const helperArray = [{}];\r\n    const valueOptions = [{label: \"test\", value: \"testValue\"}]\r\n    const ageOptions = [{label: \"younger than 25 years\", value: \"young\"},{label: \"25 years or older\", value: \"old\"}];\r\nconst genderOptions = [{label: \"female\", value: \"female\"},{label: \"male\", value: \"male\"}]\r\n    // chosenFeatures[cIndex][0]&&chosenFeatures[cIndex][0].map((c,i)=>{\r\n    //     return {label: (()=>dceFeatures.find(x=>x.featureName===c[\"fName\"])), value: (()=>dceFeatures.find(x=>x.featureName===c[\"fName\"])) }\r\n    // })\r\n    // <option value={dceFeatures.find(x=>x.featureName===chosenFeatures[cIndex][0][\"fName\"]).featureValue1}>{dceFeatures.find(x=>x.featureName===chosenFeatures[cIndex][0][\"fName\"]).featureValue1}</option>\r\n\r\n    \r\nuseEffect(() => {\r\n    let fV1=\"\";\r\n    let fV2=\"\";\r\n    // setFormValue1(\"\");\r\n    // setFormValue2(\"\");\r\n    let tempFromDB =[];\r\n    aspectFilters.map((combi, cIndex)=>{\r\n        tempFromDB.push(\r\n           <div id={cIndex}> {(cIndex!==0)&&(<h5 className=\"my-5\">\r\n           <button onClick={(e)=>handleDeleteCombi(e,cIndex)} className=\"btn  btn-outline-success btn-sm mx-2\"  > <i class=\"material-icons mat-icon\">delete_forever</i></button>\r\n           combined with: \r\n           </h5>\r\n           )}\r\n           <h5>Select value for group feature - {groupFeature}</h5>\r\n\r\n           <label htmlFor=\"groupVal\">Group value</label>\r\n<div className=\"selectInputs\">\r\n           {dceFeatures&&helperArray.map((c,i)=>{return (<Select key={`${aspectId}-grValue- ${cIndex}`} options={[{label: dceFeatures.find(x=>x.featureName===groupFeature).featureValue1, value: dceFeatures.find(x=>x.featureName===groupFeature).featureValue1},\r\n{label: dceFeatures.find(x=>x.featureName===groupFeature).featureValue2, value: dceFeatures.find(x=>x.featureName===groupFeature).featureValue2}]} placeholder={groupValues[cIndex]|| \"Select...\"} onChange={(option) => handleGroupValue(option.value, cIndex)} />\r\n)})}   \r\n</div>\r\n          <h5>Saved features and values</h5>\r\n\r\n           </div>\r\n        )\r\n        combi.map((filter, index)=>{\r\n        console.log(\"filter is: \"+JSON.stringify(filter));\r\n        tempFromDB.push(\r\n        <div id={index} className=\"my-3\"><div className=\"savedFeatures my-2 mx-3 px-5 py-1 p-3 border rounded\">{filter.fName}</div><span className=\"savedFeatures mx-3 px-5 py-1 border rounded\">{filter.fValue}</span>\r\n            <span>\r\n               <button onClick={(e)=>handleDelete(e,index, cIndex)} className=\"btn  btn-outline-success btn-sm mx-2\"  > <i class=\"material-icons mat-icon\">delete_forever</i></button>\r\n               </span>\r\n          </div>\r\n    ) // end of fromDb\r\n}) // end of combi \r\n{          // add filter button - fromDb pt2\r\n}\r\ntempFromDB.push(\r\n    <div>\r\n          <span>\r\n            <form>\r\n                {console.log('groupFeature: '+groupFeature)}\r\n                {console.log('dceFeatures: '+JSON.stringify(dceFeatures))}\r\n              <label htmlFor='fNames' className=\"col-md-3 col-form-label\">Add filter feature </label>\r\n                \r\n                  <div className=\"selectInputs\">\r\n                  <Select key={`${aspectId}-fName- ${cIndex}`} options={dceFeatures&&dceFeatures.map((feature,ind) =>{\r\n                          console.log(\"ind is: \"+ind);\r\n                          let optionHtml = feature.featureName;\r\n                          let isDisabled = false;\r\n                          if (feature.featureName===groupFeature){\r\n                            //   optionHtml = \"\";\r\n                              isDisabled = true\r\n                          }\r\n                          return (\r\n                              {label: optionHtml, value: optionHtml, isDisabled: isDisabled}\r\n                            // <option value={optionHtml} disabled={disabled}>{optionHtml} </option>\r\n                          )\r\n                      })}\r\n                      id=\"fNames\"\r\n                      onChange={(option) => handleFName(option.value, cIndex)}  />\r\n                    </div>\r\n              </form>\r\n              {dceFeatures&&<form>\r\n            \r\n<div className=\"selectInputs pb-3\">\r\n{chosenFeatures[cIndex][0]&&chosenFeatures[cIndex].map((c,i)=>{return (<Select key={`${aspectId}-fValue- ${cIndex}`} id=\"fValues\" \r\noptions={[{label: dceFeatures.find(x=>x.featureName===chosenFeatures[cIndex][0][\"fName\"]).featureValue1, value: dceFeatures.find(x=>x.featureName===chosenFeatures[cIndex][0][\"fName\"]).featureValue1},\r\n{label: dceFeatures.find(x=>x.featureName===chosenFeatures[cIndex][0][\"fName\"]).featureValue2, value: dceFeatures.find(x=>x.featureName===chosenFeatures[cIndex][0][\"fName\"]).featureValue2}]} \r\nplaceholder=\"Enter filter value\" onChange={(option) => handleFValue(option.value, cIndex)} />\r\n)})}\r\n</div>\r\n{/* {chosenFeatures[cIndex][0]&&<Select options={values} />} */}\r\n<div className=\"selectInputs pb-3\">\r\n<label htmlFor='ageFilter' className=\"\">Optional filters for age and gender of participants </label>\r\n{ageGenderValues[cIndex]&&<Select options={ageOptions} isClearable id=\"ageFilter\" name=\"age\" placeholder={ageGenderValues[cIndex][\"age\"]|| \"Select age filter ...\"} onChange={(option, name)=>{let value; if(option==null){value=\"\"}else{value=option.value};handleAgeGenderValue(name.name, value, cIndex)}}/>}\r\n{ageGenderValues[cIndex]&&<Select options={genderOptions} isClearable id=\"genderFilter\" name=\"gender\" placeholder={ageGenderValues[cIndex][\"gender\"]|| \"Select gender filter ...\"} onChange={(option, name)=>{let value; if(option==null){value=\"\"}else{value=option.value};handleAgeGenderValue(name.name, option.value, cIndex)}}/>}\r\n</div>\r\n              </form>}\r\n              </span>\r\n              <button data-id={cIndex} className=\"btn btn-sm btn-outline-info mb-3\" onClick={handleSave}>save filter feature and group value</button>\r\n{filterSaved[cIndex]&&<h6>Filter saved</h6>}\r\n              </div>\r\n    ) // end of fromDb pt2\r\n   \r\n}) // end of aspect\r\n    // }\r\n    setFromDb(tempFromDB);\r\n    // setChosenFeatures(aspectFilters);\r\n    return\r\n    \r\n}, [chosenFeatures, groupValues, ageGenderValues])\r\n   \r\n\r\n    return {fromDb}\r\n    \r\n}\r\n","import { useState, useEffect } from \"react\";\r\nimport { pemFirestore, pemId } from \"../../firebase/config\";\r\n\r\n\r\nconst useGetAspectList = (userId, dceId, showAspectsFlag)=>{\r\nconst [aspects, setAspects] = useState([]);\r\n\r\n    useEffect(() => {\r\n        let response = pemFirestore.collection('users').doc(userId).collection('DceList').doc(dceId).collection('AspectList');\r\n        response.get()\r\n        .then((data)=>{\r\n            let tempDocs = [];\r\n        // let tempNameList = [];\r\n        data.docs.forEach(doc => {\r\n            tempDocs.push({...doc.data(), id: doc.id});\r\n            // tempNameList.push(doc.data().name.dceName);\r\n          });\r\n          console.log('Aspects data: '+JSON.stringify(tempDocs));\r\n        setAspects(tempDocs) ;\r\n        // setDceNameList(tempNameList);\r\n        }).catch((err)=>{\r\n            console.log('Error with loading document'+err);\r\n        })\r\n        \r\n    }, [showAspectsFlag]);\r\n    return {aspects}\r\n}\r\n\r\nexport default useGetAspectList;","import React from 'react'\r\n\r\nexport default function List({aspects, editAspect, deleteAspect}) {\r\n    return (\r\n        <div>\r\n            <div className=\" col-auto \">\r\n                <h4><u>Aspect list</u></h4>\r\n                <ul>\r\n                    {aspects && aspects.map((aspect, i)=>{\r\n                        return(\r\n                        <div key={i} className=\"\">\r\n                            <h5 className=\"mt-3\">\r\n                                <li className=\"listRuler mb-1\"  data-id={aspect.id}> <b>{aspect.aspectName}</b>\r\n                                    <hr className=\"ruler\"/> \r\n                                    <button className=\"btn btn-sm btn-outline-warning\" onClick={editAspect}><i class=\"material-icons mat-icon\">edit</i></button>\r\n                                    <button className=\"btn  btn-outline-success btn-sm mx-2\" onClick={deleteAspect}><i class=\"material-icons mat-icon\">delete_forever</i></button>\r\n                                </li>\r\n                            </h5>\r\n                        </div>\r\n                        )\r\n                        })\r\n                    }\r\n                </ul>\r\n            </div>\r\n\r\n        </div>\r\n    )\r\n}\r\n","\r\nimport { pemFirestore } from \"../../firebase/config\";\r\n\r\n\r\n\r\nexport const  handleAddCombiS = async(userId, dceId, aspectId)=>{\r\n    console.log('handleAddCombi received')\r\n    let response = pemFirestore.collection('users').doc(userId).collection('DceList').doc(dceId).collection('AspectList').doc(aspectId).collection('Combis').orderBy('nr', 'asc');\r\n    response.get()\r\n    .then((data)=>{console.log('data in handleAddCombi: '+JSON.stringify(data.docs));\r\n    let seqNr=0;\r\n    for(let i=0; i<data.docs.length; i++){\r\n        if(data.docs[i].data().nr!==seqNr){\r\n            console.log(\"doc nr !== seqNr, seqNr is: \"+seqNr + \"doc id is: \"+ data.docs[i].data().nr);\r\n            setCombi(seqNr);\r\n            return;\r\n        }\r\n        else  {\r\n            console.log(\"doc nr == seqNr, seqNr is: \"+seqNr + \"doc id is: \"+ data.docs[i].data().nr);\r\n            seqNr +=1;\r\n            if(i===data.docs.length-1){\r\n                console.log('Last doc, i===length');\r\n                setCombi(seqNr, userId, dceId, aspectId);\r\n            }\r\n        }\r\n    }\r\n    })\r\n    .catch((error)=>{\r\n        console.log('Error adding combi', error);\r\n    })\r\n    return aspectId;\r\n}\r\n\r\nconst setCombi = (seqNr, userId, dceId, aspectId)=>{\r\n    pemFirestore.collection('users').doc(userId).collection('DceList').doc(dceId).collection('AspectList').doc(aspectId).collection('Combis').doc(seqNr.toString())\r\n    .set({nr: seqNr, groupValue: \"\", filters: []})\r\n    .then(()=>{\r\n        console.log('combi added');\r\n        return(aspectId);\r\n    })\r\n    .catch((error)=>{\r\n        console.log('Error adding combi', error);\r\n    })\r\n}\r\n\r\n","import React, { useState } from \"react\";\r\nimport { pemFirestore } from \"../../firebase/config\";\r\nimport NewAspect from \"./NewAspect\";\r\nimport AspectEdit from \"./AspectEdit\";\r\nimport { useParams} from \"react-router-dom\";\r\nimport useGetAspectList from \"./useGetAspectList\";\r\nimport List from \"./List\";\r\nimport {handleAddCombiS} from \"./HandleAddDelete\";\r\n\r\nexport default function AspectList() {\r\n    const [showAspectsFlag, setShowAspectsFlag] = useState('');\r\n    const [chosenFeatures, setChosenFeatures] = useState([]);\r\n    const [aspectFilters, setAspectFilters] = useState([]);\r\n    const [groupValues, setGroupValues] = useState([]);\r\n    const [ageGenderValues, setAgeGenderValues] = useState([{age: \"\", gender: \"\"}]);\r\n    // const [ageValues, setAgeValues] = useState([]);\r\n    // const [genderValues, setGenderValues] = useState([]);\r\n    const [showNew, setShowNew] = useState(false);\r\n    const [aspectNameEdit, setAspectNameEdit] = useState('(Click on ICON in Aspect list)');\r\n    const [aspectDescr, setAspectDescr] = useState('');\r\n    const [aspectId, setAspectId] = useState('');\r\n    const {userId, dceId } = useParams();\r\n    const {aspects} = useGetAspectList(userId, dceId, showAspectsFlag);\r\n\r\n// collect aspect id from clicked button and get data from database so aspect can be edited.\r\nconst editAspect = (e) => {\r\n    let aspect;\r\n    console.log(\"e is: \"+ e.target.parentElement.parentElement.getAttribute('data-id'));\r\nif(e.target.parentElement.parentElement.getAttribute('data-id')){\r\naspect = e.target.parentElement.parentElement.getAttribute('data-id');\r\n} else{\r\n    aspect = e.target.parentElement.getAttribute('data-id');\r\n}\r\nloadAspectData(aspect);\r\n}\r\n\r\nconst loadAspectData = (aspect)=>{\r\n    let emptyChosen = [];\r\n    const aspectData = pemFirestore.collection('users').doc(userId).collection('DceList').doc(dceId).collection('AspectList').doc(aspect);\r\n    aspectData.get()\r\n    .then((doc)=>{\r\n        const aspectName = doc.data().aspectName;\r\n        let combis = [];\r\n        let tempGValues = [];\r\n        let tempAgeGenderValues = [];\r\n        // let tempAValues = [];\r\n        // let tempGenderValues = [];\r\n        aspectData.collection('Combis').get()\r\n        .then((snapshot)=>{\r\n            snapshot.docs.forEach(snap=>{\r\n             combis.push(snap.data().filters);\r\n             emptyChosen.push([]);\r\n             tempGValues.push(snap.data().groupValue);\r\n             if(snap.data().ageGender){\r\n             tempAgeGenderValues.push(snap.data().ageGender);}\r\n             if(!snap.data().ageGender){\r\n                 tempAgeGenderValues.push({age: \"\", gender: \"\"})\r\n             }\r\n            //  tempAValues.push(snap.data().ageValue);\r\n            //  tempGenderValues.push(snap.data().genderValue);\r\n            })\r\n            setGroupValues(tempGValues);\r\n            console.log(\"AgeGenderValues before set: \"+JSON.stringify(tempAgeGenderValues))\r\n            setAgeGenderValues(tempAgeGenderValues);\r\n            // setAgeValues(tempAValues);\r\n            // setGenderValues(tempGenderValues);\r\n            setAspectDescr(doc.data().aspectDescr);\r\n            setAspectFilters(combis);\r\n            setChosenFeatures(emptyChosen);\r\n        })\r\n        .catch((error)=>{\r\n            console.log('Error loading aspect data', error);\r\n        });    \r\n        setAspectNameEdit(aspectName);\r\n        setAspectId(aspect);\r\n    })\r\n    .catch((error)=>{\r\n        console.log('Error loading aspect data', error);\r\n    });    \r\n}\r\n\r\nconst saveFilters = (cIndex, filters, emptyChosen, groupValues, ageGenderValues)=>{\r\n    const aspectRef = pemFirestore.collection('users').doc(userId).collection('DceList').doc(dceId).collection('AspectList').doc(aspectId).collection('Combis').doc(cIndex);\r\n    aspectRef.update({filters: filters, groupValue: groupValues[cIndex], ageGender: ageGenderValues[cIndex]})\r\n.then(() => {\r\n    let tempFilters = [...aspectFilters];\r\n    tempFilters[cIndex] = filters;\r\n    setAspectFilters(tempFilters);\r\n    setChosenFeatures(emptyChosen);\r\n    console.log(\"Document successfully updated!\");\r\n})\r\n.catch((error) => {\r\n    // The document probably doesn't exist.\r\n    console.error(\"Error updating document: \", error);\r\n});\r\n}\r\n\r\nconst handleAddCombi = async()=>{\r\n    console.log('start handleAddCombi');\r\n    handleAddCombiS(userId, dceId, aspectId)\r\n    .then((aspectId)=>{\r\n        console.log('combi added , aspectId returned, Id: '+aspectId)\r\n        loadAspectData(aspectId);\r\n    }).catch((err)=>{\r\n        console.log('Error with adding document'+err);\r\n    })\r\n}\r\n\r\nconst handleDeleteCombi = (e, cIndex)=>{\r\n    pemFirestore.collection('users').doc(userId).collection('DceList').doc(dceId).collection('AspectList').doc(aspectId).collection('Combis').doc(cIndex.toString())\r\n    .delete().then(() => {\r\n        console.log(\"Combination successfully deleted!\");\r\n        loadAspectData(aspectId);\r\n    }).catch((error) => {\r\n        console.error(\"Error removing document: \", error);\r\n    });        \r\n}\r\n\r\n//delete a aspect from database and refresh list\r\nconst deleteAspect = async(e) => {\r\n    // deleteA(e, userId, dceId)\r\n    // .then((flag)=>{\r\n\r\n    let aspect;\r\n    if(e.target.parentElement.parentElement.getAttribute('data-id')){\r\n    aspect = e.target.parentElement.parentElement.getAttribute('data-id');\r\n    } else{\r\n        aspect = e.target.parentElement.getAttribute('data-id');\r\n    }    \r\n    let aspectRef = pemFirestore.collection('users').doc(userId).collection('DceList').doc(dceId).collection('AspectList').doc(aspect);\r\n    aspectRef.collection('Combis').get()\r\n    .then((docs)=>{\r\n        docs.forEach(doc=>{\r\n            aspectRef.collection('Combis').doc(doc.id).delete()\r\n            .then(()=>{console.log('Combi with ID '+doc.id+ ' deleted')})\r\n        })\r\n    })\r\n    .then(()=>{\r\n        console.log(\"Combis deleted\");\r\n        aspectRef.delete()\r\n    .then(() => {\r\n        console.log(\"Document with ID\"+aspect+ \"  successfully deleted!\");\r\n    }).catch((error) => {\r\n        console.error(\"Error removing document: \", error);\r\n    });\r\n    if(aspect===aspectId){\r\n        setAspectId('');\r\n        setAspectDescr('');\r\n        setAspectNameEdit('(Click on ICON in Aspect list)');\r\n        setAspectFilters([]);\r\n        setChosenFeatures([]);    \r\n    }\r\nsetShowAspectsFlag(\"set flag \"+aspect);\r\nconsole.log('just set showAspectFlag '+aspect)\r\n})\r\n}\r\n\r\n\r\n//toggle to show or hide form for new aspect\r\n  const showNewAspectForm = ()=>{\r\n      if(showNew){setShowNew(false)}\r\n      else if(!showNew){setShowNew(true)}\r\n  }\r\n\r\n  const editFunctions = {\r\n    saveFilters,\r\n    setGroupValues,\r\n    setAgeGenderValues,\r\n    setChosenFeatures,  \r\n    handleAddCombi,\r\n    handleDeleteCombi\r\n  }\r\n\r\n  const editProps = {\r\n      ageGenderValues,\r\n      groupValues,\r\n      chosenFeatures\r\n  }\r\n\r\n  const aspectProps = {\r\n    aspectId, aspectNameEdit, aspectDescr, aspectFilters\r\n  }\r\n\r\n\r\n  //html to show in browser\r\n    return (\r\n    <div>\r\n        <div className=\"row my-4\">\r\n            <div className=\"listContainer col col-12 col-sm-3\">\r\n                <List aspects={aspects} editAspect={editAspect} deleteAspect={deleteAspect}/>\r\n          <div className=\"row my-4\">\r\n    <div className=\"col-auto  \">\r\n    <h4><u>Create new Aspect</u></h4>\r\n    <div> <button className=\"btn btn-sm btn-outline-info\" onClick={showNewAspectForm}> new Aspect</button>\r\n</div>\r\n{showNew&&<NewAspect dceId={dceId} setShowAspectsFlag={setShowAspectsFlag} showNewAspectForm={showNewAspectForm} />}\r\n</div>\r\n</div>\r\n</div>\r\n\r\n<div className=\"col scenarioContainer\">\r\n    {/* <AspectEdit aspectId={aspectId} aspectNameEdit={aspectNameEdit} aspectDescr={aspectDescr} aspectFilters={aspectFilters} saveFilters={saveFilters} chosenFeatures={chosenFeatures} setChosenFeatures={setChosenFeatures} handleAddCombi={handleAddCombi} handleDeleteCombi={handleDeleteCombi} groupValues={groupValues} setGroupValues={setGroupValues}/> */}\r\n    <AspectEdit aspectProps={aspectProps} editFunctions={editFunctions} editProps={editProps} />\r\n</div>\r\n</div>\r\n</div>\r\n  )\r\n}\r\n","import React, { useContext } from \"react\";\r\nimport { HashRouter as Router, Route, Switch } from \"react-router-dom\";\r\nimport App from \"../app/App\";\r\nimport SignIn from \"./SignIn\";\r\nimport SignUp from \"./SignUp\";\r\nimport { UserContext } from \"../../providers/UserProvider\";\r\nimport PasswordReset from \"./PasswordReset\";\r\nimport DceList from \"../dce/DceList\";\r\nimport Dces from \"../dce/Dces\";\r\nimport AspectList from \"../result/AspectList\";\r\n\r\nfunction Application() {\r\n  const user = useContext(UserContext);\r\n  return (\r\n        user ?\r\n        <Switch>\r\n          <Router>\r\n            <Route exact path=\"/\" ><DceList /></Route>\r\n            <Route exact path=\"/dces\" ><Dces /></Route>\r\n            <Route path=\"/aspectList/:userId/:dceId\" exact component={()=> <AspectList/>} />\r\n            <Route path=\"/app/:userId/:dceId\" exact component={()=> <App/>} />\r\n        </Router>\r\n      </Switch>\r\n      :\r\n      <Switch>\r\n        <Router>\r\n          <Route exact path=\"/signUp\" > <SignUp/></Route>\r\n          <Route exact path=\"/\" > <SignIn  /></Route>\r\n          <Route exact path=\"/passwordReset\" > <PasswordReset /> </Route>\r\n          <Route exact path=\"/dces\" ><SignIn /></Route>\r\n          <Route path=\"/app/:userId/:dceId\" exact component={()=> <App/>} />\r\n\r\n        </Router>\r\n      </Switch>\r\n  );\r\n}\r\nexport default Application;","import React, { useContext }  from \"react\";\r\nimport { HashRouter as Router, Route, Switch } from \"react-router-dom\";\r\nimport Nav from \"./Nav\";\r\nimport UserProvider, { UserContext } from \"../../providers/UserProvider\";\r\nimport Application from \"./Application\";\r\n\r\n\r\n\r\nfunction MainApp() {\r\n  const user = useContext(UserContext);\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <Router>\r\n        <Nav />\r\n        <UserProvider>\r\n          <Application/>\r\n        </UserProvider>\r\n      </Router>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default MainApp;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './css/bootstrap.css';\nimport './css/materialize.css';\nimport './index.css';\nimport MainApp from './comps/main/MainApp';\n\nReactDOM.render(\n  <React.StrictMode>\n    <MainApp />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}